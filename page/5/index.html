<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content=""><meta name="keywords" content=""><meta name="author" content="Joe Huang"><meta name="copyright" content="Joe Huang"><title>Awaken Desparado</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><meta name="generator" content="Hexo 4.1.1"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="false"><div class="author-info"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">Joe Huang</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">226</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">24</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">28</span></a></div></div></div><nav class="no-bg" id="nav"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Awaken Desparado</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"></span></div><div id="site-info"><div id="site-title">Awaken Desparado</div><div id="site-sub-title"></div></div></nav><div id="content-outer"><div class="layout" id="content-inner"><div class="recent-post-item article-container"><a class="article-title" href="/2019/10/02/LC/2019-10-02-F_set2_350_340/">LC/2019-10-02-F_set2_350_340</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-10-02</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/LC/">LC</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/TODO/">TODO</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/F/">F</a></span><div class="content"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">intersect</span><span class="params">(self, nums1: List[int], nums2: List[int])</span> -&gt; List[int]:</span></span><br><span class="line"><span class="comment">#         if len(nums1) &lt;= len(nums2):</span></span><br><span class="line"><span class="comment">#             l1, l2 = nums1, nums2</span></span><br><span class="line"><span class="comment">#         else:</span></span><br><span class="line"><span class="comment">#             l1, l2 = nums2, nums1</span></span><br><span class="line">        </span><br><span class="line">        counts = collections.Counter(nums1)</span><br><span class="line">        res = []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> num <span class="keyword">in</span> nums2:</span><br><span class="line">            <span class="keyword">if</span> counts[num] &gt; <span class="number">0</span>:</span><br><span class="line">                res += num,</span><br><span class="line">                counts[num] -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>


<p><a href="https://leetcode.com/articles/longest-substring-with-at-most-k-distinct-characte/" target="_blank" rel="noopener">https://leetcode.com/articles/longest-substring-with-at-most-k-distinct-characte/</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">lengthOfLongestSubstringKDistinct</span><span class="params">(self, s: str, k: int)</span> -&gt; int:</span></span><br><span class="line">    dic = &#123;&#125;</span><br><span class="line">    start_idx, l = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i, c <span class="keyword">in</span> enumerate(s):</span><br><span class="line">        dic[c] = i</span><br><span class="line">        <span class="keyword">if</span> len(dic) &gt; k:</span><br><span class="line">            start_idx = min(dic.values())</span><br><span class="line">            <span class="keyword">del</span> dic[s[start_idx]]</span><br><span class="line">            start_idx += <span class="number">1</span></span><br><span class="line">        l = max(i - start_idx + <span class="number">1</span>, l)</span><br><span class="line">    <span class="keyword">return</span> l</span><br></pre></td></tr></table></figure>

</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/10/02/LC/2019-10-02-LC%2022%20Generate%20Parentheses/">LC/2019-10-02-LC 22 Generate Parentheses</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-10-02</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/LC/">LC</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/TODO/">TODO</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Michelle/">Michelle</a></span><div class="content"><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7k6swbmqrj30li0e4q4e.jpg" alt="image-20191002214108136"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">generateParenthesis</span><span class="params">(self, n: int)</span> -&gt; List[str]:</span></span><br><span class="line">        <span class="keyword">if</span> n==<span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">        </span><br><span class="line">        result = []</span><br><span class="line">        self.helper(n, n, <span class="string">''</span>, result)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">helper</span><span class="params">(self, l, r, item, result)</span>:</span></span><br><span class="line">        <span class="comment"># (()))( not OK</span></span><br><span class="line">        <span class="keyword">if</span> r &lt; l: <span class="comment">#remaining r should &gt; l</span></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">if</span> l == <span class="number">0</span> <span class="keyword">and</span> r == <span class="number">0</span>:</span><br><span class="line">            result.append(item)</span><br><span class="line">        <span class="keyword">if</span> l &gt; <span class="number">0</span>:</span><br><span class="line">            self.helper(l<span class="number">-1</span>, r, item+<span class="string">'('</span>, result)</span><br><span class="line">        <span class="keyword">if</span> r &gt; <span class="number">0</span>:</span><br><span class="line">            self.helper(l, r<span class="number">-1</span>, item+<span class="string">')'</span>, result)</span><br></pre></td></tr></table></figure>

</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/10/02/LC/2019-10-02-LC%2028%20strStr()/">LC/2019-10-02-LC 28 strStr()</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-10-02</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/LC/">LC</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Michelle/">Michelle</a></span><div class="content"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">strStr</span><span class="params">(self, haystack: str, needle: str)</span> -&gt; int:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> needle:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="comment"># if l1 &lt; l2:</span></span><br><span class="line">            <span class="comment"># return -1</span></span><br><span class="line">        </span><br><span class="line">        lh = len(haystack)</span><br><span class="line">        ln = len(needle)</span><br><span class="line">        limit = lh - ln + <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(limit):</span><br><span class="line">            <span class="keyword">if</span> haystack[i:i+ln] == needle:</span><br><span class="line">                <span class="keyword">return</span> i</span><br><span class="line">                </span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7k89mhmd8j30t00dw0uu.jpg" alt="image-20191002223147856"></p>
<p>KMP:<br><a href="https://www.zhihu.com/question/21923021" target="_blank" rel="noopener">https://www.zhihu.com/question/21923021</a></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/10/02/LC/2019-10-02-LC%2035%20Search%20Insert%20Position/">LC/2019-10-02-LC 35 Search Insert Position</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-10-02</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/LC/">LC</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Michelle/">Michelle</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/ToFindBetter/">ToFindBetter</a></span><div class="content"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">searchInsert</span><span class="params">(self, nums: List[int], target: int)</span> -&gt; int:</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(nums)):</span><br><span class="line">            <span class="keyword">if</span> nums[i] == target:</span><br><span class="line">                <span class="keyword">return</span> i</span><br><span class="line">            <span class="keyword">elif</span> nums[i] &gt; target:</span><br><span class="line">                <span class="keyword">return</span> i</span><br><span class="line">            <span class="keyword">elif</span> i == len(nums) - <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">return</span> len(nums)</span><br></pre></td></tr></table></figure>



<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7k9xddqxsj30pu0dctah.jpg" alt="image-20191002232913393"></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/10/02/LC/2019-10-02-LC%207%20reverse%20Int/">LC/2019-10-02-LC 7 reverse Int</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-10-02</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/LC/">LC</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Michelle/">Michelle</a></span><div class="content"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">reverse</span><span class="params">(self, x: int)</span> -&gt; int:</span></span><br><span class="line">        num = <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># return the abs value of a number </span></span><br><span class="line">        a = abs(x)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span>(a != <span class="number">0</span>):</span><br><span class="line">            <span class="comment"># 123</span></span><br><span class="line">            <span class="comment"># a=123</span></span><br><span class="line">            <span class="comment"># num=0</span></span><br><span class="line">            <span class="comment"># First Ite</span></span><br><span class="line">            <span class="comment"># a = 12</span></span><br><span class="line">            <span class="comment"># num = 3</span></span><br><span class="line">            <span class="comment"># Second Ite</span></span><br><span class="line">            <span class="comment"># a = 1</span></span><br><span class="line">            <span class="comment"># num = 32</span></span><br><span class="line">            <span class="comment"># Third Ite</span></span><br><span class="line">            <span class="comment"># a = 0</span></span><br><span class="line">            <span class="comment"># num = 321</span></span><br><span class="line">            tmp = a % <span class="number">10</span></span><br><span class="line">            print(<span class="string">'a'</span>, a)</span><br><span class="line">            print(<span class="string">'tmp'</span>, tmp)</span><br><span class="line">            num = num*<span class="number">10</span> +tmp</span><br><span class="line">            print(<span class="string">'num'</span>, num)</span><br><span class="line">            a = int(a/<span class="number">10</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> x &gt; <span class="number">0</span> <span class="keyword">and</span> num &lt; <span class="number">2147483647</span>:</span><br><span class="line">            <span class="keyword">return</span> num</span><br><span class="line">        <span class="keyword">elif</span> x &lt; <span class="number">0</span> <span class="keyword">and</span> num &lt;= <span class="number">2147483647</span>:</span><br><span class="line">            <span class="keyword">return</span> -num</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br></pre></td></tr></table></figure>

</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/10/02/LC/2019-10-02-LC%2046%20Permutation/">LC/2019-10-02-LC 46 Permutation</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-10-02</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/LC/">LC</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/TODO/">TODO</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Michelle/">Michelle</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/backtracking/">backtracking</a></span><div class="content"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">permute</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> len(nums) &lt;= <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> [nums]</span><br><span class="line">        </span><br><span class="line">        result = []</span><br><span class="line">        <span class="keyword">for</span> i, num <span class="keyword">in</span> enumerate(nums):</span><br><span class="line">            n = nums[:i] + nums[i+<span class="number">1</span>:]</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> self.permute(n):</span><br><span class="line">                <span class="comment"># print(nums[i], j)</span></span><br><span class="line">                result.append([nums[i]] + j)</span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure>

<p><a href="https://www.geeksforgeeks.org/write-a-c-program-to-print-all-permutations-of-a-given-string/" target="_blank" rel="noopener">https://www.geeksforgeeks.org/write-a-c-program-to-print-all-permutations-of-a-given-string/</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">permute_dfs</span><span class="params">(self, path, nums, result)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> len(nums) == <span class="number">1</span>:</span><br><span class="line">            result.append(path+nums)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(nums)):</span><br><span class="line">                tmp_list = nums[:]</span><br><span class="line">                pop_out = tmp_list.pop(i)</span><br><span class="line">                self.permute_dfs(path+[pop_out], tmp_list, result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">permute</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type nums: List[int]</span></span><br><span class="line"><span class="string">        :rtype: List[List[int]]</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        result = []</span><br><span class="line">        self.permute_dfs([], nums, result)</span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure>



<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7kvffagflj30pm0fg0us.jpg" alt="image-20191003115310184"></p>
<p>ref: <a href="https://www.youtube.com/watch?v=nrHTtjkYEyQ" target="_blank" rel="noopener">https://www.youtube.com/watch?v=nrHTtjkYEyQ</a></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7kssw1ayej31ic0mcdzm.jpg" alt="image-20191003102218161"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7ktpb6c1oj31d80n07km.jpg" alt="image-20191003105327148"></p>
<p>![image-20191003110018474](/Users/joe/Library/Application Support/typora-user-images/image-20191003110018474.png)</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7kttnsg14j31a40mqne7.jpg" alt="image-20191003105739813"></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/10/02/LC/2019-10-02-LC%209%20Palindrome%20Number/">LC/2019-10-02-LC 9 Palindrome Number</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-10-02</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/LC/">LC</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Michelle/">Michelle</a></span><div class="content"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isPalindrome</span><span class="params">(self, x: int)</span> -&gt; bool:</span></span><br><span class="line">        num = <span class="number">0</span></span><br><span class="line">        a = abs(x)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span>(a != <span class="number">0</span>):</span><br><span class="line">            tmp = a % <span class="number">10</span></span><br><span class="line">            num = num * <span class="number">10</span> + tmp</span><br><span class="line">            a = a // <span class="number">10</span></span><br><span class="line">            <span class="comment"># print(a)</span></span><br><span class="line">        <span class="keyword">if</span> x &gt;= <span class="number">0</span> <span class="keyword">and</span> x == num:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure>

</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/10/02/LC/2019-10-02-LC-325%20max_sub_arr_len/">LC/2019-10-02-LC-325 max_sub_arr_len</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-10-02</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/LC/">LC</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/TODO/">TODO</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/F/">F</a></span><div class="content"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxSubArrayLen</span><span class="params">(self, nums, k)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type nums: list</span></span><br><span class="line"><span class="string">        :type k: int</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        pre_sum = [<span class="number">0</span>]+list(accumulate(nums))</span><br><span class="line">        res = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(pre_sum)):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(i, len(pre_sum)):</span><br><span class="line">                <span class="keyword">if</span> pre_sum[j] - pre_sum[i] == k:</span><br><span class="line">                    res = max(res, j - i)</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = Solution()</span><br><span class="line">print(obj.maxSubArrayLen([<span class="number">1</span>, <span class="number">-1</span>, <span class="number">5</span>, <span class="number">-2</span>, <span class="number">3</span>], k = <span class="number">3</span>))</span><br><span class="line"><span class="comment"># https://blog.csdn.net/qq_17550379/article/details/86421075</span></span><br></pre></td></tr></table></figure>





<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">maxSubArrayLen</span><span class="params">(self, nums, k)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    :type nums: list</span></span><br><span class="line"><span class="string">    :type k: int</span></span><br><span class="line"><span class="string">    :rtype: int</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    pre_sum = list(accumulate(nums))</span><br><span class="line">    res, dic = <span class="number">0</span>, dict()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(pre_sum)):</span><br><span class="line">        <span class="keyword">if</span> pre_sum[i] == k:</span><br><span class="line">            res = i + <span class="number">1</span></span><br><span class="line">        <span class="keyword">elif</span> pre_sum[i] - k <span class="keyword">in</span> dic:</span><br><span class="line">            res = max(res, i - dic[pre_sum[i] - k])</span><br><span class="line">        <span class="keyword">if</span> pre_sum[i] <span class="keyword">not</span> <span class="keyword">in</span> dic:</span><br><span class="line">            dic[pre_sum[i]] = i</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"> <span class="comment">#https://blog.csdn.net/qq_17550379/article/details/86421075</span></span><br></pre></td></tr></table></figure>

<p>O(n)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">maxSubArrayLen</span><span class="params">(self, nums: List[int], k: int)</span> -&gt; int:</span></span><br><span class="line">    sum2idx = &#123; <span class="number">0</span>:<span class="number">-1</span> &#125;</span><br><span class="line">    res, sum = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i, n <span class="keyword">in</span> enumerate(nums):</span><br><span class="line">        sum += n</span><br><span class="line">        <span class="keyword">if</span> sum <span class="keyword">not</span> <span class="keyword">in</span> sum2idx: sum2idx[sum] = i</span><br><span class="line">        <span class="keyword">if</span> sum-k <span class="keyword">in</span> sum2idx: res = max(res, i-sum2idx[sum-k])</span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>





<ol start="560">
<li>Subarray Sum Equals K</li>
<li>Subarray Sums Divisible by K</li>
<li>Maximum Size Subarray Sum Equals k</li>
<li>Number of Submatrices That Sum to Target</li>
</ol>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/10/02/LC/2019-10-02-LC-53%20Maximum%20Subarray/">LC/2019-10-02-LC-53 Maximum Subarray</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-10-02</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/LC/">LC</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/F/">F</a></span><div class="content"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxSubArray</span><span class="params">(self, nums: List[int])</span> -&gt; int:</span></span><br><span class="line">        max_sum = nums[<span class="number">0</span>]</span><br><span class="line">        tmp_sum = nums[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, len(nums)):</span><br><span class="line">            tmp_sum = max(tmp_sum + nums[i], nums[i])</span><br><span class="line">            <span class="keyword">if</span> tmp_sum &gt; max_sum:</span><br><span class="line">                max_sum = tmp_sum</span><br><span class="line">        <span class="keyword">return</span> max_sum</span><br></pre></td></tr></table></figure>



<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7jwmw170hj30qy0em40z.jpg" alt="image-20191002154920066"></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/10/01/LC/2019-10-01-F-set1_13_2/">LC/2019-10-01-F-set1_13_2</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-10-01</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/LC/">LC</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/F/">F</a></span><div class="content"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">romanToInt</span><span class="params">(self, s: str)</span> -&gt; int:</span></span><br><span class="line">   <span class="comment"># check input</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> s:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">		<span class="comment"># build a symbol:value dict</span></span><br><span class="line">    d = &#123;<span class="string">'I'</span>:<span class="number">1</span>, <span class="string">'V'</span>:<span class="number">5</span>, <span class="string">'X'</span>:<span class="number">10</span>, <span class="string">'L'</span>:<span class="number">50</span>, <span class="string">'C'</span>:<span class="number">100</span>, <span class="string">'D'</span>:<span class="number">500</span>, <span class="string">'M'</span>:<span class="number">1000</span>&#125;</span><br><span class="line">    n = len(s)</span><br><span class="line">    </span><br><span class="line">    result = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># iterate characters in s</span></span><br><span class="line">    <span class="keyword">for</span> idx <span class="keyword">in</span> range(n<span class="number">-1</span>):</span><br><span class="line">        char_curr = s[idx] <span class="comment"># e.g. I in IX</span></span><br><span class="line">        char_next = s[idx+<span class="number">1</span>] <span class="comment"># OOR..</span></span><br><span class="line">        <span class="keyword">if</span> d[char_curr] &lt; d[char_next]:</span><br><span class="line">            result = result - d[char_curr]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            result = result + d[char_curr]</span><br><span class="line">    </span><br><span class="line">    result = result + d[s[<span class="number">-1</span>]]</span><br><span class="line">    <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure>



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"># class ListNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, x):</span></span><br><span class="line"><span class="comment">#         self.val = x</span></span><br><span class="line"><span class="comment">#         self.next = None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">addTwoNumbers</span><span class="params">(self, l1: ListNode, l2: ListNode)</span> -&gt; ListNode:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> l1:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> l2: </span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">        </span><br><span class="line">        result = ListNode(<span class="number">0</span>)</span><br><span class="line">        curr = result</span><br><span class="line">        total = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> l1 <span class="keyword">or</span> l2 <span class="keyword">or</span> total:</span><br><span class="line">            <span class="keyword">if</span> l1:</span><br><span class="line">                total += l1.val</span><br><span class="line">                l1 = l1.next</span><br><span class="line">            <span class="keyword">if</span> l2:</span><br><span class="line">                total += l2.val</span><br><span class="line">                l2 = l2.next</span><br><span class="line">            out = (total) % <span class="number">10</span></span><br><span class="line">            curr.next = ListNode(out)</span><br><span class="line">            curr = curr.next</span><br><span class="line">            </span><br><span class="line">            carry = total // <span class="number">10</span></span><br><span class="line">            total = carry</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> result.next</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">addTwoNumbers</span><span class="params">(self, l1: ListNode, l2: ListNode)</span> -&gt; ListNode:</span></span><br><span class="line">        <span class="comment"># check input</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> l1:</span><br><span class="line">            <span class="keyword">return</span> l2</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> l2: </span><br><span class="line">            <span class="keyword">return</span> l1</span><br><span class="line">        </span><br><span class="line">        dummy = ListNode(<span class="number">0</span>)</span><br><span class="line">        cur = dummy</span><br><span class="line">        carry = <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> l1 <span class="keyword">or</span> l2 :</span><br><span class="line">            <span class="keyword">if</span> l1:</span><br><span class="line">                carry += l1.val</span><br><span class="line">                l1 = l1.next</span><br><span class="line">            <span class="keyword">if</span> l2:</span><br><span class="line">                carry += l2.val</span><br><span class="line">                l2 = l2.next</span><br><span class="line">                </span><br><span class="line">            cur.next = ListNode(carry%<span class="number">10</span>)</span><br><span class="line">            cur = cur.next</span><br><span class="line">            carry //= <span class="number">10</span></span><br><span class="line">        <span class="keyword">return</span> dummy.next</span><br></pre></td></tr></table></figure>

<p>â€‹    </p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/10/01/LC/2019-10-01-LC-20%20Valid%20Parentheses/">LC/2019-10-01-LC-20 Valid Parentheses</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-10-01</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/LC/">LC</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/F/">F</a></span><div class="content"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isValid</span><span class="params">(self, s: str)</span> -&gt; bool:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> str:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        stack = []</span><br><span class="line">        lookup = &#123;<span class="string">'('</span>:<span class="string">')'</span>, <span class="string">'&#123;'</span>:<span class="string">'&#125;'</span>, <span class="string">'['</span>:<span class="string">']'</span>&#125;</span><br><span class="line">        <span class="keyword">for</span> c <span class="keyword">in</span> s: <span class="comment"># c: (,  s: ()[]&#123;&#125;</span></span><br><span class="line">            <span class="keyword">if</span> c <span class="keyword">in</span> lookup:</span><br><span class="line">                stack.append(c)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> stack :  <span class="comment"># len(stack) == 0, for "]" case</span></span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">                <span class="keyword">if</span> c != lookup[stack.pop()]:</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="comment"># return True  </span></span><br><span class="line">        <span class="keyword">return</span> len(stack) == <span class="number">0</span></span><br></pre></td></tr></table></figure>

</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/10/01/LC/2019-10-01-LC-26%20rm%20duplicated%20from%20sorted%20array/">LC/2019-10-01-LC-26 rm duplicated from sorted array</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-10-01</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/LC/">LC</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/F/">F</a></span><div class="content"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">removeDuplicates</span><span class="params">(self, nums: List[int])</span> -&gt; int:</span></span><br><span class="line">    curr = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> idx <span class="keyword">in</span> range(len(nums)):</span><br><span class="line">        <span class="comment"># if nums[curr] == nums[idx]:</span></span><br><span class="line">            <span class="comment"># curr += 1</span></span><br><span class="line">        <span class="comment"># else:</span></span><br><span class="line">        <span class="keyword">if</span> nums[curr] != nums[idx]:</span><br><span class="line">            curr += <span class="number">1</span></span><br><span class="line">            nums[curr] = nums[idx]</span><br><span class="line">            </span><br><span class="line">    nums = nums[:curr+<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">return</span> len(nums)</span><br></pre></td></tr></table></figure>


<p>â€‹                </p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7j67ec3ozj30qe0meq60.jpg" alt="image-20191002003507533"></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/09/30/LC/2019-09-30-DP-Review/">LC/2019-09-30-DP-Review</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-09-30</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/LC/">LC</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/LC-DP/">LC-DP</a></span><div class="content"><h3 id="Requirements"><a href="#Requirements" class="headerlink" title="Requirements"></a>Requirements</h3><h4 id="Optimal-substructures"><a href="#Optimal-substructures" class="headerlink" title="Optimal substructures"></a>Optimal substructures</h4><p>can be solved optimally by breaking it into sub-problems, recursively solved by optimal solutions</p>
<h4 id="Overlapping-subproblems"><a href="#Overlapping-subproblems" class="headerlink" title="Overlapping subproblems"></a>Overlapping subproblems</h4><p>Also, reduce time complexity, Exp-&gt;Polynomial</p>
<h4 id="No-affect-effect"><a href="#No-affect-effect" class="headerlink" title="No-affect effect"></a>No-affect effect</h4><h3 id="Top-down"><a href="#Top-down" class="headerlink" title="Top-down"></a>Top-down</h3><p>recursion with memorization</p>
<h3 id="Bottom-up"><a href="#Bottom-up" class="headerlink" title="Bottom-up"></a>Bottom-up</h3><p>DP</p>
<h3 id="Fibonacci-sequences"><a href="#Fibonacci-sequences" class="headerlink" title="Fibonacci sequences"></a>Fibonacci sequences</h3><p>Space complexity</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7htmrv95xj31f40lcnas.jpg" alt="image-20190930203432556"></p>
<p>Time complexity</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7httfazk1j31di0ju167.jpg" alt="image-20190930204058832"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7htucrs4pj31de0ka13s.jpg" alt="image-20190930204152060"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7hu1oj6auj31ac0ky12t.jpg" alt="image-20190930204854218"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7hu8bpp4lj31c40l6gv9.jpg" alt="image-20190930205518456"></p>
<h3 id="Complexity-Arrangement"><a href="#Complexity-Arrangement" class="headerlink" title="Complexity Arrangement"></a>Complexity Arrangement</h3><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7hujtc3e8j30t00e00yq.jpg" alt="image-20190930210619897"></p>
<p>ref: <a href="https://zxi.mytechroad.com/blog/dynamic-programming/leetcode-dp-summary/" target="_blank" rel="noopener">https://zxi.mytechroad.com/blog/dynamic-programming/leetcode-dp-summary/</a></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/09/30/LC/2019-09-30-LC%2070%20Climbing%20Stairs/">LC/2019-09-30-LC 70 Climbing Stairs</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-09-30</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/LC/">LC</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/LC-DP/">LC-DP</a></span><div class="content"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(n)</span>:</span></span><br><span class="line">	dp = [<span class="number">-1</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(n+<span class="number">1</span>)]</span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>, n+<span class="number">1</span>):</span><br><span class="line">		dp[i] = dp[i<span class="number">-1</span>] + dp[i<span class="number">-2</span>]</span><br><span class="line">	<span class="keyword">return</span> dp[n]</span><br></pre></td></tr></table></figure>

<p>O(n) , O(n)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(n)</span>:</span></span><br><span class="line">  dp1, dp2 = <span class="number">1</span>, <span class="number">1</span></span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>, n+<span class="number">1</span>):</span><br><span class="line">    dp2, dp1 = dp1 + dp2, dp2</span><br><span class="line">   <span class="keyword">return</span> dp2</span><br></pre></td></tr></table></figure>

<p>O(n) , O(1)</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/09/30/LC/2019-09-30-LC-790%20Domino&amp;Tromino%20Tiling/">LC/2019-09-30-LC-790 Domino&amp;Tromino Tiling</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-09-30</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/LC/">LC</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/LC-DP/">LC-DP</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/TODO/">TODO</a></span><div class="content"><p>Problem: 2x1 XX</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">numTilings</span><span class="params">(self, N)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type N: int</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">if</span> N &lt; <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        N += <span class="number">1</span></span><br><span class="line">        module = pow(<span class="number">10</span>, <span class="number">9</span>)+<span class="number">7</span>   </span><br><span class="line">        dp = [[<span class="number">0</span>, <span class="number">0</span>]*N <span class="keyword">for</span> _ <span class="keyword">in</span> range(N)]</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>], dp[<span class="number">1</span>][<span class="number">0</span>], dp[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>, N):</span><br><span class="line">            dp[i][<span class="number">0</span>] = dp[i<span class="number">-1</span>][<span class="number">0</span>] + dp[i<span class="number">-2</span>][<span class="number">0</span>] + dp[i<span class="number">-2</span>][<span class="number">1</span>]</span><br><span class="line">            dp[i][<span class="number">1</span>] = dp[i<span class="number">-1</span>][<span class="number">0</span>]*<span class="number">2</span> + dp[i<span class="number">-1</span>][<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">return</span> dp[N<span class="number">-1</span>][<span class="number">0</span>] % module</span><br></pre></td></tr></table></figure>

<p>Ref:</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7iv5nfkjdj31hl0u01ds.jpg" alt="image-20191001181252686"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7ivtlhge4j31580katgw.jpg" alt="image-20191001183553311"></p>
<p>Ref: <a href="https://www.jianshu.com/p/2104df9de5d5" target="_blank" rel="noopener">https://www.jianshu.com/p/2104df9de5d5</a></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/09/30/LC/2019-09-30-LC%2062&amp;63%20Unique%20Paths%20I%20&amp;%20%E2%85%A1/">LC/2019-09-30-LC 62&amp;63 Unique Paths I &amp; â…¡</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-09-30</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/LC/">LC</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/LC-DP/">LC-DP</a></span><div class="content"><p>1 state variables</p>
<p>2 init</p>
<table>
<thead>
<tr>
<th>1</th>
<th>1</th>
<th>1</th>
<th>1</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>ï¼’</td>
<td>ï¼“ï½â†“</td>
<td></td>
</tr>
<tr>
<td>1</td>
<td>ï¼“ï½Žâ†’</td>
<td>ï¼–n+m</td>
<td></td>
</tr>
<tr>
<td>1</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>3 equation<br>$$<br>[i][j] = [i-1][j] + [i][j-1]<br>$$<br>4 result</p>
<h3 id="LC-62"><a href="#LC-62" class="headerlink" title="LC 62."></a>LC 62.</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x, y)</span>:</span></span><br><span class="line">  dp = [[<span class="number">0</span>]*(x+<span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> range(y+<span class="number">1</span>)] <span class="comment">## take out of board into consideration as 0</span></span><br><span class="line">  dp[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">1</span></span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, y+<span class="number">1</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>, x+<span class="number">1</span>):</span><br><span class="line">      dp[i][j] = dp[i<span class="number">-1</span>][j] + dp[i][j<span class="number">-1</span>]</span><br><span class="line">  <span class="keyword">return</span> dp[y][x]</span><br></pre></td></tr></table></figure>



<h3 id="LC-63-w-Obstructions"><a href="#LC-63-w-Obstructions" class="headerlink" title="LC 63.ã€€w/ Obstructions"></a>LC 63.ã€€w/ Obstructions</h3><p>ä¹‹å‰èµ°çš„ï¼’ï¼¤åœ°åœ–æ˜¯æœ‰éšœç¤™ç‰©çš„</p>
<h4 id="Diff-at-Initialization"><a href="#Diff-at-Initialization" class="headerlink" title="Diff: at Initialization"></a>Diff: at Initialization</h4><table>
<thead>
<tr>
<th>1</th>
<th>1</th>
<th>0</th>
<th>0</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>0</td>
<td></td>
<td>0/1</td>
<td></td>
</tr>
<tr>
<td>0</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x, y)</span>:</span></span><br><span class="line">  dp = [[<span class="number">0</span>]*(x+<span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> range(y+<span class="number">1</span>)] <span class="comment">## take out of board into consideration as 0</span></span><br><span class="line">  dp[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">1</span></span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, y+<span class="number">1</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>, x+<span class="number">1</span>):</span><br><span class="line">      <span class="keyword">if</span> obstacle[i][j] != <span class="number">1</span>:ã€€<span class="comment">### MAIN diff!</span></span><br><span class="line">      	dp[i][j] = dp[i<span class="number">-1</span>][j] + dp[i][j<span class="number">-1</span>]</span><br><span class="line">  <span class="keyword">return</span> dp[y][x]</span><br></pre></td></tr></table></figure>



<p>Ref:</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7hwe6l5e7j30hc0em78r.jpg" alt="image-20190930221007253"></p>
<h3 id="DP-vs-è¨ˆåŠƒéžæ­¸-Memorization"><a href="#DP-vs-è¨ˆåŠƒéžæ­¸-Memorization" class="headerlink" title="DP vs è¨ˆåŠƒéžæ­¸(Memorization)"></a>DP vs è¨ˆåŠƒéžæ­¸(Memorization)</h3><p>Memorization omits loop of varaibles.</p>
<p>Ref:</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7hvqn3ekxj30w40fadn0.jpg" alt="image-20190930214729348"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7hvp6agvkj30x20fo464.jpg" alt="image-20190930214602150"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7hvplk9kmj30uq0cq78y.jpg" alt="image-20190930214630627"></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/09/25/FFmpeg/2019-09-25-ffmepg-cmd-3-I-frame-extraction/">FFmpeg/2019-09-25-ffmepg-cmd-3-I-frame-extraction</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-09-25</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/ffmpeg/">ffmpeg</a></span><div class="content"><h3 id="I-frame-extraction"><a href="#I-frame-extraction" class="headerlink" title="I-frame extraction"></a>I-frame extraction</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i vn_hflip.mp4 -vf select=<span class="string">'eq(pict_type\,I)'</span> -vsync 2 -s 1280*720 -f image2 keyframe-%03d.jpeg</span><br></pre></td></tr></table></figure>

<p>-vf:æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œï¼Œè¡¨ç¤ºè¿‡æ»¤å›¾å½¢çš„æè¿°ã€‚é€‰æ‹©è¿‡æ»¤å™¨selectä¼šé€‰æ‹©å¸§è¿›è¡Œè¾“å‡ºï¼špict_typeå’Œå¯¹åº”çš„ç±»åž‹:PICT_TYPE_I è¡¨ç¤ºæ˜¯Iå¸§ï¼Œå³å…³é”®å¸§ï¼›<br>-vsync 2:é˜»æ­¢æ¯ä¸ªå…³é”®å¸§äº§ç”Ÿå¤šä½™çš„æ‹·è´ï¼›<br>-f image2 name_%02d.jpeg:å°†è§†é¢‘å¸§å†™å…¥åˆ°å›¾ç‰‡ä¸­ï¼Œæ ·å¼çš„æ ¼å¼ä¸€èˆ¬æ˜¯: â€œ%dâ€ æˆ–è€… â€œ%0Ndâ€</p>
<h3 id="Index-of-I-frame"><a href="#Index-of-I-frame" class="headerlink" title="Index of I-frame"></a>Index of I-frame</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffprobe -i vn_hflip.mp4 -select_streams v -show_frames -show_entries frame=pict_type -of csv | grep -n I | cut -d <span class="string">':'</span> -f 1 &gt; frame_index.txt</span><br></pre></td></tr></table></figure>



<h3 id="Relates-the-twos"><a href="#Relates-the-twos" class="headerlink" title="Relates the twos"></a>Relates the twos</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ls -1 keyframe*.jpeg &gt; keyframe.txt</span><br><span class="line">paste frame_index.txt  keyframe.txt&gt; result.txt</span><br></pre></td></tr></table></figure>

<p>(joe_py36)<br>~/workspace/exp/FFmpeg_<br>â˜º  more result.txt<br>â˜º  more result.txt<br>1       keyframe-01.jpeg<br>3       keyframe-02.jpeg<br>16      keyframe-03.jpeg<br>25      keyframe-04.jpeg<br>30      keyframe-05.jpeg<br>46      keyframe-06.jpeg<br>55      keyframe-07.jpeg<br>59      keyframe-08.jpeg<br>70      keyframe-09.jpeg<br>83      keyframe-10.jpeg<br>100     keyframe-11.jpeg<br>116     keyframe-12.jpeg</p>
<h3 id="ç¿»è¯‘ffmpeg-allæ–‡æ¡£ï¼ˆ40ï¼‰ï¼Œå¤šåª’ä½“æ»¤é•œ"><a href="#ç¿»è¯‘ffmpeg-allæ–‡æ¡£ï¼ˆ40ï¼‰ï¼Œå¤šåª’ä½“æ»¤é•œ" class="headerlink" title="ç¿»è¯‘ffmpeg-allæ–‡æ¡£ï¼ˆ40ï¼‰ï¼Œå¤šåª’ä½“æ»¤é•œ"></a><a href="http://blog.chinaunix.net/uid-10062010-id-5137275.html" target="_blank" rel="noopener">ç¿»è¯‘ffmpeg-allæ–‡æ¡£ï¼ˆ40ï¼‰ï¼Œå¤šåª’ä½“æ»¤é•œ</a></h3><p><a href="http://blog.chinaunix.net/uid-10062010-id-5137275.html" target="_blank" rel="noopener">http://blog.chinaunix.net/uid-10062010-id-5137275.html</a></p>
<p>Ref: <a href="https://superuser.com/questions/885452/extracting-the-index-of-key-frames-from-a-video-using-ffmpeg" target="_blank" rel="noopener">https://superuser.com/questions/885452/extracting-the-index-of-key-frames-from-a-video-using-ffmpeg</a></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/09/11/OpenGL/2019-09-11-OpenGL%20-%20shader%202&amp;3&amp;4&amp;5/">OpenGL/2019-09-11-OpenGL - shader 2&amp;3&amp;4&amp;5</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-09-11</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/OpenGL/">OpenGL</a></span><div class="content"><h3 id=""><a href="#" class="headerlink" title=""></a></h3><h3 id="OpenGL-shader-2"><a href="#OpenGL-shader-2" class="headerlink" title="OpenGL - shader 2"></a>OpenGL - shader 2</h3><p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g7fb0l120zj312k0fdgzh.jpg" alt="image-20190928161919955"></p>
<p>![image-20190928162048236](/Users/joe/Library/Application Support/typora-user-images/image-20190928162048236.png)</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g7fb7mqsisj30qe097tgb.jpg" alt="image-20190928162610910"></p>
<h3 id="OpenGL-shader3"><a href="#OpenGL-shader3" class="headerlink" title="OpenGL - shader3"></a>OpenGL - shader3</h3><p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g7gev3sadrj30of0pqk4p.jpg" alt="image-20190929151757208"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g7gevyp1egj30ij0ojwj6.jpg" alt="image-20190929151855171"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g7gex435gtj30g60nan19.jpg" alt="image-20190929152001763"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g7gf2uiqehj30gw02g74y.jpg" alt="image-20190929152532403"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g7gfamm1epj30nx02tmy4.jpg" alt="image-20190929153106469"></p>
<h3 id="OpenGL-Shader4-FileStream"><a href="#OpenGL-Shader4-FileStream" class="headerlink" title="OpenGL - Shader4 FileStream"></a>OpenGL - Shader4 FileStream</h3><p>Disk - Sector &gt; Track</p>
<p>Sector as unit to return to memory, </p>
<h4 id="FileBuffer-for-CPU-to-handle"><a href="#FileBuffer-for-CPU-to-handle" class="headerlink" title="FileBuffer for CPU to handle"></a>FileBuffer for CPU to handle</h4><h4 id="StringBuffer-to-intepret-FileB"><a href="#StringBuffer-to-intepret-FileB" class="headerlink" title="StringBuffer to intepret FileB"></a>StringBuffer to intepret FileB</h4><h4 id="CPU-to-read-char"><a href="#CPU-to-read-char" class="headerlink" title="CPU to read char*"></a>CPU to read char*</h4><p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g7gfgkdj9dj30mo0diq78.jpg" alt="image-20190929153841303"></p>
<h3 id="Coding"><a href="#Coding" class="headerlink" title="Coding"></a>Coding</h3><p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g7gfkbettaj30h40fcdl2.jpg" alt="image-20190929154217227"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7q3asksbgj30me0m47gn.jpg" alt="image-20191008001345211"></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/09/11/OpenGL/2019-09-11-OpenGL%201/">OpenGL/2019-09-11-OpenGL 1</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-09-11</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/OpenGL/">OpenGL</a></span><div class="content"><h3 id="GLSL"><a href="#GLSL" class="headerlink" title="GLSL"></a>GLSL</h3><p>è®©ç¨‹å¼ç çŸ¥é“æ—¶é—´çš„æ¦‚å¿µ</p>
<p>CPUç”¨uniformåŽ»å¤„ç†æ—¶é—´æ¦‚å¿µ</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g7bvl5xl9cj30wm0jnds2.jpg" alt="image-20190925170858998"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g7bvmvkicgj30lu046abv.jpg" alt="image-20190925171031074"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g7bvx90nunj30l309k78m.jpg" alt="image-20190925172036044"></p>
<p>â†“</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g7bvy23gurj30m70ex0zf.jpg" alt="image-20190925172119986"></p>
<h3 id="Uniform"><a href="#Uniform" class="headerlink" title="Uniform"></a>Uniform</h3><p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g7bw7nkgf8j30nz045q6o.jpg" alt="image-20190925173034574"></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/09/11/OpenGL/2019-09-11-OpenGL-Triangle-EBO/">OpenGL/2019-09-11-OpenGL-Triangle-EBO</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-09-11</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/OpenGL/">OpenGL</a></span><div class="content"><h3 id="èƒŒé¢è¸¢é™¤"><a href="#èƒŒé¢è¸¢é™¤" class="headerlink" title="èƒŒé¢è¸¢é™¤"></a>èƒŒé¢è¸¢é™¤</h3><p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g7btwuvdvpj309r0223yz.jpg" alt="image-20190925161101020"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g7btx9xsrzj30y40jo7ak.jpg" alt="image-20190925161121840"></p>
<h3 id="EBO"><a href="#EBO" class="headerlink" title="EBO"></a>EBO</h3><p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g7bu6gox5dj30b104o75p.jpg" alt="image-20190925162013328"></p>
<p> GPUä¼šä¸€ç›´åVBOã€€context can only handle one VAO &amp; one VBO at the same time.</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g7bujn9557j30va0inajy.jpg" alt="image-20190925163255470"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g7bumora4sj30r009i449.jpg" alt="image-20190925163550327"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g7buqh4g25j30ov0fitg6.jpg" alt="image-20190925163929372"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g7bv0iuyicj30t90tn43f.jpg" alt="image-20190925164908733"></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/09/10/OpenGL/2019-09-10-OpenGL-3D-Triangle-VBO-VAO/">OpenGL/2019-09-10-OpenGL-3D-Triangle-VBO-VAO</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-09-10</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/OpenGL/">OpenGL</a></span><div class="content"><h3 id="3D-2D"><a href="#3D-2D" class="headerlink" title="3D 2D"></a>3D 2D</h3><p>All 3D space concepts in OpenGL.</p>
<p>3D coordinates (camera) â€“&gt; 2D plane â€“&gt; colored pixels.</p>
<p><strong><em>2Dåæ ‡å’Œåƒç´ ä¹Ÿæ˜¯ä¸åŒçš„ï¼Œ2Dåæ ‡ç²¾ç¡®è¡¨ç¤ºä¸€ä¸ªç‚¹åœ¨2Dç©ºé—´ä¸­çš„ä½ç½®ï¼Œè€Œ2Dåƒç´ æ˜¯è¿™ä¸ªç‚¹çš„è¿‘ä¼¼å€¼ï¼Œ2Dåƒç´ å—åˆ°ä½ çš„å±å¹•/çª—å£åˆ†è¾¨çŽ‡çš„é™åˆ¶ã€‚</em></strong></p>
<h3 id="Shader"><a href="#Shader" class="headerlink" title="Shader"></a>Shader</h3><p>â€“ program that GPU runs</p>
<p>æœ‰äº›ç€è‰²å™¨å…è®¸å¼€å‘è€…è‡ªå·±é…ç½®ï¼Œè¿™å°±å…è®¸æˆ‘ä»¬ç”¨è‡ªå·±å†™çš„ç€è‰²å™¨æ¥æ›¿æ¢é»˜è®¤çš„ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ›´ç»†è‡´åœ°æŽ§åˆ¶å›¾å½¢æ¸²æŸ“ç®¡çº¿ä¸­çš„ç‰¹å®šéƒ¨åˆ†äº†ï¼Œè€Œä¸”å› ä¸ºå®ƒä»¬è¿è¡Œåœ¨GPUä¸Šï¼Œæ‰€ä»¥å®ƒä»¬å¯ä»¥ç»™æˆ‘ä»¬èŠ‚çº¦å®è´µçš„CPUæ—¶é—´ã€‚OpenGLç€è‰²å™¨æ˜¯ç”¨OpenGLç€è‰²å™¨è¯­è¨€(OpenGL Shading Language, GLSL)å†™æˆçš„ï¼Œåœ¨ä¸‹ä¸€èŠ‚ä¸­æˆ‘ä»¬å†èŠ±æ›´å¤šæ—¶é—´ç ”ç©¶å®ƒã€‚</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g72v7ypj0gj30uk0ian1n.jpg" alt="image-20190917220604821"></p>
<p>CPU â€“&gt; GPU</p>
<p>å¿…ç”¨çš„ ï¼šVertex Shader, Fragment Shader</p>
<h4 id="Geometry-Shader"><a href="#Geometry-Shader" class="headerlink" title="Geometry Shader"></a>Geometry Shader</h4><p>å¯ä»¥å·è£œæ’é»ž</p>
<h4 id="Vertex"><a href="#Vertex" class="headerlink" title="Vertex"></a>Vertex</h4><p>æˆ‘ä»¬ä»¥æ•°ç»„çš„å½¢å¼ä¼ é€’3ä¸ª3Dåæ ‡ä½œä¸ºå›¾å½¢æ¸²æŸ“ç®¡çº¿çš„è¾“å…¥ï¼Œç”¨æ¥è¡¨ç¤ºä¸€ä¸ªä¸‰è§’å½¢ï¼Œè¿™ä¸ªæ•°ç»„å«åšé¡¶ç‚¹æ•°æ®(Vertex Data)ï¼›é¡¶ç‚¹æ•°æ®æ˜¯ä¸€ç³»åˆ—é¡¶ç‚¹çš„é›†åˆã€‚ä¸€ä¸ªé¡¶ç‚¹(Vertex)æ˜¯ä¸€ä¸ª3Dåæ ‡çš„æ•°æ®çš„é›†åˆã€‚è€Œé¡¶ç‚¹æ•°æ®æ˜¯ç”¨é¡¶ç‚¹å±žæ€§(Vertex Attribute)è¡¨ç¤ºçš„ï¼Œå®ƒå¯ä»¥åŒ…å«ä»»ä½•æˆ‘ä»¬æƒ³ç”¨çš„æ•°æ®ï¼Œä½†æ˜¯ç®€å•èµ·è§ï¼Œæˆ‘ä»¬è¿˜æ˜¯å‡å®šæ¯ä¸ªé¡¶ç‚¹åªç”±ä¸€ä¸ª3Dä½ç½®å’Œä¸€äº›é¢œè‰²å€¼ã€UVç»„æˆã€‚</p>
<p><strong><em>ä¸ºäº†è®©OpenGLçŸ¥é“æˆ‘ä»¬çš„åæ ‡å’Œé¢œè‰²å€¼æž„æˆçš„åˆ°åº•æ˜¯ä»€ä¹ˆï¼ŒOpenGLéœ€è¦ä½ åŽ»æŒ‡å®šè¿™äº›æ•°æ®æ‰€è¡¨ç¤ºçš„æ¸²æŸ“ç±»åž‹ã€‚æˆ‘ä»¬æ˜¯å¸Œæœ›æŠŠè¿™äº›æ•°æ®æ¸²æŸ“æˆä¸€ç³»åˆ—çš„ç‚¹ï¼Ÿä¸€ç³»åˆ—çš„ä¸‰è§’å½¢ï¼Ÿè¿˜æ˜¯ä»…ä»…æ˜¯ä¸€ä¸ªé•¿é•¿çš„çº¿ï¼Ÿåšå‡ºçš„è¿™äº›æç¤ºå«åšå›¾å…ƒ(Primitive)ï¼Œä»»ä½•ä¸€ä¸ªç»˜åˆ¶æŒ‡ä»¤çš„è°ƒç”¨éƒ½å°†æŠŠå›¾å…ƒä¼ é€’ç»™OpenGLã€‚è¿™æ˜¯å…¶ä¸­çš„å‡ ä¸ªï¼šGL_POINTSã€GL_TRIANGLESã€GL_LINE_STRIPã€‚</em></strong></p>
<h3 id="â€”â€”â€”"><a href="#â€”â€”â€”" class="headerlink" title="â€”â€”â€”"></a>â€”â€”â€”</h3><p>VertexShader -&gt; Rasterization -&gt; FragmentShader</p>
<h3 id="Normalized-Device-Coordinates-NDC"><a href="#Normalized-Device-Coordinates-NDC" class="headerlink" title="Normalized Device Coordinates (NDC)"></a>Normalized Device Coordinates (NDC)</h3><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g74lnj2v91j30wq0i0dv3.jpg" alt="image-20190919100557092"></p>
<h3 id="Vertex-Data"><a href="#Vertex-Data" class="headerlink" title="Vertex Data"></a>Vertex Data</h3><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g74m3bcwprj30uq0f4gss.jpg" alt="image-20190919102118610"></p>
<p>f: means æ³•å‘é‡</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g74m6drrucj31b30u0wyu.jpg" alt="image-20190919102416139">   (in Blender)</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g74m5tdw1hj30xi0j2jzt.jpg" alt="image-20190919102343448"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g74m7xnz39j31c40q4dp7.jpg" alt="image-20190919102545255"></p>
<p>ä¸‰è§’åŒ–</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g74m927ogwj30kk0diwfb.jpg" alt="image-20190919102640344"></p>
<h3 id="VBO-amp-VAO"><a href="#VBO-amp-VAO" class="headerlink" title="VBO &amp; VAO"></a>VBO &amp; VAO</h3><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g74v9xvqztj30x60hedpb.jpg" alt="image-20190919153900923"></p>
<h3 id="UV"><a href="#UV" class="headerlink" title="UV"></a>UV</h3><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g74vebr40mj30h80c2447.jpg" alt="image-20190919154317764"></p>
<h3 id="â€”â€”â€”â€“"><a href="#â€”â€”â€”â€“" class="headerlink" title="â€”â€”â€”â€“"></a>â€”â€”â€”â€“</h3><h3 id="EBO"><a href="#EBO" class="headerlink" title="EBO"></a>EBO</h3><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g74vtx1bshj30w60i4mzf.jpg" alt="image-20190919155433545"></p>
<h3 id="VAO"><a href="#VAO" class="headerlink" title="VAO"></a>VAO</h3><p>ä¸€å€‹ç‰©ä»¶ä¸€å€‹VAO</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> VAO;</span><br><span class="line">glGenVertexArrays(<span class="number">1</span>, &amp;VAO);</span><br><span class="line"></span><br><span class="line">--------P.S.--------------------</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> VAO[<span class="number">10</span>]; <span class="comment">//  ä¸€æ¬¡å¯é€ å¤šå€‹ array</span></span><br><span class="line">glGenVertexArrays(<span class="number">10</span>, VAO);</span><br><span class="line">--------P.S.--------------------</span><br><span class="line">  </span><br><span class="line">glBindVertexArray(VAO);</span><br><span class="line"></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> VBO;</span><br><span class="line">glBindBuffer(GL_ARRAY_BUFFER, VBO);</span><br><span class="line">glBufferData(GL_ARRAY_BUFFER, <span class="keyword">sizeof</span>(vertices), vertices, GL_STATIC_DRAW);</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g74wk2zb4dj30i304j41v.jpg" alt="image-20190919162325003"></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/09/06/CV%20notes/2019-09-06-Face-Keypoint-Detection/">CV notes/2019-09-06-Face-Keypoint-Detection</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-09-06</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Deep-Learning/">Deep-Learning</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Deep-Learning/AI/">AI</a></span><div class="content"><p>Ref from: <a href="https://niuyuanyuanna.github.io/2018/11/08/computer_version/face-keypoint-detection/" target="_blank" rel="noopener">https://niuyuanyuanna.github.io/2018/11/08/computer_version/face-keypoint-detection/</a></p>
<h1 id="äººè„¸å…³é”®ç‚¹æ£€æµ‹"><a href="#äººè„¸å…³é”®ç‚¹æ£€æµ‹" class="headerlink" title="äººè„¸å…³é”®ç‚¹æ£€æµ‹"></a>äººè„¸å…³é”®ç‚¹æ£€æµ‹</h1><p>å…³äºŽäººè„¸è¯†åˆ«å’Œè¡¨æƒ…åˆ†ç±»çš„ä¸€äº›<a href="https://zhuanlan.zhihu.com/p/31638581" target="_blank" rel="noopener">è®ºæ–‡</a></p>
<h2 id="äººè„¸å…³é”®ç‚¹æ£€æµ‹ä»‹ç»"><a href="#äººè„¸å…³é”®ç‚¹æ£€æµ‹ä»‹ç»" class="headerlink" title="äººè„¸å…³é”®ç‚¹æ£€æµ‹ä»‹ç»"></a>äººè„¸å…³é”®ç‚¹æ£€æµ‹ä»‹ç»</h2><p>äººè„¸å…³é”®ç‚¹æ£€æµ‹ä¹Ÿç§°ä¸ºäººè„¸å…³é”®ç‚¹æ£€æµ‹ã€å®šä½æˆ–è€…äººè„¸å¯¹é½ï¼Œæ˜¯æŒ‡ç»™å®šäººè„¸å›¾åƒï¼Œå®šä½å‡ºäººè„¸é¢éƒ¨çš„å…³é”®åŒºåŸŸä½ç½®ï¼ŒåŒ…æ‹¬çœ‰æ¯›ã€çœ¼ç›ã€é¼»å­ã€å˜´å·´ã€è„¸éƒ¨è½®å»“ç­‰ã€‚</p>
<p>å…³é”®ç‚¹çš„é›†åˆç§°ä½œå½¢çŠ¶(shape)ï¼Œå½¢çŠ¶åŒ…å«äº†å…³é”®ç‚¹çš„ä½ç½®ä¿¡æ¯ï¼Œè€Œè¿™ä¸ªä½ç½®ä¿¡æ¯ä¸€èˆ¬å¯ä»¥ç”¨ä¸¤ç§å½¢å¼è¡¨ç¤ºï¼Œç¬¬ä¸€ç§æ˜¯å…³é”®ç‚¹çš„ä½ç½®ç›¸å¯¹äºŽæ•´å¼ å›¾åƒï¼Œç¬¬äºŒç§æ˜¯å…³é”®ç‚¹çš„ä½ç½®ç›¸å¯¹äºŽäººè„¸æ¡†(æ ‡è¯†å‡ºäººè„¸åœ¨æ•´ä¸ªå›¾åƒä¸­çš„ä½ç½®)ã€‚æŠŠç¬¬ä¸€ç§å½¢çŠ¶ç§°ä½œç»å¯¹å½¢çŠ¶ï¼Œå®ƒçš„å–å€¼ä¸€èˆ¬ä»‹äºŽ [0âˆ¼h][0âˆ¼h]æˆ–[0âˆ¼w][0âˆ¼w]ï¼Œç¬¬äºŒç§å½¢çŠ¶æˆ‘ä»¬ç§°ä½œç›¸å¯¹å½¢çŠ¶ï¼Œå®ƒçš„å–å€¼ä¸€èˆ¬ä»‹äºŽ 0 åˆ° 1ã€‚è¿™ä¸¤ç§å½¢çŠ¶å¯ä»¥é€šè¿‡äººè„¸æ¡†è½¬æ¢ã€‚</p>
<h3 id="åˆ†ç±»"><a href="#åˆ†ç±»" class="headerlink" title="åˆ†ç±»"></a>åˆ†ç±»</h3><p>äººè„¸å…³é”®ç‚¹æ£€æµ‹åˆ†ä¸ºä¸‰ç§ï¼š</p>
<ul>
<li>åŸºäºŽASM(Active Shape Model)å’ŒAAM (Active Appearnce Model) çš„ä¼ ç»Ÿæ–¹æ³•ã€å‚æ•°åŒ–æ–¹æ³•</li>
<li>åŸºäºŽCSR(Cascaded Shape Regression)çš„æ–¹æ³•ã€éžå‚æ•°åŒ–æ–¹æ³•</li>
<li>åŸºäºŽæ·±åº¦å­¦ä¹ ã€éžå‚æ•°åŒ–æ–¹æ³•</li>
</ul>
<p>åŸºäºŽå‚æ•°åŒ–å½¢çŠ¶æ¨¡åž‹çš„æ–¹æ³•å¯ä¾æ®å…¶å¤–è§‚æ¨¡åž‹çš„ä¸åŒï¼Œå¯è¿›ä¸€æ­¥åˆ†ä¸ºï¼ŒåŸºäºŽå±€éƒ¨çš„æ–¹æ³•å’ŒåŸºäºŽå…¨å±€çš„æ–¹æ³•ï¼›å¯¹äºŽéžå‚æ•°åŒ–è¿›ä¸€æ­¥å¯åˆ†ä¸ºåŸºäºŽæ ·ä¾‹çš„æ–¹æ³•ã€åŸºäºŽå›¾æ¨¡åž‹çš„æ–¹æ³•ã€åŸºäºŽçº§è”å›žå½’çš„æ–¹æ³•å’ŒåŸºäºŽæ·±åº¦å­¦ä¹ çš„æ–¹æ³•ã€‚</p>
<h3 id="äººè„¸å…³é”®ç‚¹è¯„ä»·æ ‡å‡†"><a href="#äººè„¸å…³é”®ç‚¹è¯„ä»·æ ‡å‡†" class="headerlink" title="äººè„¸å…³é”®ç‚¹è¯„ä»·æ ‡å‡†"></a>äººè„¸å…³é”®ç‚¹è¯„ä»·æ ‡å‡†</h3><p>ç›®å‰ä¸»è¦çš„è¡¡é‡æ ‡å‡†æ˜¯ç®—æ³•æ‰€èŽ·å–çš„å…³é”®ç‚¹ä½ç½®ä¸ŽçœŸå®žå…³é”®ç‚¹ä½ç½®ä¹‹é—´çš„åå·®ã€‚åœ¨è¯„ä»·åå·®æ—¶ï¼Œç”±äºŽä¸åŒäººè„¸å›¾åƒçš„å®žé™…å¤§å°éš¾å…ä¼šæœ‰æ‰€å·®å¼‚ï¼Œä¸ºä¾¿äºŽåœ¨åŒæ ·çš„å°ºåº¦ä¸‹æ¯”è¾ƒç®—æ³•æ€§èƒ½ï¼Œéœ€è¦é‡‡ç”¨ä¸€å®šçš„æ•°æ®å½’ä¸€åŒ–ç­–ç•¥ã€‚ ç›®å‰ä¸»æµçš„æ–¹æ³•æ˜¯åŸºäºŽä¸¤çœ¼é—´çš„è·ç¦»è¿›è¡Œäººè„¸å¤§å°çš„æ ‡å‡†åŒ–ï¼š<br>$$<br>ex=âˆ£âˆ£x^âˆ’xGTâˆ£âˆ£DIODex=DIODâˆ£âˆ£x^âˆ’xGTâˆ£âˆ£<br>$$<br>å…¶ä¸­åˆ†å­DIODDIODè¡¨ç¤ºä¼°è®¡å€¼ä¸ŽçœŸå®žå€¼çš„æ¬§å¼è·ç¦»ï¼Œåˆ†æ¯âˆ£âˆ£x^âˆ’xGTâˆ£âˆ£âˆ£âˆ£x^âˆ’xGTâˆ£âˆ£è¡¨ç¤ºåŒçœ¼è·ç¦»ï¼Œå³ä¸¤çœ¼ä¸­å¿ƒçš„æ¬§å¼è·ç¦»ã€‚ä¹Ÿæœ‰é‡‡ç”¨è¾¹ç•Œæ¡†å¯¹è§’çº¿ä½œä¸ºå½’ä¸€åŒ–å› å­æ¥è¯„ä»·åå·®ã€‚</p>
<h3 id="äººè„¸å¸¸ç”¨æ•°æ®åº“"><a href="#äººè„¸å¸¸ç”¨æ•°æ®åº“" class="headerlink" title="äººè„¸å¸¸ç”¨æ•°æ®åº“"></a>äººè„¸å¸¸ç”¨æ•°æ®åº“</h3><p>æ•°æ®åº“å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼šä¸»åŠ¨å¼æ•èŽ·çš„æ•°æ®å’Œè¢«åŠ¨å¼æ•èŽ·çš„æ•°æ®ã€‚ä¸»åŠ¨å¼æ•èŽ·çš„æ•°æ®æ˜¯åœ¨å®žéªŒå®¤é‡Œï¼Œå¯¹å…‰ç…§å˜åŒ–ã€é®æŒ¡ã€å¤´éƒ¨å§¿æ€å’Œé¢éƒ¨è¡¨æƒ…å¯æŽ§çš„æƒ…å†µä¸‹ï¼Œå¯¹å›ºå®šäººå‘˜è¿›è¡Œç…§ç‰‡é‡‡é›†ã€‚è¢«åŠ¨å¼æ•èŽ·çš„æ•°æ®åˆ™æ˜¯åœ¨ç¤¾äº¤ç½‘ç«™ç­‰ä¸€äº›çŽ¯å¢ƒä¸å¯æŽ§çš„æ¡ä»¶ä¸‹é‡‡é›†è€Œå¾—ã€‚</p>
<ul>
<li>ä¸»åŠ¨å¼æ•°æ®</li>
</ul>
<ol>
<li>CMU Multi-PIEï¼šåœ¨2004å¹´10æœˆè‡³2005å¹´3æœˆçš„å››æ¬¡ä¼šè®®ä¸­æ”¶é›†çš„ï¼Œæ”¯æŒåœ¨å§¿æ€ã€å…‰ç…§å’Œè¡¨æƒ…å˜åŒ–æ¡ä»¶ä¸‹è¯†åˆ«äººè„¸çš„ç®—æ³•çš„å¼€å‘ã€‚ è¯¥æ•°æ®åº“åŒ…å«337ä¸ªä¸»é¢˜å’Œè¶…è¿‡750,000ä¸ª305GBæ•°æ®çš„å›¾åƒã€‚ å…±è®°å½•äº†å…­ç§ä¸åŒçš„è¡¨æƒ…ï¼šä¸­æ€§ï¼Œå¾®ç¬‘ï¼ŒæƒŠå¥‡ï¼Œæ–œè§†ï¼ŒåŽŒæ¶å’Œå°–å«ã€‚ åœ¨15ä¸ªè§†å›¾å’Œ19ä¸ªä¸åŒç…§æ˜Žæ¡ä»¶ä¸‹è®°å½•å—è¯•è€…ï¼Œè¿™ä¸ªæ•°æ®åº“çš„ä¸€ä¸ªå­é›†è¢«æ ‡è®°ä¸º68ç‚¹æˆ–39ç‚¹ã€‚</li>
<li>XM2VTSï¼šæ”¶é›†äº†295äººçš„2360ä¸ªå½©è‰²å›¾åƒï¼Œå£°éŸ³æ–‡ä»¶å’Œ3Däººè„¸æ¨¡åž‹ï¼Œè¿™2360ä¸ªå½©è‰²å›¾åƒæ ‡æœ‰68ä¸ªå…³é”®ç‚¹ã€‚</li>
<li>ARï¼šåŒ…å«è¶…è¿‡4000ä¸ªå½©è‰²å›¾åƒï¼Œå¯¹åº”126äººï¼ˆ70åç”·æ€§å’Œ56åå¥³æ€§ï¼‰çš„è„¸éƒ¨ã€‚å›¾åƒæ˜¯åœ¨å¯æŽ§çš„æ¡ä»¶ä¸‹ï¼Œä»¥ä¸åŒçš„é¢éƒ¨è¡¨æƒ…ï¼Œå…‰ç…§æ¡ä»¶å’Œé®æŒ¡ï¼ˆå¤ªé˜³é•œå’Œå›´å·¾ï¼‰æ‹æ‘„çš„ã€‚Ding and Martinezæ‰‹åŠ¨ä¸ºæ¯å¼ è„¸éƒ¨å›¾åƒæ ‡æ³¨äº†130ä¸ªå…³é”®ç‚¹ã€‚</li>
<li>IMMï¼šåŒ…å«240å¼ 40ä¸ªäººçš„å½©è‰²å›¾åƒï¼ˆ7åå¥³æ€§å’Œ33åç”·æ€§ï¼‰ã€‚ æ¯å¼ å›¾åƒéƒ½å¯¹çœ‰æ¯›ã€çœ¼ç›ã€é¼»å­ã€å˜´å·´å’Œä¸‹å·´è¿›è¡Œæ ‡æ³¨ï¼Œå…±è®¡58ä¸ªæ ‡è®°ç‚¹ã€‚</li>
<li>MUCTï¼šç”±276ä¸ªäººçš„3755å¼ å›¾åƒç»„æˆï¼Œæ¯å¼ å›¾åƒæœ‰76ä¸ªå…³é”®ç‚¹ã€‚ è¿™ä¸ªæ•°æ®åº“ä¸­çš„é¢å­”åœ¨ä¸åŒçš„å…‰ç…§ã€ä¸åŒçš„å¹´é¾„å’Œä¸åŒçš„ç§æ—çš„æ¡ä»¶ä¸‹æ‹æ‘„ã€‚</li>
<li>PUTï¼šé‡‡é›†äº†éƒ¨åˆ†å…‰ç…§æ¡ä»¶å¯æŽ§çš„100ä¸ªäººï¼Œä¸”æ²¿ç€ä¿¯ä»°è§’å’Œåèˆªè§’æ—‹è½¬çš„9971å¼ é«˜åˆ†è¾¨çŽ‡å›¾åƒï¼ˆ2048Ã—1536ï¼‰ï¼Œæ¯å¼ å›¾åƒéƒ½æ ‡æœ‰30ä¸ªå…³é”®ç‚¹ã€‚</li>
</ol>
<ul>
<li>è¢«åŠ¨å¼æ•°æ®</li>
</ul>
<ol>
<li>BioIDï¼šè®°å½•åœ¨å®¤å†…å®žéªŒå®¤çŽ¯å¢ƒä¸­ï¼Œä½†ä½¿ç”¨â€œçœŸå®žä¸–ç•Œâ€çš„æ¡ä»¶ã€‚ è¯¥æ•°æ®åº“åŒ…å«23ä¸ªä¸»é¢˜çš„1521ä¸ªç°åº¦äººè„¸å›¾åƒï¼Œæ¯å¼ å›¾åƒæ ‡è®°20ä¸ªå…³é”®ç‚¹ã€‚</li>
<li>LFWï¼šåŒ…å«ä»Žç½‘ä¸Šæ”¶é›†çš„5724ä¸ªäººçš„13,233å¹…é¢éƒ¨å›¾åƒï¼Œå…¶ä¸­1680äººåœ¨æ•°æ®é›†ä¸­æœ‰ä¸¤å¼ æˆ–æ›´å¤šçš„ç…§ç‰‡ã€‚è™½ç„¶ï¼Œè¿™ä¸ªæ•°æ®åº“æ²¡æœ‰æä¾›æ ‡è®°ç‚¹ï¼Œä½†å¯ä»¥ä»Žå…¶ä½™ç½‘ç«™ä¸ŠèŽ·å–ã€‚</li>
<li>AFLW(Annotated Facial Landmarks in the Wild) ï¼šæ˜¯ä¸€ä¸ªå¤§è§„æ¨¡ã€å¤šè§†è§’å’ŒçœŸå®žçŽ¯å¢ƒä¸‹çš„äººè„¸æ•°æ®åº“ã€‚å›¾åƒæ˜¯ä»Žå›¾ç‰‡åˆ†äº«ç½‘ç«™Flickrä¸Šæ”¶é›†ï¼Œè¯¥æ•°æ®åº“å…±åŒ…å«25,993å¼ å›¾åƒï¼Œæ¯å¼ å›¾åƒæ ‡æœ‰21ä¸ªå…³é”®ç‚¹ã€‚</li>
<li>LFPW(Labeled Face Parts in the Wild)ï¼šç”±1400ä¸ªé¢éƒ¨å›¾åƒï¼ˆ1100ä½œä¸ºè®­ç»ƒé›†ï¼Œå…¶ä»–300ä¸ªå›¾åƒä½œä¸ºæµ‹è¯•é›†ï¼‰ç»„æˆã€‚æ‰€æœ‰æ•°æ®å‡ä»Žgoogle, Flickrå’ŒYahooä¸ŠèŽ·å–ï¼Œæ¯å¼ å›¾åƒæ ‡è®°35ä¸ªå…³é”®ç‚¹ï¼Œä½†åœ¨æ–‡çŒ®ä¸­ï¼Œé€šå¸¸é‡‡ç”¨29ä¸ªå…³é”®ç‚¹ã€‚</li>
<li>AFW(Annotated Faces in the Wild)ï¼šåŒ…å«205ä¸ªå›¾åƒï¼Œç‰¹ç‚¹æ˜¯ï¼šèƒŒæ™¯é«˜åº¦æ··ä¹±ï¼Œäººè„¸æ¯”ä¾‹å’Œå§¿åŠ¿éƒ½æœ‰å¾ˆå¤§çš„å˜åŒ–ï¼Œæ¯å¼ å›¾åƒå‡æœ‰6ä¸ªå…³é”®ç‚¹å’Œè¾¹ç•Œæ¡†ã€‚</li>
<li>300-W(300 Faces in-the-Wild Challenge)ï¼šä¸€ä¸ªæ··åˆæ•°æ®åº“ï¼Œç”±å¤šä¸ªå·²å‘å¸ƒæ•°æ®åº“ï¼ˆLFPWï¼ŒHelenï¼ŒAFWå’ŒXM2VTSï¼‰çš„é¢éƒ¨å›¾åƒå’Œä¸€ä¸ªæ–°æ”¶é›†çš„æ•°æ®åº“IBUGç»„æˆã€‚ æ‰€æœ‰è¿™äº›å›¾åƒéƒ½é‡æ–°æ ‡æ³¨äº†68ä¸ªå…³é”®ç‚¹ã€‚</li>
</ol>
<h3 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h3><h4 id="ASMæ£€æµ‹æ–¹æ³•"><a href="#ASMæ£€æµ‹æ–¹æ³•" class="headerlink" title="ASMæ£€æµ‹æ–¹æ³•"></a>ASMæ£€æµ‹æ–¹æ³•</h4><p>ASM(Active Shape Model)æ˜¯ç”±CootesäºŽ1995å¹´æå‡ºçš„ç»å…¸çš„äººè„¸å…³é”®ç‚¹æ£€æµ‹ç®—æ³•ï¼Œä¸»åŠ¨å½¢çŠ¶æ¨¡åž‹å³é€šè¿‡å½¢çŠ¶æ¨¡åž‹å¯¹ç›®æ ‡ç‰©ä½“è¿›è¡ŒæŠ½è±¡ï¼ŒASMæ˜¯ä¸€ç§åŸºäºŽç‚¹åˆ†å¸ƒæ¨¡åž‹ï¼ˆPoint Distribution Model, PDMï¼‰çš„ç®—æ³•ã€‚åœ¨PDMä¸­ï¼Œå¤–å½¢ç›¸ä¼¼çš„ç‰©ä½“ï¼Œä¾‹å¦‚äººè„¸ã€äººæ‰‹ã€å¿ƒè„ã€è‚ºéƒ¨ç­‰çš„å‡ ä½•å½¢çŠ¶å¯ä»¥é€šè¿‡è‹¥å¹²å…³é”®ç‚¹ï¼ˆlandmarksï¼‰çš„åæ ‡ä¾æ¬¡ä¸²è”å½¢æˆä¸€ä¸ªå½¢çŠ¶å‘é‡æ¥è¡¨ç¤ºã€‚ASMç®—æ³•éœ€è¦é€šè¿‡äººå·¥æ ‡å®šçš„æ–¹æ³•å…ˆæ ‡å®šè®­ç»ƒé›†ï¼Œç»è¿‡è®­ç»ƒèŽ·å¾—å½¢çŠ¶æ¨¡åž‹ï¼Œå†é€šè¿‡å…³é”®ç‚¹çš„åŒ¹é…å®žçŽ°ç‰¹å®šç‰©ä½“çš„åŒ¹é…ã€‚</p>
<p>å…¶æ£€æµ‹è¿‡ç¨‹ä¸»è¦åˆ†ä¸ºä¸¤æ­¥ï¼š</p>
<ul>
<li>è®­ç»ƒ<ul>
<li>å›¾åƒé¢„å¤„ç†ï¼š<ul>
<li>æœé›†nä¸ªè®­ç»ƒæ ·æœ¬ï¼ˆn=400ï¼‰ï¼Œ æ‰‹åŠ¨æ ‡è®°è„¸éƒ¨å…³é”®ç‚¹ï¼›</li>
<li>å°†è®­ç»ƒé›†ä¸­å…³é”®ç‚¹çš„åæ ‡ä¸²æˆç‰¹å¾å‘é‡</li>
<li>å¯¹å½¢çŠ¶è¿›è¡Œå½’ä¸€åŒ–å’Œå¯¹é½ï¼ˆå¯¹é½é‡‡ç”¨Procrustesæ–¹æ³•ï¼‰</li>
<li>å¯¹é½åŽçš„å½¢çŠ¶ç‰¹å¾åšPCAå¤„ç†</li>
</ul>
</li>
<li>ä¸ºå…³é”®ç‚¹æž„å»ºå±€éƒ¨ç‰¹å¾ï¼ˆåœ¨æ¯æ¬¡è¿­ä»£æœç´¢è¿‡ç¨‹ä¸­æ¯ä¸ªå…³é”®ç‚¹å¯ä»¥å¯»æ‰¾æ–°çš„ä½ç½®ï¼‰ï¼š<ul>
<li>å±€éƒ¨ç‰¹å¾ä¸€èˆ¬ç”¨æ¢¯åº¦ç‰¹å¾ï¼Œä»¥é˜²å…‰ç…§å˜åŒ–</li>
<li>æœ‰çš„æ–¹æ³•æ²¿ç€è¾¹ç¼˜çš„æ³•çº¿æ–¹å‘æå–ï¼Œæœ‰çš„æ–¹æ³•åœ¨å…³é”®ç‚¹é™„è¿‘çš„çŸ©å½¢åŒºåŸŸæå–</li>
</ul>
</li>
</ul>
</li>
<li>æœç´¢<ul>
<li>è®¡ç®—çœ¼ç›ï¼ˆæˆ–è€…çœ¼ç›å’Œå˜´å·´ï¼‰çš„ä½ç½®ï¼Œåšç®€å•çš„å°ºåº¦å’Œæ—‹è½¬å˜åŒ–ï¼Œå¯¹é½äººè„¸</li>
<li>åœ¨å¯¹é½åŽçš„å„ä¸ªç‚¹é™„è¿‘æœç´¢ï¼ŒåŒ¹é…æ¯ä¸ªå±€éƒ¨å…³é”®ç‚¹ï¼ˆå¸¸é‡‡ç”¨é©¬æ°è·ç¦»ï¼‰ï¼Œå¾—åˆ°åˆæ­¥å½¢çŠ¶</li>
<li>ç”¨å¹³å‡äººè„¸ï¼ˆå½¢çŠ¶æ¨¡åž‹ï¼‰ä¿®æ­£åŒ¹é…ç»“æžœ</li>
<li>è¿­ä»£ç›´åˆ°æ”¶æ•›</li>
</ul>
</li>
</ul>
<p>ä¼˜ç‚¹ï¼šæ¨¡åž‹ç®€å•ç›´æŽ¥ï¼Œæž¶æž„æ¸…æ™°æ˜Žç¡®ï¼Œæ˜“äºŽç†è§£å’Œåº”ç”¨ï¼Œè€Œä¸”å¯¹è½®å»“å½¢çŠ¶æœ‰ç€è¾ƒå¼ºçš„çº¦æŸ</p>
<p>ç¼ºç‚¹ï¼šå…¶è¿‘ä¼¼äºŽç©·ä¸¾æœç´¢çš„å…³é”®ç‚¹å®šä½æ–¹å¼åœ¨ä¸€å®šç¨‹åº¦ä¸Šé™åˆ¶äº†å…¶è¿ç®—æ•ˆçŽ‡</p>
<h4 id="AAM"><a href="#AAM" class="headerlink" title="AAM"></a>AAM</h4><p>AAMï¼ˆActive Appearance Modelsï¼‰ã€‚1998å¹´ï¼ŒCooteså¯¹ASMè¿›è¡Œæ”¹è¿›ï¼Œä¸ä»…é‡‡ç”¨å½¢çŠ¶çº¦æŸï¼Œè€Œä¸”åˆåŠ å…¥æ•´ä¸ªè„¸éƒ¨åŒºåŸŸçš„çº¹ç†ç‰¹å¾ï¼Œæå‡ºäº†AAMç®—æ³•[2]ã€‚AAMäºŽASMä¸€æ ·ï¼Œä¸»è¦åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œæ¨¡åž‹å»ºç«‹é˜¶æ®µå’Œæ¨¡åž‹åŒ¹é…é˜¶æ®µã€‚å…¶ä¸­æ¨¡åž‹å»ºç«‹é˜¶æ®µåŒ…æ‹¬å¯¹è®­ç»ƒæ ·æœ¬åˆ†åˆ«å»ºç«‹å½¢çŠ¶æ¨¡åž‹(Shape Model)å’Œçº¹ç†æ¨¡åž‹(Texture Model)ï¼Œç„¶åŽå°†ä¸¤ä¸ªæ¨¡åž‹è¿›è¡Œç»“åˆï¼Œå½¢æˆAAMæ¨¡åž‹ã€‚</p>
<h4 id="CPR"><a href="#CPR" class="headerlink" title="CPR"></a>CPR</h4><p>2010å¹´ï¼ŒDollaræå‡ºCPRï¼ˆCascaded Pose Regression, çº§è”å§¿åŠ¿å›žå½’ï¼‰ï¼ŒCPRé€šè¿‡ä¸€ç³»åˆ—å›žå½’å™¨å°†ä¸€ä¸ªæŒ‡å®šçš„åˆå§‹é¢„æµ‹å€¼é€æ­¥ç»†åŒ–ï¼Œæ¯ä¸€ä¸ªå›žå½’å™¨éƒ½ä¾é å‰ä¸€ä¸ªå›žå½’å™¨çš„è¾“å‡ºæ¥æ‰§è¡Œç®€å•çš„å›¾åƒæ“ä½œï¼Œæ•´ä¸ªç³»ç»Ÿå¯è‡ªåŠ¨çš„ä»Žè®­ç»ƒæ ·æœ¬ä¸­å­¦ä¹ ã€‚<br>äººè„¸å…³é”®ç‚¹æ£€æµ‹çš„ç›®çš„æ˜¯ä¼°è®¡å‘é‡</p>
<p>S=(x1,x2,â‹…â‹…â‹…,xk,â‹…â‹…â‹…,xK)âˆˆR2KS=(x1,x2,â‹…â‹…â‹…,xk,â‹…â‹…â‹…,xK)âˆˆR2K</p>
<p>å…¶ä¸­Kè¡¨ç¤ºå…³é”®ç‚¹çš„ä¸ªæ•°ï¼Œç”±äºŽæ¯ä¸ªå…³é”®ç‚¹æœ‰æ¨ªçºµä¸¤ä¸ªåæ ‡ï¼Œæ‰€ä»¥Sçš„é•¿åº¦ä¸º2Kã€‚CPRæ£€æµ‹ä¸€å…±æœ‰Tä¸ªé˜¶æ®µï¼Œåœ¨æ¯ä¸ªé˜¶æ®µä¸­é¦–å…ˆè¿›è¡Œç‰¹å¾æå–ï¼Œå¾—åˆ°</p>
<p>ft=Ï•(I,St)ft=Ï•(I,St)</p>
<p>è¿™é‡Œç‰¹å¾ä½¿ç”¨çš„æ˜¯shape-indexed featuresï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è¯¸å¦‚HOGã€SIFTç­‰äººå·¥è®¾è®¡çš„ç‰¹å¾ï¼Œæˆ–è€…å…¶ä»–å¯å­¦ä¹ ç‰¹å¾ï¼ˆlearning based featuresï¼‰ï¼Œç„¶åŽé€šè¿‡è®­ç»ƒå¾—åˆ°çš„å›žå½’å™¨rtrtæ¥ä¼°è®¡å¢žé‡Î”SÎ”S( update vector)</p>
<p>Î”S=rt(Ï•(I,St))Î”S=rt(Ï•(I,St))</p>
<p>æŠŠÎ”SÎ”SåŠ åˆ°å‰ä¸€ä¸ªé˜¶æ®µçš„SSä¸Šå¾—åˆ°æ–°çš„SSï¼Œè¿™æ ·é€šè¿‡ä¸æ–­çš„è¿­ä»£å³å¯ä»¥å¾—åˆ°æœ€ç»ˆçš„S(shape)ã€‚</p>
<p>St+1=St+Î”SSt+1=St+Î”S</p>
<h4 id="DCNN"><a href="#DCNN" class="headerlink" title="DCNN"></a>DCNN</h4><p>2013 å¹´ï¼ŒSun ç­‰äºº é¦–æ¬¡å°† CNN åº”ç”¨åˆ°äººè„¸å…³é”®ç‚¹æ£€æµ‹ï¼Œæå‡ºä¸€ç§çº§è”çš„ CNNï¼ˆæ‹¥æœ‰ä¸‰ä¸ªå±‚çº§ï¼‰â€”â€”DCNN(Deep Convolutional Network)ï¼Œæ­¤ç§æ–¹æ³•å±žäºŽçº§è”å›žå½’æ–¹æ³•ã€‚ä½œè€…é€šè¿‡ç²¾å¿ƒè®¾è®¡æ‹¥æœ‰ä¸‰ä¸ªå±‚çº§çš„çº§è”å·ç§¯ç¥žç»ç½‘ç»œï¼Œä¸ä»…æ”¹å–„åˆå§‹ä¸å½“å¯¼è‡´é™·å…¥å±€éƒ¨æœ€ä¼˜çš„é—®é¢˜ï¼Œè€Œä¸”å€ŸåŠ©äºŽ CNN å¼ºå¤§çš„ç‰¹å¾æå–èƒ½åŠ›ï¼ŒèŽ·å¾—æ›´ä¸ºç²¾å‡†çš„å…³é”®ç‚¹æ£€æµ‹ã€‚</p>
<p><a href="https://github.com/niuyuanyuanna/BlogImages/raw/master/computerVersion/06230452.png" target="_blank" rel="noopener"><img src="https://github.com/niuyuanyuanna/BlogImages/raw/master/computerVersion/06230452.png" alt="img"></a></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒDCNNç”±ä¸‰ä¸ªlevelæž„æˆã€‚level-1æ˜¯3ä¸ªCNNç½‘ç»œï¼›level-2æ˜¯10ä¸ªCNNå—æž„æˆï¼Œæ¯ä¸ªå…³é”®ç‚¹é‡‡ç”¨ä¸¤ä¸ªCNNï¼›level-3ç»“æž„ç±»ä¼¼äºŽlevel-2ï¼Œéƒ½ä¸º10ä¸ªCNNã€‚</p>
<p>Level-1çš„ä¸‰ä¸ªCNNåˆ†åˆ«ä¸º F1ï¼ˆFace 1ï¼‰ã€EN1ï¼ˆEyeï¼ŒNoseï¼‰ã€NM1ï¼ˆNoseï¼ŒMouthï¼‰ã€‚F1 è¾“å…¥å°ºå¯¸ä¸º 39<em>39ï¼Œè¾“å‡º 5 ä¸ªå…³é”®ç‚¹çš„åæ ‡ï¼›EN1 è¾“å…¥å°ºå¯¸ä¸º 39</em>31ï¼Œè¾“å‡ºæ˜¯ 3 ä¸ªå…³é”®ç‚¹çš„åæ ‡ï¼›NM11 è¾“å…¥å°ºå¯¸ä¸º 39*31ï¼Œè¾“å‡ºæ˜¯ 3 ä¸ªå…³é”®ç‚¹ï¼›Level-1 çš„è¾“å‡ºä¸ºä¸‰ä¸ª CNN è¾“å‡ºå–å¹³å‡ã€‚</p>
<p>Level-2ï¼Œç”± 10 ä¸ª CNN æž„æˆï¼Œè¾“å…¥å°ºå¯¸å‡ä¸º 15*15ï¼Œæ¯ä¸¤ä¸ªç»„æˆä¸€å¯¹ï¼Œä¸€å¯¹ CNN å¯¹ä¸€ä¸ªå…³é”®ç‚¹è¿›è¡Œé¢„æµ‹ï¼Œé¢„æµ‹ç»“æžœåŒæ ·æ˜¯é‡‡å–å¹³å‡ã€‚</p>
<p>Level-3 ä¸Ž Level-2 ä¸€æ ·ï¼Œç”± 10 ä¸ª CNN æž„æˆï¼Œè¾“å…¥å°ºå¯¸å‡ä¸º 15*15ï¼Œæ¯ä¸¤ä¸ªç»„æˆä¸€å¯¹ã€‚Level-2 å’Œ Level-3 æ˜¯å¯¹ Level-1 å¾—åˆ°çš„ç²—å®šä½è¿›è¡Œå¾®è°ƒï¼Œå¾—åˆ°ç²¾ç»†çš„å…³é”®ç‚¹å®šä½ã€‚</p>
<p>Level-1 ä¹‹æ‰€ä»¥æ¯” Level-2 å’Œ Level-3 çš„è¾“å…¥è¦å¤§ï¼Œæ˜¯å› ä¸ºä½œè€…è®¤ä¸ºï¼Œç”±äºŽäººè„¸æ£€æµ‹å™¨çš„åŽŸå› ï¼Œè¾¹ç•Œæ¡†çš„ç›¸å¯¹ä½ç½®å¯èƒ½ä¼šåœ¨å¤§èŒƒå›´å†…å˜åŒ–ï¼Œå†åŠ ä¸Šé¢éƒ¨å§¿æ€çš„å˜åŒ–ï¼Œæœ€ç»ˆå¯¼è‡´è¾“å…¥å›¾åƒçš„å¤šæ ·æ€§ï¼Œå› æ­¤åœ¨ Level-1 åº”è¯¥éœ€è¦æœ‰è¶³å¤Ÿå¤§çš„è¾“å…¥å°ºå¯¸ã€‚Level-1 ä¸Ž Level-2 å’Œ Level-3 è¿˜æœ‰ä¸€ç‚¹ä¸åŒä¹‹å¤„åœ¨äºŽï¼ŒLevel-1 é‡‡ç”¨çš„æ˜¯å±€éƒ¨æƒå€¼å…±äº«ï¼ˆLcally Sharing Weightsï¼‰ï¼Œä½œè€…è®¤ä¸ºä¼ ç»Ÿçš„å…¨å±€æƒå€¼å…±äº«æ˜¯è€ƒè™‘åˆ°ï¼ŒæŸä¸€ç‰¹å¾å¯èƒ½åœ¨å›¾åƒä¸­ä»»ä½•ä½ç½®å‡ºçŽ°ï¼Œæ‰€ä»¥é‡‡ç”¨å…¨å±€æƒå€¼å…±äº«ã€‚ç„¶è€Œï¼Œå¯¹äºŽç±»ä¼¼äººè„¸è¿™æ ·å…·æœ‰å›ºå®šç©ºé—´ç»“æž„çš„å›¾åƒè€Œè¨€ï¼Œå…¨å±€æƒå€¼å…±äº«å°±ä¸å¥æ•ˆäº†ã€‚å› ä¸ºçœ¼ç›å°±æ˜¯åœ¨ä¸Šé¢ï¼Œé¼»å­å°±æ˜¯åœ¨ä¸­é—´ï¼Œå˜´å·´å°±æ˜¯åœ¨ä¸‹é¢çš„ã€‚æ‰€ä»¥ä½œè€…é‡‡ç”¨å±€éƒ¨æƒå€¼å…±äº«ï¼Œé€šè¿‡å®žéªŒè¯æ˜Žäº†å±€éƒ¨æƒå€¼å…±äº«ç»™ç½‘ç»œå¸¦æ¥æ€§èƒ½æå‡ã€‚</p>
<p>DCNN é‡‡ç”¨çº§è”å›žå½’çš„æ€æƒ³ï¼Œä»Žç²—åˆ°ç²¾çš„é€æ­¥å¾—åˆ°ç²¾ç¡®çš„å…³é”®ç‚¹ä½ç½®ï¼Œä¸ä»…è®¾è®¡äº†ä¸‰çº§çº§è”çš„å·ç§¯ç¥žç»ç½‘ç»œï¼Œè¿˜å¼•å…¥å±€éƒ¨æƒå€¼å…±äº«æœºåˆ¶ï¼Œä»Žè€Œæå‡ç½‘ç»œçš„å®šä½æ€§èƒ½ã€‚æœ€ç»ˆåœ¨æ•°æ®é›† BioID å’Œ LFPW ä¸Šå‡èŽ·å¾—å½“æ—¶æœ€ä¼˜ç»“æžœã€‚é€Ÿåº¦æ–¹é¢ï¼Œé‡‡ç”¨ 3.3GHz çš„ CPUï¼Œæ¯ 0.12 ç§’æ£€æµ‹ä¸€å¼ å›¾ç‰‡çš„ 5 ä¸ªå…³é”®ç‚¹ã€‚</p>
<h4 id="Face-DCNN"><a href="#Face-DCNN" class="headerlink" title="Face++ DCNN"></a>Face++ DCNN</h4><p>2013 å¹´ï¼ŒFace++åœ¨ DCNN æ¨¡åž‹ä¸Šè¿›è¡Œæ”¹è¿›ï¼Œæå‡ºä»Žç²—åˆ°ç²¾çš„äººè„¸å…³é”®ç‚¹æ£€æµ‹ç®—æ³•ï¼Œå®žçŽ°äº† 68 ä¸ªäººè„¸å…³é”®ç‚¹çš„é«˜ç²¾åº¦å®šä½ã€‚è¯¥ç®—æ³•å°†äººè„¸å…³é”®ç‚¹åˆ†ä¸ºå†…éƒ¨å…³é”®ç‚¹å’Œè½®å»“å…³é”®ç‚¹ï¼Œå†…éƒ¨å…³é”®ç‚¹åŒ…å«çœ‰æ¯›ã€çœ¼ç›ã€é¼»å­ã€å˜´å·´å…±è®¡ 51 ä¸ªå…³é”®ç‚¹ï¼Œè½®å»“å…³é”®ç‚¹åŒ…å« 17 ä¸ªå…³é”®ç‚¹ã€‚</p>
<p>é’ˆå¯¹å†…éƒ¨å…³é”®ç‚¹å’Œå¤–éƒ¨å…³é”®ç‚¹ï¼Œè¯¥ç®—æ³•å¹¶è¡Œçš„é‡‡ç”¨ä¸¤ä¸ªçº§è”çš„ CNN è¿›è¡Œå…³é”®ç‚¹æ£€æµ‹ï¼Œç½‘ç»œç»“æž„å¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><a href="https://github.com/niuyuanyuanna/BlogImages/raw/master/computerVersion/92897228.jpg" target="_blank" rel="noopener"><img src="https://github.com/niuyuanyuanna/BlogImages/raw/master/computerVersion/92897228.jpg" alt="img"></a></p>
<p>é’ˆå¯¹å†…éƒ¨ 51 ä¸ªå…³é”®ç‚¹ï¼Œé‡‡ç”¨å››ä¸ªå±‚çº§çš„çº§è”ç½‘ç»œè¿›è¡Œæ£€æµ‹ã€‚å…¶ä¸­ï¼ŒLevel-1 ä¸»è¦ä½œç”¨æ˜¯èŽ·å¾—é¢éƒ¨å™¨å®˜çš„è¾¹ç•Œæ¡†ï¼›Level-2 çš„è¾“å‡ºæ˜¯ 51 ä¸ªå…³é”®ç‚¹é¢„æµ‹ä½ç½®ï¼Œè¿™é‡Œèµ·åˆ°ä¸€ä¸ªç²—å®šä½ä½œç”¨ï¼Œç›®çš„æ˜¯ä¸ºäº†ç»™ Level-3 è¿›è¡Œåˆå§‹åŒ–ï¼›Level-3 ä¼šä¾æ®ä¸åŒå™¨å®˜è¿›è¡Œä»Žç²—åˆ°ç²¾çš„å®šä½ï¼›Level-4 çš„è¾“å…¥æ˜¯å°† Level-3 çš„è¾“å‡ºè¿›è¡Œä¸€å®šçš„æ—‹è½¬ï¼Œæœ€ç»ˆå°† 51 ä¸ªå…³é”®ç‚¹çš„ä½ç½®è¿›è¡Œè¾“å‡ºã€‚é’ˆå¯¹å¤–éƒ¨ 17 ä¸ªå…³é”®ç‚¹ï¼Œä»…é‡‡ç”¨ä¸¤ä¸ªå±‚çº§çš„çº§è”ç½‘ç»œè¿›è¡Œæ£€æµ‹ã€‚Level-1 ä¸Žå†…éƒ¨å…³é”®ç‚¹æ£€æµ‹çš„ä½œç”¨ä¸€æ ·ï¼Œä¸»è¦æ˜¯èŽ·å¾—è½®å»“çš„ bounding boxï¼›Level-2 ç›´æŽ¥é¢„æµ‹ 17 ä¸ªå…³é”®ç‚¹ï¼Œæ²¡æœ‰ä»Žç²—åˆ°ç²¾å®šä½çš„è¿‡ç¨‹ï¼Œå› ä¸ºè½®å»“å…³é”®ç‚¹çš„åŒºåŸŸè¾ƒå¤§ï¼Œè‹¥åŠ ä¸Š Level-3 å’Œ Level-4ï¼Œä¼šæ¯”è¾ƒè€—æ—¶é—´ã€‚æœ€ç»ˆé¢éƒ¨ 68 ä¸ªå…³é”®ç‚¹ç”±ä¸¤ä¸ªçº§è” CNN çš„è¾“å‡ºè¿›è¡Œå åŠ å¾—åˆ°ã€‚</p>
<p>ç®—æ³•åˆ›æ–°ç‚¹ï¼š</p>
<ol>
<li>æŠŠäººè„¸çš„å…³é”®ç‚¹å®šä½é—®é¢˜ï¼Œåˆ’åˆ†ä¸ºå†…éƒ¨å…³é”®ç‚¹å’Œè½®å»“å…³é”®ç‚¹åˆ†å¼€é¢„æµ‹ï¼Œæœ‰æ•ˆçš„é¿å…äº† loss ä¸å‡è¡¡é—®é¢˜</li>
<li>åœ¨å†…éƒ¨å…³é”®ç‚¹æ£€æµ‹éƒ¨åˆ†ï¼Œå¹¶é‡‡ç”¨ DCNN çš„æ–¹æ³•ï¼Œå°†æ¯ä¸ªå…³é”®ç‚¹é‡‡ç”¨ä¸¤ä¸ª CNN è¿›è¡Œé¢„æµ‹ï¼Œè€Œæ˜¯æ¯ä¸ªå™¨å®˜é‡‡ç”¨ä¸€ä¸ª CNN è¿›è¡Œé¢„æµ‹ï¼Œä»Žè€Œå‡å°‘è®¡ç®—é‡</li>
<li>ç›¸æ¯”äºŽ DCNNï¼Œæ²¡æœ‰ç›´æŽ¥é‡‡ç”¨äººè„¸æ£€æµ‹å™¨è¿”å›žçš„ç»“æžœä½œä¸ºè¾“å…¥ï¼Œè€Œæ˜¯å¢žåŠ ä¸€ä¸ªè¾¹ç•Œæ¡†æ£€æµ‹å±‚ï¼ˆLevel-1ï¼‰ï¼Œå¯ä»¥å¤§å¤§æé«˜å…³é”®ç‚¹ç²—å®šä½ç½‘ç»œçš„ç²¾åº¦ã€‚</li>
</ol>
<h4 id="TCDNN"><a href="#TCDNN" class="headerlink" title="TCDNN"></a>TCDNN</h4><p>2014 å¹´ï¼ŒZhang ç­‰äººå°† MTLï¼ˆMulti-Task Learningï¼‰åº”ç”¨åˆ°äººè„¸å…³é”®ç‚¹æ£€æµ‹ä¸­ï¼Œæå‡º TCDCNï¼ˆTasks-Constrained Deep Convolutional Networkï¼‰ã€‚ä½œè€…è®¤ä¸ºï¼Œåœ¨è¿›è¡Œäººè„¸å…³é”®ç‚¹æ£€æµ‹ä»»åŠ¡æ—¶ï¼Œç»“åˆä¸€äº›è¾…åŠ©ä¿¡æ¯å¯ä»¥å¸®åŠ©æ›´å¥½çš„å®šä½å…³é”®ç‚¹ï¼Œè¿™äº›ä¿¡æ¯å¦‚ï¼Œæ€§åˆ«ã€æ˜¯å¦å¸¦çœ¼é•œã€æ˜¯å¦å¾®ç¬‘å’Œè„¸éƒ¨çš„å§¿åŠ¿ç­‰ç­‰ã€‚ä½œè€…å°†äººè„¸å…³é”®ç‚¹æ£€æµ‹ï¼ˆ5 ä¸ªå…³é”®ç‚¹ï¼‰ä¸Žæ€§åˆ«ã€æ˜¯å¦å¸¦çœ¼é•œã€æ˜¯å¦å¾®ç¬‘åŠè„¸éƒ¨çš„å§¿åŠ¿è¿™å››ä¸ªå­ä»»åŠ¡ç»“åˆèµ·æ¥æž„æˆä¸€ä¸ªå¤šä»»åŠ¡å­¦ä¹ æ¨¡åž‹ï¼Œæ¨¡åž‹æ¡†æž¶å¦‚å›¾æ‰€ç¤ºã€‚</p>
<p><a href="https://github.com/niuyuanyuanna/BlogImages/raw/master/computerVersion/15813947.jpg" target="_blank" rel="noopener"><img src="https://github.com/niuyuanyuanna/BlogImages/raw/master/computerVersion/15813947.jpg" alt="img"></a></p>
<p>ç½‘ç»œè¾“å…¥ä¸º40Ã—40çš„ç°åº¦å›¾ï¼Œé€šè¿‡CNNåŽå¾—åˆ°2Ã—2Ã—64çš„ç‰¹å¾å›¾ï¼Œå†é€šè¿‡ä¸€å±‚å«æœ‰100ä¸ªç¥žç»å…ƒçš„å…¨è¿žæŽ¥å±‚è¾“å‡ºæœ€ç»ˆæå–åˆ°çš„å…±äº«ç‰¹å¾ã€‚è¯¥ç‰¹å¾ä¸ºæ‰€æœ‰ä»»åŠ¡å…±äº«ï¼Œå¯¹äºŽå…³é”®ç‚¹æ£€æµ‹é—®é¢˜ï¼Œå°±é‡‡ç”¨çº¿æ€§å›žå½’æ¨¡åž‹ï¼›å¯¹äºŽåˆ†ç±»é—®é¢˜ï¼Œå°±é‡‡ç”¨é€»è¾‘å›žå½’ã€‚</p>
<p>åœ¨ä¼ ç»Ÿ MLT ä¸­ï¼Œå„ä»»åŠ¡é‡è¦ç¨‹åº¦æ˜¯ä¸€è‡´çš„ï¼Œå…¶ç›®æ ‡æ–¹ç¨‹å¦‚ä¸‹ï¼š</p>
<p>argâ¡minâ¡âˆ‘tâˆ’1Tâˆ‘i=1Nâ„“(yit,f(xit;wt))+Î¦(wt){wt}argmintâˆ’1âˆ‘Ti=1âˆ‘Nâ„“(yit,f(xit;wt))+Î¦(wt){wt}t=1T</p>
<p>å…¶ä¸­ï¼Œ</p>
<ul>
<li>f(xit;wt)f(xit;wt)è¡¨ç¤ºè¾“å…¥çŸ©é˜µxitxitä¸Žæƒå€¼çŸ©é˜µ$ \mathbf{w}^t$è¿ç®—åŽå¾—åˆ°çš„è¾“å‡º</li>
<li>â„“(.)â„“(.)è¡¨ç¤ºæŸå¤±å‡½æ•°</li>
<li>Î¦(wt)Î¦(wt)è¡¨ç¤ºæ­£åˆ™åŒ–</li>
</ul>
<p>å¯¹äºŽå„ä»»åŠ¡ t è€Œè¨€ï¼Œå…¶é‡è¦æ€§æ˜¯ç›¸åŒçš„ï¼Œä½†æ˜¯åœ¨å¤šä»»åŠ¡å­¦ä¹ ä¸­ï¼Œå¾€å¾€ä¸åŒä»»åŠ¡çš„å­¦ä¹ éš¾æ˜“ç¨‹åº¦ä¸åŒï¼Œè‹¥é‡‡ç”¨ç›¸åŒçš„æŸå¤±æƒé‡ï¼Œä¼šå¯¼è‡´å­¦ä¹ ä»»åŠ¡éš¾ä»¥æ”¶æ•›ã€‚æ–‡ç« é’ˆå¯¹å¤šä»»åŠ¡å­¦ä¹ ä¸­ï¼Œä¸åŒå­¦ä¹ éš¾åº¦é—®é¢˜è¿›è¡Œäº†ä¼˜åŒ–ï¼Œæå‡ºå¸¦æƒå€¼çš„ç›®æ ‡å‡½æ•°ï¼š</p>
<p>wr,{wa}  âˆ‘i=1Nâ„“(yit,f(xit;wt))+âˆ‘i=1Nâˆ‘aâˆˆAÎ»aâ„“(yia,f(xia;wa))argminwr,{wa}aâˆˆA  i=1âˆ‘Nâ„“(yit,f(xit;wt))+i=1âˆ‘NaâˆˆAâˆ‘Î»aâ„“(yia,f(xia;wa))</p>
<p>å¼ä¸­å‰ä¸€é¡¹ä¸ºäººè„¸å…³é”®ç‚¹æ£€æµ‹çš„æŸå¤±å‡½æ•°ï¼Œç¬¬äºŒé¡¹è¡¨ç¤ºå…¶ä»–ä»»åŠ¡çš„æŸå¤±å‡½æ•°ï¼ŒÎ»aÎ»aä¸ºä»»åŠ¡aaçš„é‡è¦ç¨‹åº¦ã€‚åœ¨è®ºæ–‡ä¸­ï¼Œå››ä¸ªå­ä»»åŠ¡åˆ†åˆ«ä¸ºï¼šæ€§åˆ«ã€æ˜¯å¦å¸¦çœ¼é•œã€å¾®ç¬‘ã€è„¸éƒ¨å§¿åŠ¿ï¼Œå› æ­¤ï¼Œä¼˜åŒ–ç›®æ ‡å‡½æ•°ä¸ºï¼š</p>
<p>wr,{wa}  12âˆ‘i=1Nâˆ¥(yit,f(xit;wt)âˆ¥2+âˆ‘i=1Nâˆ‘aâˆˆAÎ»ayialogâ¡(p(yiaâˆ£xia;wa))+âˆ‘t=1Tâˆ¥waâˆ¥22argminwr,{wa}aâˆˆA  21i=1âˆ‘Nâˆ¥(yit,f(xit;wt)âˆ¥2+i=1âˆ‘NaâˆˆAâˆ‘Î»ayialog(p(yiaâˆ£xia;wa))+t=1âˆ‘Tâˆ¥waâˆ¥22</p>
<p>åˆ†ç±»ä»»åŠ¡é‡‡ç”¨äº¤å‰ç†µæŸå¤±å‡½æ•°ã€‚</p>
<p>é’ˆå¯¹å¤šä»»åŠ¡å­¦ä¹ çš„å¦å¤–ä¸€ä¸ªé—®é¢˜â€”â€”å„ä»»åŠ¡æ”¶æ•›é€Ÿåº¦ä¸åŒï¼Œæœ¬æ–‡æå‡ºä¸€ç§æ–°çš„æå‰åœæ­¢ï¼ˆEarly Stoppingï¼‰æ–¹æ³•ã€‚å½“æŸä¸ªå­ä»»åŠ¡è¾¾åˆ°æœ€å¥½è¡¨çŽ°ä»¥åŽï¼Œè¿™ä¸ªå­ä»»åŠ¡å°±å¯¹ä¸»ä»»åŠ¡å·²ç»æ²¡æœ‰å¸®åŠ©ï¼Œå°±å¯ä»¥åœæ­¢è¿™ä¸ªä»»åŠ¡ã€‚</p>
<p>TCDCN é‡‡ç”¨å¤šä»»åŠ¡å­¦ä¹ æ–¹æ³•å¯¹äººè„¸å…³é”®ç‚¹è¿›è¡Œæ£€æµ‹ï¼Œé’ˆå¯¹å¤šä»»åŠ¡å­¦ä¹ åœ¨äººè„¸å…³é”®ç‚¹æ£€æµ‹ä»»åŠ¡ä¸­çš„ä¸¤ä¸ªä¸»è¦é—®é¢˜ï¼šä¸åŒä»»åŠ¡å­¦ä¹ éš¾æ˜“ç¨‹åº¦ä¸åŒä»¥åŠä¸åŒä»»åŠ¡æ”¶æ•›é€Ÿåº¦ä¸åŒï¼Œåˆ†åˆ«æå‡ºäº†æ–°ç›®æ ‡å‡½æ•°å’Œæå‰åœæ­¢ç­–ç•¥åŠ ä»¥æ”¹è¿›ï¼Œæœ€ç»ˆåœ¨ AFLW å’Œ AFW æ•°æ®é›†ä¸ŠèŽ·å¾—é¢†å…ˆçš„ç»“æžœã€‚åŒæ—¶å¯¹æ¯”äºŽçº§è” CNN æ–¹æ³•ï¼Œåœ¨ Intel Core i5 cpu ä¸Šï¼Œçº§è” CNN éœ€è¦ 0.12sï¼Œè€Œ TCDCN ä»…éœ€è¦ 17msï¼Œé€Ÿåº¦æå‡ä¸ƒå€æœ‰ä½™ã€‚</p>
<h4 id="MTCNN"><a href="#MTCNN" class="headerlink" title="MTCNN"></a>MTCNN</h4><p>2016 å¹´ï¼ŒZhang ç­‰äººæå‡ºä¸€ç§å¤šä»»åŠ¡çº§è”å·ç§¯ç¥žç»ç½‘ç»œï¼ˆMTCNN, Multi-task Cascaded Convolutional Networksï¼‰ç”¨ä»¥åŒæ—¶å¤„ç†äººè„¸æ£€æµ‹å’Œäººè„¸å…³é”®ç‚¹å®šä½é—®é¢˜ã€‚ä½œè€…è®¤ä¸ºäººè„¸æ£€æµ‹å’Œäººè„¸å…³é”®ç‚¹æ£€æµ‹ä¸¤ä¸ªä»»åŠ¡ä¹‹é—´å¾€å¾€å­˜åœ¨ç€æ½œåœ¨çš„è”ç³»ï¼Œç„¶è€Œå¤§å¤šæ•°æ–¹æ³•éƒ½æœªå°†ä¸¤ä¸ªä»»åŠ¡æœ‰æ•ˆçš„ç»“åˆèµ·æ¥ï¼Œæœ¬æ–‡ä¸ºäº†å……åˆ†åˆ©ç”¨ä¸¤ä»»åŠ¡ä¹‹é—´æ½œåœ¨çš„è”ç³»ï¼Œæå‡ºä¸€ç§å¤šä»»åŠ¡çº§è”çš„äººè„¸æ£€æµ‹æ¡†æž¶ï¼Œå°†äººè„¸æ£€æµ‹å’Œäººè„¸å…³é”®ç‚¹æ£€æµ‹åŒæ—¶è¿›è¡Œã€‚</p>
<p>MTCNN åŒ…å«ä¸‰ä¸ªçº§è”çš„å¤šä»»åŠ¡å·ç§¯ç¥žç»ç½‘ç»œï¼Œåˆ†åˆ«æ˜¯ Proposal Network (P-Net)ã€Refine Network (R-Net)ã€Output Network (O-Net)ï¼Œæ¯ä¸ªå¤šä»»åŠ¡å·ç§¯ç¥žç»ç½‘ç»œå‡æœ‰ä¸‰ä¸ªå­¦ä¹ ä»»åŠ¡ï¼Œåˆ†åˆ«æ˜¯äººè„¸åˆ†ç±»ã€è¾¹æ¡†å›žå½’å’Œå…³é”®ç‚¹å®šä½ã€‚ç½‘ç»œç»“æž„å¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><a href="https://github.com/niuyuanyuanna/BlogImages/raw/master/computerVersion/14009657.jpg" target="_blank" rel="noopener"><img src="https://github.com/niuyuanyuanna/BlogImages/raw/master/computerVersion/14009657.jpg" alt="img"></a></p>
<p>MTCNN å®žçŽ°äººè„¸æ£€æµ‹å’Œå…³é”®ç‚¹å®šä½åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µã€‚é¦–å…ˆç”± P-Net èŽ·å¾—äº†äººè„¸åŒºåŸŸçš„å€™é€‰çª—å£å’Œè¾¹ç•Œæ¡†çš„å›žå½’å‘é‡ï¼Œå¹¶ç”¨è¯¥è¾¹ç•Œæ¡†åšå›žå½’ï¼Œå¯¹å€™é€‰çª—å£è¿›è¡Œæ ¡å‡†ï¼Œç„¶åŽé€šè¿‡éžæžå¤§å€¼æŠ‘åˆ¶ï¼ˆNMSï¼‰æ¥åˆå¹¶é«˜åº¦é‡å çš„å€™é€‰æ¡†ã€‚ç„¶åŽå°† P-Net å¾—å‡ºçš„å€™é€‰æ¡†ä½œä¸ºè¾“å…¥ï¼Œè¾“å…¥åˆ° R-Netï¼ŒR-Net åŒæ ·é€šè¿‡è¾¹ç•Œæ¡†å›žå½’å’Œ NMS æ¥åŽ»æŽ‰é‚£äº› false-positive åŒºåŸŸï¼Œå¾—åˆ°æ›´ä¸ºå‡†ç¡®çš„å€™é€‰æ¡†ï¼›æœ€åŽï¼Œåˆ©ç”¨ O-Net è¾“å‡º 5 ä¸ªå…³é”®ç‚¹çš„ä½ç½®ã€‚</p>
<p>åœ¨å…·ä½“è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œä½œè€…å°±å¤šä»»åŠ¡å­¦ä¹ çš„æŸå¤±å‡½æ•°è®¡ç®—æ–¹å¼è¿›è¡Œç›¸åº”æ”¹è¿›ã€‚åœ¨å¤šä»»åŠ¡å­¦ä¹ ä¸­ï¼Œå½“ä¸åŒç±»åž‹çš„è®­ç»ƒå›¾åƒè¾“å…¥åˆ°ç½‘ç»œæ—¶ï¼Œæœ‰äº›ä»»åŠ¡æ˜¯ä¸è¿›è¡Œå­¦ä¹ çš„ï¼Œå› æ­¤ç›¸åº”çš„æŸå¤±åº”ä¸º 0ã€‚ä¾‹å¦‚ï¼Œå½“è®­ç»ƒå›¾åƒä¸ºèƒŒæ™¯ï¼ˆNon-faceï¼‰æ—¶ï¼Œè¾¹ç•Œæ¡†å’Œå…³é”®ç‚¹çš„ loss åº”ä¸º 0ï¼Œæ–‡ä¸­æä¾›è®¡ç®—å…¬å¼è‡ªåŠ¨ç¡®å®š loss çš„é€‰å–ï¼Œå…¬å¼ä¸ºï¼š</p>
<p>minâ¡âˆ‘i=1Nâˆ‘jâˆˆ{det,box,landmark}Î±jÎ²ijLijmini=1âˆ‘Njâˆˆ{det,box,landmark}âˆ‘Î±jÎ²ijLij</p>
<p>å…¶ä¸­</p>
<ul>
<li>Î±jÎ±jè¡¨ç¤ºç¬¬jjä¸ªä»»åŠ¡çš„é‡è¦ç¨‹åº¦ï¼Œåœ¨P-Netä¸­ï¼ŒÎ±det=1Î±det=1ï¼ŒÎ±box=0.5Î±box=0.5ï¼ŒÎ±landmark=0.5Î±landmark=0.5ï¼›åœ¨R-Netä¸­Î±det=1Î±det=1ï¼ŒÎ±box=0.5Î±box=0.5ï¼ŒÎ±landmark=1Î±landmark=1ã€‚åœ¨R-Netä¸­å°†$\alpha_{landmark} $å¢žå¤§ï¼Œå› ä¸ºéœ€è¦å¯¹å…³é”®ç‚¹è¿›è¡Œæ£€æµ‹ï¼Œæ‰€ä»¥ç›¸åº”å¢žå¤§ä»»åŠ¡é‡è¦æ€§</li>
<li>Î²ijâˆˆ(0,1)Î²ijâˆˆ(0,1)ä½œä¸ºæ ·æœ¬ç±»åž‹æŒ‡ç¤ºå™¨</li>
</ul>
<p>ä¸ºäº†æå‡ç½‘ç»œæ€§èƒ½ï¼Œéœ€è¦æŒ‘é€‰å‡ºå›°éš¾æ ·æœ¬ï¼ˆHard Sampleï¼‰ï¼Œä¼ ç»Ÿæ–¹æ³•æ˜¯é€šè¿‡ç ”ç©¶è®­ç»ƒå¥½çš„æ¨¡åž‹è¿›è¡ŒæŒ‘é€‰ï¼Œè€Œæœ¬æ–‡æå‡ºä¸€ç§èƒ½åœ¨è®­ç»ƒè¿‡ç¨‹åœ¨çº¿æŒ‘é€‰å›°éš¾æ ·æœ¬çš„æ–¹æ³•ã€‚åœ¨ mini-batch ä¸­ï¼Œå¯¹æ¯ä¸ªæ ·æœ¬çš„æŸå¤±è¿›è¡ŒæŽ’åºï¼ŒæŒ‘é€‰å‰ 70% è¾ƒå¤§çš„æŸå¤±å¯¹åº”çš„æ ·æœ¬ä½œä¸ºå›°éš¾æ ·æœ¬ï¼ŒåŒæ—¶åœ¨åå‘ä¼ æ’­æ—¶ï¼Œå¿½ç•¥é‚£ 30% çš„æ ·æœ¬ï¼Œå› ä¸ºé‚£ 30% æ ·æœ¬å¯¹æ›´æ–°ä½œç”¨ä¸å¤§ã€‚</p>
<h4 id="TCNN"><a href="#TCNN" class="headerlink" title="TCNN"></a>TCNN</h4><p>TCNNï¼ˆTweaked Convolutional Neural Networksï¼‰2016 å¹´ï¼ŒWu ç­‰äººç ”ç©¶äº† CNN åœ¨äººè„¸å…³é”®ç‚¹å®šä½ä»»åŠ¡ä¸­åˆ°åº•å­¦ä¹ åˆ°çš„æ˜¯ä»€ä¹ˆæ ·çš„ç‰¹å¾ï¼Œåœ¨é‡‡ç”¨ GMMï¼ˆGaussian Mixture Model, æ··åˆé«˜æ–¯æ¨¡åž‹ï¼‰å¯¹ä¸åŒå±‚çš„ç‰¹å¾è¿›è¡Œèšç±»åˆ†æžï¼Œå‘çŽ°ç½‘ç»œè¿›è¡Œçš„æ˜¯å±‚æ¬¡çš„ï¼Œç”±ç²—åˆ°ç²¾çš„ç‰¹å¾å®šä½ï¼Œè¶Šæ·±å±‚æå–åˆ°çš„ç‰¹å¾è¶Šèƒ½ååº”å‡ºäººè„¸å…³é”®ç‚¹çš„ä½ç½®ã€‚é’ˆå¯¹è¿™ä¸€å‘çŽ°ï¼Œæå‡ºäº† TCNNï¼ˆTweaked Convolutional Neural Networksï¼‰ï¼Œå…¶ç½‘ç»œç»“æž„å¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><a href="https://github.com/niuyuanyuanna/BlogImages/raw/master/computerVersion/89918024.jpg" target="_blank" rel="noopener"><img src="https://github.com/niuyuanyuanna/BlogImages/raw/master/computerVersion/89918024.jpg" alt="img"></a></p>
<p>å·¦è¾¹ä¸ºVanilla CNNï¼Œé’ˆå¯¹ FC5FC5å¾—åˆ°çš„ç‰¹å¾è¿›è¡Œ K ä¸ªç±»åˆ«èšç±»ï¼Œå°†è®­ç»ƒå›¾åƒæŒ‰ç…§æ‰€åˆ†ç±»åˆ«è¿›è¡Œåˆ’åˆ†ï¼Œç”¨ä»¥è®­ç»ƒæ‰€å¯¹åº”çš„ FC6KFC6Kã€‚æµ‹è¯•æ—¶ï¼Œå›¾ç‰‡é¦–å…ˆç»è¿‡ Vanilla CNN æå–ç‰¹å¾ï¼Œå³ FC5FC5çš„è¾“å‡ºã€‚å°† FC5FC5è¾“å‡ºçš„ç‰¹å¾ä¸Ž K ä¸ªèšç±»ä¸­å¿ƒè¿›è¡Œæ¯”è¾ƒï¼Œå°† FC5FC5è¾“å‡ºçš„ç‰¹å¾åˆ’åˆ†è‡³ç›¸åº”çš„ç±»åˆ«ä¸­ï¼Œç„¶åŽé€‰æ‹©ä¸Žä¹‹ç›¸åº”çš„ FC6FC6è¿›è¡Œè¿žæŽ¥ï¼Œæœ€ç»ˆå¾—åˆ°è¾“å‡ºã€‚</p>
<p>ä½œè€…å¯¹ Vanilla CNN ä¸­é—´å„å±‚ç‰¹å¾è¿›è¡Œèšç±»åˆ†æžï¼Œå¹¶ç»Ÿè®¡å‡ºå…³é”®ç‚¹åœ¨å„å±‚ä¹‹é—´çš„å˜åŒ–ç¨‹åº¦ã€‚è¶Šæ·±å±‚æå–åˆ°çš„ç‰¹å¾è¶Šç´§å¯†ï¼Œå› æ­¤è¶Šæ·±å±‚æå–åˆ°çš„ç‰¹å¾è¶Šèƒ½ååº”å‡ºäººè„¸å…³é”®ç‚¹çš„ä½ç½®ã€‚ä½œè€…åœ¨é‡‡ç”¨ K=64 æ—¶ï¼Œå¯¹æ‰€åˆ’åˆ†ç°‡çš„æ ·æœ¬è¿›è¡Œå¹³å‡åŽç»˜å›¾å¦‚ä¸‹ï¼š</p>
<p><a href="https://github.com/niuyuanyuanna/BlogImages/raw/master/computerVersion/62921355.jpg" target="_blank" rel="noopener"><img src="https://github.com/niuyuanyuanna/BlogImages/raw/master/computerVersion/62921355.jpg" alt="img"></a></p>
<p>ä»Žå›¾ä¸Šå¯å‘çŽ°ï¼Œæ¯ä¸€ä¸ªç°‡çš„æ ·æœ¬ååº”äº†å¤´éƒ¨çš„æŸç§å§¿æ€ï¼Œç”šè‡³å‡ºçŽ°äº†è¡¨æƒ…å’Œæ€§åˆ«çš„å·®å¼‚ã€‚å› æ­¤å¯æŽ¨çŸ¥ï¼Œäººè„¸å…³é”®ç‚¹çš„ä½ç½®å¸¸å¸¸å’Œäººè„¸çš„å±žæ€§ç›¸å…³è”ã€‚å› æ­¤ä¸ºäº†å¾—åˆ°æ›´å‡†ç¡®çš„å…³é”®ç‚¹å®šä½ï¼Œä½œè€…ä½¿ç”¨å…·æœ‰ç›¸ä¼¼ç‰¹å¾çš„å›¾ç‰‡è®­ç»ƒå¯¹åº”çš„å›žå½’å™¨ï¼Œæœ€ç»ˆåœ¨äººè„¸å…³é”®ç‚¹æ£€æµ‹æ•°æ®é›† AFLW,AFW å’Œ 300W ä¸Šå‡èŽ·å¾—å½“æ—¶æœ€ä½³æ•ˆæžœã€‚</p>
<h2 id="DAN"><a href="#DAN" class="headerlink" title="DAN"></a>DAN</h2><h3 id="ä¸»è¦å†…å®¹"><a href="#ä¸»è¦å†…å®¹" class="headerlink" title="ä¸»è¦å†…å®¹"></a>ä¸»è¦å†…å®¹</h3><p>DANæ˜¯ä¸€ç§äººè„¸å¯¹é½çš„æ–¹æ³•ï¼Œé‡‡ç”¨çº§è”ç¥žç»ç½‘ç»œç»“æž„ï¼Œå……åˆ†åˆ©ç”¨äººè„¸çš„å…¨å±€ä¿¡æ¯ï¼Œè€Œä¸æ˜¯å±€éƒ¨ä¿¡æ¯ï¼Œé¿å…å±€éƒ¨æœ€å°åŒ–ã€‚</p>
<ol>
<li>å‚è€ƒCSRæ¡†æž¶ï¼Œé€šè¿‡å‰å‘ä¼ æ’­æå–ç‰¹å¾ï¼Œè®­ç»ƒå‰å‘ä¼ æ’­çš„backboneç½‘ç»œå¾—åˆ°å…³é”®ç‚¹ä½çš„åå·®ï¼Œæ›¿ä»£CSRä¸­çš„å›žå½’å™¨</li>
<li>ç”¨çº§è”ç»“æž„æ¥å®žçŽ°CSRä¸­çš„è¿­ä»£</li>
<li>åˆ©ç”¨äººè„¸æ‰€æœ‰ä¿¡æ¯T(I)T(I)ã€H(I)H(I)ã€F(I)F(I)ä½œä¸ºè¾“å…¥ï¼Œå¾—åˆ°å…³é”®ç‚¹åå·®</li>
<li>æž„é€ çº§è”ç½‘ç»œç»“æž„</li>
<li>åˆ†çº§è®­ç»ƒç½‘ç»œï¼Œæ¯ä¸€çº§ç½‘ç»œlossä¸æ”¶æ•›åŽå†è®­ç»ƒä¸‹ä¸€çº§ç½‘ç»œ</li>
</ol>
<h3 id="ç½‘ç»œç»“æž„"><a href="#ç½‘ç»œç»“æž„" class="headerlink" title="ç½‘ç»œç»“æž„"></a>ç½‘ç»œç»“æž„</h3><p>2017 å¹´ï¼ŒKowalski ç­‰äººæå‡ºä¸€ç§æ–°çš„çº§è”æ·±åº¦ç¥žç»ç½‘ç»œâ€”â€”DANï¼ˆDeep Alignment Networkï¼‰ï¼Œä»¥å¾€çº§è”ç¥žç»ç½‘ç»œè¾“å…¥çš„æ˜¯å›¾åƒçš„æŸä¸€éƒ¨åˆ†ï¼Œä¸Žä»¥å¾€ä¸åŒï¼ŒDAN å„é˜¶æ®µç½‘ç»œçš„è¾“å…¥å‡ä¸ºæ•´å¼ å›¾ç‰‡ã€‚å½“ç½‘ç»œå‡é‡‡ç”¨æ•´å¼ å›¾ç‰‡ä½œä¸ºè¾“å…¥æ—¶ï¼ŒDAN å¯ä»¥æœ‰æ•ˆçš„å…‹æœå¤´éƒ¨å§¿æ€ä»¥åŠåˆå§‹åŒ–å¸¦æ¥çš„é—®é¢˜ï¼Œä»Žè€Œå¾—åˆ°æ›´å¥½çš„æ£€æµ‹æ•ˆæžœã€‚ä¹‹æ‰€ä»¥ DAN èƒ½å°†æ•´å¼ å›¾ç‰‡ä½œä¸ºè¾“å…¥ï¼Œæ˜¯å› ä¸ºå…¶åŠ å…¥äº†å…³é”®ç‚¹çƒ­å›¾ï¼ˆLandmark Heatmapsï¼‰ï¼Œå…³é”®ç‚¹çƒ­å›¾çš„ä½¿ç”¨æ˜¯æœ¬æ–‡çš„ä¸»è¦åˆ›æ–°ç‚¹ã€‚DAN åŸºæœ¬æ¡†æž¶å¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><a href="https://github.com/niuyuanyuanna/BlogImages/raw/master/computerVersion/55049944.jpg" target="_blank" rel="noopener"><img src="https://github.com/niuyuanyuanna/BlogImages/raw/master/computerVersion/55049944.jpg" alt="img"></a></p>
<p>DAN åŒ…å«å¤šä¸ªé˜¶æ®µï¼Œæ¯ä¸€ä¸ªé˜¶æ®µå«ä¸‰ä¸ªè¾“å…¥å’Œä¸€ä¸ªè¾“å‡ºï¼Œè¾“å…¥åˆ†åˆ«æ˜¯è¢«çŸ«æ­£è¿‡çš„å›¾ç‰‡ã€å…³é”®ç‚¹çƒ­å›¾å’Œç”±å…¨è¿žæŽ¥å±‚ç”Ÿæˆçš„ç‰¹å¾å›¾ï¼Œè¾“å‡ºæ˜¯é¢éƒ¨å½¢çŠ¶ï¼ˆFace Shapeï¼‰ã€‚å…¶ä¸­ï¼ŒCONNECTION LAYER çš„ä½œç”¨æ˜¯å°†æœ¬é˜¶æ®µå¾—è¾“å‡ºè¿›è¡Œä¸€ç³»åˆ—å˜æ¢ï¼Œç”Ÿæˆä¸‹ä¸€é˜¶æ®µæ‰€éœ€è¦çš„ä¸‰ä¸ªè¾“å…¥ï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><a href="https://github.com/niuyuanyuanna/BlogImages/raw/master/computerVersion/83789038.jpg" target="_blank" rel="noopener"><img src="https://github.com/niuyuanyuanna/BlogImages/raw/master/computerVersion/83789038.jpg" alt="img"></a></p>
<p>ç¬¬ä¸€é˜¶æ®µçš„è¾“å…¥ä»…æœ‰åŽŸå§‹å›¾ç‰‡å’Œ S0S0ã€‚é¢éƒ¨å…³é”®ç‚¹çš„åˆå§‹åŒ–å³ä¸º S0S0ï¼Œæ˜¯ç”±æ‰€æœ‰å…³é”®ç‚¹å–å¹³å‡å¾—åˆ°ï¼Œç¬¬ä¸€é˜¶æ®µè¾“å‡º S1S1ã€‚å¯¹äºŽç¬¬äºŒé˜¶æ®µï¼Œ S1S1ç»ç¬¬ä¸€é˜¶æ®µçš„ CONNECTION LAYERS è¿›è¡Œè½¬æ¢ï¼Œåˆ†åˆ«å¾—åˆ°è½¬æ¢åŽå›¾ç‰‡ T2(I)T2(I)ã€ S1S1æ‰€å¯¹åº”çš„çƒ­å›¾ H2H2å’Œç¬¬ä¸€é˜¶æ®µ fc1fc1å±‚è¾“å‡ºï¼Œè¿™ä¸‰ä¸ªæ­£æ˜¯ç¬¬äºŒé˜¶æ®µçš„è¾“å…¥ã€‚å¦‚æ­¤å‘¨è€Œå¤å§‹ï¼Œç›´åˆ°æœ€åŽä¸€ä¸ªé˜¶æ®µè¾“å‡º SNSNã€‚</p>
<p>DAN è¦åšçš„â€œIMAGE TRANSFORMâ€œï¼Œå°±æ˜¯å›¾ç‰‡çŸ«æ­£ï¼Œ DAN å¯¹å§¿æ€å˜æ¢å…·æœ‰å¾ˆå¥½çš„é€‚åº”èƒ½åŠ›ï¼Œæˆ–è®¸å°±å¾—ç›ŠäºŽè¿™ä¸ªâ€œIMAGE TRANSFORMâ€œã€‚StStå…¬å¼ä¸ºï¼š</p>
<p>St=Ttâˆ’1(Tt(Stâˆ’1)+Î”St)St=Ttâˆ’1(Tt(Stâˆ’1)+Î”St)</p>
<p>Feed forward NNç½‘ç»œå‚æ•°ä¸ºï¼š</p>
<table>
<thead>
<tr>
<th align="center">Name</th>
<th align="center">Shape-in</th>
<th align="center">Shape-out</th>
<th align="center">Kernel</th>
</tr>
</thead>
<tbody><tr>
<td align="center">conv1a</td>
<td align="center">112Ã—112Ã—1</td>
<td align="center">112Ã—112Ã—64</td>
<td align="center">3Ã—3Ã—1,1</td>
</tr>
<tr>
<td align="center">conv1b</td>
<td align="center">112Ã—112Ã—64</td>
<td align="center">112Ã—112Ã—64</td>
<td align="center">3Ã—3Ã—64,1</td>
</tr>
<tr>
<td align="center">pool1</td>
<td align="center">112Ã—112Ã—64</td>
<td align="center">56Ã—56Ã—64</td>
<td align="center">2Ã—2Ã—1,2</td>
</tr>
<tr>
<td align="center">conv2a</td>
<td align="center">56Ã—56Ã—64</td>
<td align="center">56Ã—56Ã—128</td>
<td align="center">3Ã—3Ã—64,1</td>
</tr>
<tr>
<td align="center">conv2b</td>
<td align="center">56Ã—56Ã—128</td>
<td align="center">56Ã—56Ã—128</td>
<td align="center">3Ã—3Ã—128,1</td>
</tr>
<tr>
<td align="center">pool2</td>
<td align="center">56Ã—56Ã—128</td>
<td align="center">28Ã—28Ã—128</td>
<td align="center">2Ã—2Ã—1,2</td>
</tr>
<tr>
<td align="center">conv3a</td>
<td align="center">28Ã—28Ã—128</td>
<td align="center">28Ã—28Ã—256</td>
<td align="center">3Ã—3Ã—128,1</td>
</tr>
<tr>
<td align="center">conv3b</td>
<td align="center">28Ã—28Ã—256</td>
<td align="center">28Ã—28Ã—256</td>
<td align="center">3Ã—3Ã—256,1</td>
</tr>
<tr>
<td align="center">pool3</td>
<td align="center">28Ã—28Ã—256</td>
<td align="center">14Ã—14Ã—256</td>
<td align="center">2Ã—2Ã—1,2</td>
</tr>
<tr>
<td align="center">conv4a</td>
<td align="center">14Ã—14Ã—256</td>
<td align="center">14Ã—14Ã—512</td>
<td align="center">3Ã—3Ã—256,1</td>
</tr>
<tr>
<td align="center">conv4b</td>
<td align="center">14Ã—14Ã—512</td>
<td align="center">14Ã—14Ã—512</td>
<td align="center">3Ã—3Ã—512,1</td>
</tr>
<tr>
<td align="center">pool4</td>
<td align="center">14Ã—14Ã—512</td>
<td align="center">7Ã—7Ã—512</td>
<td align="center">2Ã—2Ã—1,2</td>
</tr>
<tr>
<td align="center">fc1</td>
<td align="center">7Ã—7Ã—512</td>
<td align="center">1Ã—1Ã—256</td>
<td align="center">-</td>
</tr>
<tr>
<td align="center">fc2</td>
<td align="center">1Ã—1Ã—256</td>
<td align="center">1Ã—1Ã—136</td>
<td align="center">-</td>
</tr>
</tbody></table>
<p>Feed Forward NNçš„è¾“å…¥æ˜¯ç»è¿‡â€œIMAGE TRANSFORMâ€œä¹‹åŽå¾—åˆ°çš„åç§»é‡Î”StÎ”Stï¼Œå®ƒæ˜¯åœ¨æ–°ç‰¹å¾ç©ºé—´ä¸‹çš„åç§»é‡ï¼Œåœ¨ç»è¿‡åç§»åŽå†ç»è¿‡åå˜æ¢Ttâˆ’1(â‹…)Ttâˆ’1(â‹…)ï¼Œå°†å…¶è¿˜åŽŸåˆ°åŽŸå§‹ç©ºé—´ã€‚</p>
<p>å…³é”®ç‚¹çƒ­åº¦å›¾çš„è®¡ç®—å°±æ˜¯ä¸€ä¸ªä¸­å¿ƒè¡°å‡ï¼Œå…³é”®ç‚¹å¤„å€¼æœ€å¤§ï¼Œè¶Šè¿œåˆ™å€¼è¶Šå°ï¼Œå…¬å¼å¦‚ä¸‹ï¼š</p>
<p>H(x,y)=11+SiâˆˆTt(Stâˆ’1)  âˆ¥(x,y)âˆ’Siâˆ¥H(x,y)=1+minSiâˆˆTt(Stâˆ’1)  âˆ¥(x,y)âˆ’Siâˆ¥1</p>
<p>ä»Žfc1fc1å±‚ç”Ÿæˆç‰¹ç§å›¾çš„ç›®çš„æ˜¯äººä¸ºç»™ CNN å¢žåŠ ä¸Šä¸€é˜¶æ®µä¿¡æ¯ã€‚æ€»è€Œè¨€ä¹‹ï¼ŒDAN æ˜¯ä¸€ä¸ªçº§è”æ€æƒ³çš„å…³é”®ç‚¹æ£€æµ‹æ–¹æ³•ï¼Œé€šè¿‡å¼•å…¥å…³é”®ç‚¹çƒ­å›¾ä½œä¸ºè¡¥å……ï¼ŒDAN å¯ä»¥ä»Žæ•´å¼ å›¾ç‰‡è¿›è¡Œæå–ç‰¹å¾ï¼Œä»Žè€ŒèŽ·å¾—æ›´ä¸ºç²¾ç¡®çš„å®šä½ã€‚</p>
<h2 id="EmotionalDAN"><a href="#EmotionalDAN" class="headerlink" title="EmotionalDAN"></a>EmotionalDAN</h2><p>Author: NYY</p>
<p>Link: <a href="http://yoursite.com/2018/11/08/computer_version/face-keypoint-detection/">http://yoursite.com/2018/11/08/computer_version/face-keypoint-detection/</a></p>
<p>Copyright Notice: All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a>unless stating additionally.</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/08/24/OpenGL/Adobe%20Animiation%20Flow/">OpenGL/Adobe Animiation Flow</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-08-24</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Graphic/">Graphic</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Adobe/">Adobe</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Animation/">Animation</a></span><div class="content"><ol>
<li>Download Adobe &amp; Zii , in <a href="https://www.waitsun.com/adobe-zii-2019.html" target="_blank" rel="noopener">https://www.waitsun.com/adobe-zii-2019.html</a></li>
<li>install body movin</li>
<li><a href="https://github.com/airbnb/lottie-web#plugin-installation" target="_blank" rel="noopener">https://github.com/airbnb/lottie-web#plugin-installation</a> &amp; ZXP_installer : <a href="https://www.jianshu.com/p/9a1500571269" target="_blank" rel="noopener">https://www.jianshu.com/p/9a1500571269</a></li>
</ol>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/08/21/DevOps/2019-08-21-Homebrew-change-mirror-source/">DevOps/2019-08-21-Homebrew-change-mirror-source</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-08-21</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/DevOps/">DevOps</a></span><div class="content"><p>Homebrewæ˜¯Macçš„è½¯ä»¶åŒ…ç®¡ç†å™¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®ƒå®‰è£…å¤§å¤šæ•°å¼€æºè½¯ä»¶ã€‚ä½†æ˜¯åœ¨ä½¿ç”¨brew updateæ›´æ–°çš„æ—¶å€™ç«Ÿç„¶è¦ç­‰å¾…å¾ˆä¹…ã€‚çŒœæµ‹å¯èƒ½æ˜¯å› ä¸ºbrewçš„å®˜æ–¹æºè¢«å¢™æˆ–æˆ–è€…å“åº”æ…¢ã€‚äºŽæ˜¯æƒ³åˆ°çš„åˆ‡æ¢Homebrewçš„æ›´æ–°æºçš„åŠžæ³•, å¦‚æžœcoding.netçš„æºè¿˜æ˜¯å¾ˆæ…¢çš„è¯ï¼Œ ä¹Ÿå¯ä»¥å°è¯•å…¶ä»–çš„æºã€‚å…·ä½“ä»£ç å¦‚ä¸‹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="comment">#cd to homebrew foler</span></span><br><span class="line">$ <span class="built_in">cd</span> <span class="string">"<span class="variable">$(brew --repo)</span>"</span>ï¼›</span><br><span class="line">$ <span class="comment">#check  git remote status</span></span><br><span class="line">$ git remote -v;</span><br><span class="line">https://github.com/Homebrew/homebrew.git</span><br><span class="line">$ <span class="comment">#update remote url with Coding.net</span></span><br><span class="line">$ git remote <span class="built_in">set</span>-url origin https://git.coding.net/homebrew/homebrew.git</span><br><span class="line">$ brew update</span><br></pre></td></tr></table></figure>



<p>ã€€</p>
<p>brewé•œåƒæº</p>
<ul>
<li>ä¸­ç§‘å¤§brewé•œåƒæº    <a href="http://mirrors.ustc.edu.cn/homebrew.git" target="_blank" rel="noopener">http://mirrors.ustc.edu.cn/homebrew.git</a></li>
<li>æ¸…åŽbrewé•œåƒæº  <a href="http://mirrors.ustc.edu.cn/homebrew.git" target="_blank" rel="noopener">http://mirrors.ustc.edu.cn/homebrew.git</a></li>
</ul>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/08/04/CV%20notes/2019-08-04-Pose-Generation/">CV notes/2019-08-04-Pose-Generation</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-08-04</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Deep-Learning/">Deep-Learning</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Deep-Learning/AI/">AI</a></span><div class="content"><p>(NOT MY NOTE, ref from colleaqueâ€™s)</p>
<h3 id="Deformable-GANs-for-Pose-based-Human-Image-Generation"><a href="#Deformable-GANs-for-Pose-based-Human-Image-Generation" class="headerlink" title="Deformable GANs for Pose-based Human Image Generation."></a>Deformable GANs for Pose-based Human Image Generation.</h3><p><a href="https://github.com/AliaksandrSiarohin/pose-gan" target="_blank" rel="noopener">https://github.com/AliaksandrSiarohin/pose-gan</a>.  cvpr2018</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6hp3mtcvuj30rp0aq42d.jpg" alt=""></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6hp4oxs5gj30gd0adwh2.jpg" alt=""></p>
<h3 id="Progressive-Pose-Attention-for-Person-Image-Generation"><a href="#Progressive-Pose-Attention-for-Person-Image-Generation" class="headerlink" title="Progressive Pose Attention for Person Image Generation"></a>Progressive Pose Attention for Person Image Generation</h3><p><a href="https://github.com/tengteng95/Pose-Transfer" target="_blank" rel="noopener">https://github.com/tengteng95/Pose-Transfer</a>.  cvpr2019, </p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6gthtcaz5j30o70b2wfd.jpg" alt="æ•´ä½“æµç¨‹å›¾"></p>
<p>æ•´ä½“ç»“æž„ä¸­å«æœ‰å¤šä¸ªPose  Attentional Blockï¼Œå…¶ä½œç”¨æ˜¯å¯¹è¾“å…¥çš„image pathwayå’Œpose pathwayæŒ‰ç…§Pose Maskè¿›è¡Œæ›´æ–°ï¼Œå›¾ä¸­Mtå³ä¸ºPose Maskï¼Œå®ƒå¼•å¯¼ç½‘ç»œå°†å›¾ç‰‡ä¸­äººç‰©çš„ä¸åŒçš„éƒ¨åˆ†æŒ‰ç…§ç›®æ ‡å§¿æ€è¿›è¡Œåƒç´ å—è¿ç§»ã€‚</p>
<p>å°†æœ€åŽä¸€ä¸ªBlockä¸­Image Pathwayçš„æ•°æ®ç»è¿‡è§£ç ç½‘ç»œï¼Œå³å¾—åˆ°äº†æœ€ç»ˆçš„ç”Ÿæˆå›¾åƒã€‚</p>
<h3 id="Unsupervised-Person-Image-Generation-with-Semantic-Parsing-Transformation"><a href="#Unsupervised-Person-Image-Generation-with-Semantic-Parsing-Transformation" class="headerlink" title="Unsupervised Person Image Generation with Semantic Parsing Transformation"></a>Unsupervised Person Image Generation with Semantic Parsing Transformation</h3><p><a href="https://github.com/SijieSong/person_generation_spt" target="_blank" rel="noopener">https://github.com/SijieSong/person_generation_spt</a>. cvpr2019</p>
<p>åªæœ‰æµ‹è¯•ä»£ç ï¼Œæµ‹è¯•è¾“å…¥è¿˜éœ€è¦semantic parsing</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6lf6q884ej311s0mb0vb.jpg" alt="">  </p>
<p>###Dense Intrinsic Appearance Flow for Human Pose Transfer</p>
<p><a href="https://github.com/ly015/intrinsic_flow" target="_blank" rel="noopener">https://github.com/ly015/intrinsic_flow</a>      cvpr2019</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6m4tdrihzj31dk0lsgrt.jpg" alt=""></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6m4v9xer1j31bg0j40u9.jpg" alt=""></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6m4vecqfjj30o407udg5.jpg" alt=""></p>
<p>###Disentangled Person Image Generation</p>
<p><a href="https://github.com/charliememory/Disentangled-Person-Image-Generation" target="_blank" rel="noopener">https://github.com/charliememory/Disentangled-Person-Image-Generation</a> cvpr2018</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6m4zyq9zhj31pa0n076v.jpg" alt=""></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6m4xvk2woj31l00l8di5.jpg" alt=""></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/08/02/DevOps/2019-08-02-Docker-w-Pycharm/">DevOps/2019-08-02-Docker-w-Pycharm</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-08-02</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/DevOps/">DevOps</a></span><div class="content"><h3 id="docker-sshé…ç½®"><a href="#docker-sshé…ç½®" class="headerlink" title="docker sshé…ç½®"></a>docker sshé…ç½®</h3><h5 id="Concept"><a href="#Concept" class="headerlink" title="Concept"></a>Concept</h5><p>è¿›è¡Œå®žéªŒæ—¶ç”¨æŒ‚è½½çš„ï¼Œè®©æœ¬åœ°è·Ÿdockerå†…çš„æ–‡ä»¶å¤¹ä¸€æ ·</p>
<p>#####æ–°å»ºdocker container</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nvidia-docker run -it -p [host_port]:[container_port](<span class="keyword">do</span> not use 8888) --name:[container_name] [image_name] -v [container_path]:[host_path] /bin/bash</span><br></pre></td></tr></table></figure>

<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nvidia-docker run -p 5592:5592 -p 5593:5593 -p 8022:22 --name=<span class="string">"liuzhen_tf"</span> -v ~/workspace/liuzhen/remote_workspace:/workspace/liuzhen/remote_workspace -it tensorflow/tensorflow:latest-gpu /bin/bash</span><br></pre></td></tr></table></figure>

<h5 id="é…ç½®sshæœåŠ¡"><a href="#é…ç½®sshæœåŠ¡" class="headerlink" title="é…ç½®sshæœåŠ¡"></a>é…ç½®sshæœåŠ¡</h5><p>åœ¨æ–°å»ºçš„å®¹å™¨å†…é…ç½®sshï¼Œå®‰è£…openssh-server</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ apt update</span><br><span class="line">$ apt install -y openssh-server</span><br></pre></td></tr></table></figure>

<p>è®¾ç½®ssh</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir /var/run/sshd</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">'root:passwd'</span> | chpasswd</span><br><span class="line"><span class="comment"># è¿™é‡Œä½¿ç”¨ä½ è‡ªå·±æƒ³è®¾ç½®çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œpasswdæ˜¯æ­¤å¤„è®¾ç½®çš„å¯†ç </span></span><br><span class="line">$ sed -i <span class="string">'s/PermitRootLogin prohibit-password/PermitRootLogin yes/'</span> /etc/ssh/sshd_config</span><br><span class="line">$ sed <span class="string">'s@session\s*required\s*pam_loginuid.so@session optional pam_loginuid.so@g'</span> -i /etc/pam.d/sshd</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">"export VISIBLE=now"</span> &gt;&gt; /etc/profile</span><br></pre></td></tr></table></figure>

<h5 id="é‡å¯sshæ¿€æ´»é…ç½®"><a href="#é‡å¯sshæ¿€æ´»é…ç½®" class="headerlink" title="é‡å¯sshæ¿€æ´»é…ç½®"></a>é‡å¯sshæ¿€æ´»é…ç½®</h5><p>(<u>æœ€å¸¸è§çš„é—®é¢˜</u>å°±æ˜¯dockerå®¹å™¨åœäº†ä»¥åŽé‡Œé¢çš„SSHæœåŠ¡ä¹Ÿä¼šç›¸åº”åœæ­¢ï¼Œå› æ­¤å½“ä½ å‘çŽ°è‡ªå·±æŸä¸€å¤©è¿žä¸ä¸Šçš„æ—¶å€™ï¼Œè®°å¾—åŽ»dockeré‡Œé‡å¯ä¸€ä¸‹sshæœåŠ¡ï¼š)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ service ssh restart</span><br></pre></td></tr></table></figure>

<p>åœ¨æœåŠ¡å™¨ï¼ˆå®¿ä¸»æœºï¼‰ä¸Šï¼ˆä¸æ˜¯æœåŠ¡å™¨çš„dockeré‡Œï¼‰æµ‹è¯•åˆšåˆšæ–°å»ºdockerå®¹å™¨ä¸­å“ªä¸ªç«¯å£è½¬å‘åˆ°äº†æœåŠ¡å™¨çš„22ç«¯å£ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker port [your_container_name] 22</span><br><span class="line"><span class="comment"># å¦‚æžœå‰é¢çš„é…ç½®ç”Ÿæ•ˆäº†ï¼Œä½ ä¼šçœ‹åˆ°å¦‚ä¸‹è¾“å‡º</span></span><br><span class="line"><span class="comment"># 0.0.0.0:8022</span></span><br></pre></td></tr></table></figure>

<p>æœ€åŽæµ‹è¯•èƒ½å¦ç”¨SSHè¿žæŽ¥åˆ°è¿œç¨‹dockerï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ssh root@[your_host_ip] -p 8022</span><br><span class="line"><span class="comment"># å¯†ç æ˜¯ä½ å‰é¢è‡ªå·±è®¾ç½®çš„</span></span><br></pre></td></tr></table></figure>

<h3 id="pycharmé…ç½®"><a href="#pycharmé…ç½®" class="headerlink" title="pycharmé…ç½®"></a>pycharmé…ç½®</h3><h5 id="æ‰“å¼€æœ¬åœ°ä»£ç "><a href="#æ‰“å¼€æœ¬åœ°ä»£ç " class="headerlink" title="æ‰“å¼€æœ¬åœ°ä»£ç "></a>æ‰“å¼€æœ¬åœ°ä»£ç </h5><p>æ‰“å¼€PyCharm<code>Tools &gt; Deployment &gt; Configuration</code></p>
<p>#####æ–°å»ºæœåŠ¡å™¨SFTP</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6gtkcxaeaj315r0u03zh.jpg" alt="image-20190828175349739"></p>
<p>è¾“å…¥å¦‚ä¸‹å›¾é…ç½®ï¼Œæ³¨æ„è¿™é‡Œçš„ç«¯å£æ˜¯ä½ åˆšåˆšè®¾ç½®çš„æ˜ å°„åˆ°å®¹å™¨22ç«¯å£çš„å®¿ä¸»æœºä¸­çš„ç«¯å£ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯8022ï¼Œè´¦å·å¯†ç æ˜¯ä½ åˆšåˆšè‡ªå·±è®¾ç½®çš„ï¼Œè¿™é‡Œçš„Root Pathè®¾ç½®ä¸€ä¸ªè¿œç¨‹dockerå®¹å™¨é‡Œçš„è·¯å¾„ã€‚</p>
<p>åœ¨Mappingsä¸­é…ç½®è·¯å¾„ï¼Œè¿™é‡Œçš„è·¯å¾„æ˜¯ä½ æœ¬åœ°å­˜æ”¾ä»£ç çš„è·¯å¾„ï¼Œä¸Žåˆšåˆšé…ç½®çš„<em>Root Path</em>ç›¸äº’æ˜ å°„ï¼ˆæ„æ€æ˜¯Mappingé‡Œæœ¬æœºçš„è·¯å¾„æ˜ å°„åˆ°è¿œç¨‹çš„Root Pathï¼‰<em>ï¼Œ</em>æ–¹ä¾¿ä»¥åŽåœ¨æœ¬åœ°å’Œè¿œç¨‹dockerä¸­è¿›è¡Œä»£ç å’Œå…¶ä»–æ–‡ä»¶åŒæ­¥ã€‚</p>
<p>#####é…ç½®è¿œç¨‹è§£é‡Šå™¨</p>
<p>æ‰“å¼€PyCharm<code>Preferences &gt; Project Interpreter</code></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6gtlykktsj317a0u0q4w.jpg" alt="image-20190828190716498"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6gtrxo163j307705et8o.jpg" alt=""></p>
<p>æ–°å»ºssh Interpreter</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6gtml7aj1j31d30u0aam.jpg" alt="image-20190828191025481"></p>
<h5 id="é…ç½®è¿è¡ŒçŽ¯å¢ƒå˜é‡"><a href="#é…ç½®è¿è¡ŒçŽ¯å¢ƒå˜é‡" class="headerlink" title="é…ç½®è¿è¡ŒçŽ¯å¢ƒå˜é‡"></a>é…ç½®è¿è¡ŒçŽ¯å¢ƒå˜é‡</h5><p><code>run &gt; edit confuriguration</code></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6gtmztm35j30r80sk758.jpg" alt="image-20190828191253964"></p>
<h3 id="docker-jupyterä½¿ç”¨"><a href="#docker-jupyterä½¿ç”¨" class="headerlink" title="docker jupyterä½¿ç”¨"></a>docker jupyterä½¿ç”¨</h3><p>jupyter-notebookçš„é»˜è®¤ç«¯å£å·æ˜¯8888ï¼Œæ˜ å°„å‡ ä¸ªå¤–éƒ¨ç«¯å£ï¼Œå¦‚å‰é¢çš„5592</p>
<p>æ›´æ–°apt</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get update</span><br></pre></td></tr></table></figure>

<p>å®‰è£…jupyter</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install jupyter</span><br></pre></td></tr></table></figure>

<p>(æ³¨æ„pip install jupyter notebook==5.7.5ï¼Œé«˜ç‰ˆæœ¬æœ‰bug)</p>
<p>é…ç½®jupyter</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">ç”Ÿæˆjupyteré…ç½®æ–‡ä»¶ï¼Œè¿™ä¸ªä¼šç”Ÿæˆé…ç½®æ–‡ä»¶.jupyter/jupyter_notebook_config.py</span></span><br><span class="line">jupyter notebook --generate-config</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">ä½¿ç”¨ipythonç”Ÿæˆå¯†ç </span></span><br><span class="line">In [1]: from notebook.auth import passwd</span><br><span class="line">In [2]: passwd()</span><br><span class="line">Enter password: </span><br><span class="line">Verify password: </span><br><span class="line">Out[2]: 'sha1:38a5ecdf288b:c82dace8d3c7a212ec0bd49bbb99c9af3bae076e'</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">åŽ»é…ç½®æ–‡ä»¶.jupyter/jupyter_notebook_config.pyä¸­ä¿®æ”¹ä»¥ä¸‹å‚æ•°</span></span><br><span class="line">c.NotebookApp.ip='*'                          #ç»‘å®šæ‰€æœ‰åœ°å€</span><br><span class="line">c.NotebookApp.password = u'sha1:38a5ecdf288b:c82dace8d3c7a212ec0bd49bbb99c9af3bae076e'</span><br><span class="line">c.NotebookApp.open_browser = False            #å¯åŠ¨åŽæ˜¯å¦åœ¨æµè§ˆå™¨ä¸­è‡ªåŠ¨æ‰“å¼€</span><br><span class="line">c.NotebookApp.port =5592                      #æŒ‡å®šä¸€ä¸ªè®¿é—®ç«¯å£ï¼Œé»˜è®¤8888ï¼Œæ³¨æ„å’Œæ˜ å°„çš„dockerç«¯å£å¯¹åº”</span><br><span class="line">c.NotebookApp.allow_remote_access = True</span><br><span class="line">c.NotebookApp.allow_root = True               #allow the user to run the notebook as root</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> jupyter notebook</span></span><br></pre></td></tr></table></figure>

</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/08/01/DevOps/2019-08-01-Rebase/">DevOps/2019-08-01-Rebase</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-08-01</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/DevOps/">DevOps</a></span><div class="content"><p>ref: <a href="https://git-scm.com/book/zh/v2/Git-åˆ†æ”¯-å˜åŸº" target="_blank" rel="noopener">https://git-scm.com/book/zh/v2/Git-%E5%88%86%E6%94%AF-%E5%8F%98%E5%9F%BA</a></p>
<h2 id="å˜åŸº"><a href="#å˜åŸº" class="headerlink" title="å˜åŸº"></a>å˜åŸº</h2><p>åœ¨ Git ä¸­æ•´åˆæ¥è‡ªä¸åŒåˆ†æ”¯çš„ä¿®æ”¹ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼š<code>merge</code> ä»¥åŠ <code>rebase</code>ã€‚ åœ¨æœ¬èŠ‚ä¸­æˆ‘ä»¬å°†å­¦ä¹ ä»€ä¹ˆæ˜¯â€œå˜åŸºâ€ï¼Œæ€Žæ ·ä½¿ç”¨â€œå˜åŸºâ€ï¼Œå¹¶å°†å±•ç¤ºè¯¥æ“ä½œçš„æƒŠè‰³ä¹‹å¤„ï¼Œä»¥åŠæŒ‡å‡ºåœ¨ä½•ç§æƒ…å†µä¸‹ä½ åº”é¿å…ä½¿ç”¨å®ƒã€‚</p>
<h3 id="å˜åŸºçš„åŸºæœ¬æ“ä½œ"><a href="#å˜åŸºçš„åŸºæœ¬æ“ä½œ" class="headerlink" title="å˜åŸºçš„åŸºæœ¬æ“ä½œ"></a>å˜åŸºçš„åŸºæœ¬æ“ä½œ</h3><p>è¯·å›žé¡¾ä¹‹å‰åœ¨ <a href="https://git-scm.com/book/zh/v2/ch00/r_basic_merging" target="_blank" rel="noopener">åˆ†æ”¯çš„åˆå¹¶</a> ä¸­çš„ä¸€ä¸ªä¾‹å­ï¼Œä½ ä¼šçœ‹åˆ°å¼€å‘ä»»åŠ¡åˆ†å‰åˆ°ä¸¤ä¸ªä¸åŒåˆ†æ”¯ï¼Œåˆå„è‡ªæäº¤äº†æ›´æ–°ã€‚</p>
<p><img src="https://git-scm.com/book/en/v2/images/basic-rebase-1.png" alt="åˆ†å‰çš„æäº¤åŽ†å²ã€‚"></p>
<p>Figure 35. åˆ†å‰çš„æäº¤åŽ†å²</p>
<p>ä¹‹å‰ä»‹ç»è¿‡ï¼Œæ•´åˆåˆ†æ”¯æœ€å®¹æ˜“çš„æ–¹æ³•æ˜¯ <code>merge</code> å‘½ä»¤ã€‚ å®ƒä¼šæŠŠä¸¤ä¸ªåˆ†æ”¯çš„æœ€æ–°å¿«ç…§ï¼ˆ<code>C3</code> å’Œ <code>C4</code>ï¼‰ä»¥åŠäºŒè€…æœ€è¿‘çš„å…±åŒç¥–å…ˆï¼ˆ<code>C2</code>ï¼‰è¿›è¡Œä¸‰æ–¹åˆå¹¶ï¼Œåˆå¹¶çš„ç»“æžœæ˜¯ç”Ÿæˆä¸€ä¸ªæ–°çš„å¿«ç…§ï¼ˆå¹¶æäº¤ï¼‰ã€‚</p>
<p><img src="https://git-scm.com/book/en/v2/images/basic-rebase-2.png" alt="é€šè¿‡åˆå¹¶æ“ä½œæ¥æ•´åˆåˆ†å‰äº†çš„åŽ†å²ã€‚"></p>
<p>Figure 36. é€šè¿‡åˆå¹¶æ“ä½œæ¥æ•´åˆåˆ†å‰äº†çš„åŽ†å²</p>
<p>å…¶å®žï¼Œè¿˜æœ‰ä¸€ç§æ–¹æ³•ï¼šä½ å¯ä»¥æå–åœ¨ <code>C4</code> ä¸­å¼•å…¥çš„è¡¥ä¸å’Œä¿®æ”¹ï¼Œç„¶åŽåœ¨ <code>C3</code> çš„åŸºç¡€ä¸Šåº”ç”¨ä¸€æ¬¡ã€‚ åœ¨ Git ä¸­ï¼Œè¿™ç§æ“ä½œå°±å«åš <em>å˜åŸº</em>ã€‚ ä½ å¯ä»¥ä½¿ç”¨ <code>rebase</code> å‘½ä»¤å°†æäº¤åˆ°æŸä¸€åˆ†æ”¯ä¸Šçš„æ‰€æœ‰ä¿®æ”¹éƒ½ç§»è‡³å¦ä¸€åˆ†æ”¯ä¸Šï¼Œå°±å¥½åƒâ€œé‡æ–°æ’­æ”¾â€ä¸€æ ·ã€‚</p>
<p>åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œè¿è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout experiment</span><br><span class="line">$ git rebase master</span><br><span class="line">First, rewinding head to replay your work on top of it...</span><br><span class="line">Applying: added staged <span class="built_in">command</span></span><br></pre></td></tr></table></figure>

<p>å®ƒçš„åŽŸç†æ˜¯é¦–å…ˆæ‰¾åˆ°è¿™ä¸¤ä¸ªåˆ†æ”¯ï¼ˆå³å½“å‰åˆ†æ”¯ <code>experiment</code>ã€å˜åŸºæ“ä½œçš„ç›®æ ‡åŸºåº•åˆ†æ”¯ <code>master</code>ï¼‰çš„æœ€è¿‘å…±åŒç¥–å…ˆ <code>C2</code>ï¼Œç„¶åŽå¯¹æ¯”å½“å‰åˆ†æ”¯ç›¸å¯¹äºŽè¯¥ç¥–å…ˆçš„åŽ†æ¬¡æäº¤ï¼Œæå–ç›¸åº”çš„ä¿®æ”¹å¹¶å­˜ä¸ºä¸´æ—¶æ–‡ä»¶ï¼Œç„¶åŽå°†å½“å‰åˆ†æ”¯æŒ‡å‘ç›®æ ‡åŸºåº• <code>C3</code>, æœ€åŽä»¥æ­¤å°†ä¹‹å‰å¦å­˜ä¸ºä¸´æ—¶æ–‡ä»¶çš„ä¿®æ”¹ä¾åºåº”ç”¨ã€‚ï¼ˆè¯‘æ³¨ï¼šå†™æ˜Žäº† commit idï¼Œä»¥ä¾¿ç†è§£ï¼Œä¸‹åŒï¼‰</p>
<p><img src="https://git-scm.com/book/en/v2/images/basic-rebase-3.png" alt="å°† `C4` ä¸­çš„ä¿®æ”¹å˜åŸºåˆ° `C3` ä¸Šã€‚"></p>
<p>Figure 37. å°† <code>C4</code> ä¸­çš„ä¿®æ”¹å˜åŸºåˆ° <code>C3</code> ä¸Š</p>
<p>çŽ°åœ¨å›žåˆ° <code>master</code> åˆ†æ”¯ï¼Œè¿›è¡Œä¸€æ¬¡å¿«è¿›åˆå¹¶ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">$ git merge experiment</span><br></pre></td></tr></table></figure>

<p><img src="https://git-scm.com/book/en/v2/images/basic-rebase-4.png" alt="master åˆ†æ”¯çš„å¿«è¿›åˆå¹¶ã€‚"></p>
<p>Figure 38. master åˆ†æ”¯çš„å¿«è¿›åˆå¹¶</p>
<p>æ­¤æ—¶ï¼Œ<code>C4&#39;</code> æŒ‡å‘çš„å¿«ç…§å°±å’Œä¸Šé¢ä½¿ç”¨ <code>merge</code> å‘½ä»¤çš„ä¾‹å­ä¸­ <code>C5</code> æŒ‡å‘çš„å¿«ç…§ä¸€æ¨¡ä¸€æ ·äº†ã€‚ è¿™ä¸¤ç§æ•´åˆæ–¹æ³•çš„æœ€ç»ˆç»“æžœæ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œä½†æ˜¯å˜åŸºä½¿å¾—æäº¤åŽ†å²æ›´åŠ æ•´æ´ã€‚ ä½ åœ¨æŸ¥çœ‹ä¸€ä¸ªç»è¿‡å˜åŸºçš„åˆ†æ”¯çš„åŽ†å²è®°å½•æ—¶ä¼šå‘çŽ°ï¼Œå°½ç®¡å®žé™…çš„å¼€å‘å·¥ä½œæ˜¯å¹¶è¡Œçš„ï¼Œä½†å®ƒä»¬çœ‹ä¸ŠåŽ»å°±åƒæ˜¯ä¸²è¡Œçš„ä¸€æ ·ï¼Œæäº¤åŽ†å²æ˜¯ä¸€æ¡ç›´çº¿æ²¡æœ‰åˆ†å‰ã€‚</p>
<p>ä¸€èˆ¬æˆ‘ä»¬è¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†ç¡®ä¿åœ¨å‘è¿œç¨‹åˆ†æ”¯æŽ¨é€æ—¶èƒ½ä¿æŒæäº¤åŽ†å²çš„æ•´æ´â€”â€”ä¾‹å¦‚å‘æŸä¸ªå…¶ä»–äººç»´æŠ¤çš„é¡¹ç›®è´¡çŒ®ä»£ç æ—¶ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ é¦–å…ˆåœ¨è‡ªå·±çš„åˆ†æ”¯é‡Œè¿›è¡Œå¼€å‘ï¼Œå½“å¼€å‘å®Œæˆæ—¶ä½ éœ€è¦å…ˆå°†ä½ çš„ä»£ç å˜åŸºåˆ° <code>origin/master</code> ä¸Šï¼Œç„¶åŽå†å‘ä¸»é¡¹ç›®æäº¤ä¿®æ”¹ã€‚ è¿™æ ·çš„è¯ï¼Œè¯¥é¡¹ç›®çš„ç»´æŠ¤è€…å°±ä¸å†éœ€è¦è¿›è¡Œæ•´åˆå·¥ä½œï¼Œåªéœ€è¦å¿«è¿›åˆå¹¶ä¾¿å¯ã€‚</p>
<p>è¯·æ³¨æ„ï¼Œæ— è®ºæ˜¯é€šè¿‡å˜åŸºï¼Œè¿˜æ˜¯é€šè¿‡ä¸‰æ–¹åˆå¹¶ï¼Œæ•´åˆçš„æœ€ç»ˆç»“æžœæ‰€æŒ‡å‘çš„å¿«ç…§å§‹ç»ˆæ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡æäº¤åŽ†å²ä¸åŒç½¢äº†ã€‚ å˜åŸºæ˜¯å°†ä¸€ç³»åˆ—æäº¤æŒ‰ç…§åŽŸæœ‰æ¬¡åºä¾æ¬¡åº”ç”¨åˆ°å¦ä¸€åˆ†æ”¯ä¸Šï¼Œè€Œåˆå¹¶æ˜¯æŠŠæœ€ç»ˆç»“æžœåˆåœ¨ä¸€èµ·ã€‚</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/07/31/FFmpeg/2019-07-31-ffmepg-cmds-2/">FFmpeg/2019-07-31-ffmepg-cmds-2</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-07-31</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/ffmpeg/">ffmpeg</a></span><div class="content"><p>1.é€šè¿‡ffmpegå¯¹AEç›´æŽ¥å¯¼å‡ºçš„å¤§æ–‡ä»¶åŽ‹ç¼©ï¼Œ(a.mov:16Mï¼Œa.mp4:2.7M)ï¼Œ(b.mov:13Mï¼Œa.mp4:1.6M)<br><code>ffmpeg -i a.mov -vcodec png a.mp4</code></p>
<p>2.å¯¹æ¨¡æ¿è§†é¢‘æ—¶é•¿è¿›è¡Œæ”¹å˜ï¼Œ(a.mp4:2.7Mï¼Œa_fittime.mp4:2.6M)<br><code>ffmpeg -i a.mp4 -vf setpts=0.96*PTS -vcodec png a_fittime.mp4</code><br>æ¨¡æ¿6.25ç§’ï¼Œç´ æ6ç§’ï¼Œç»è¿‡ä¸Šé¢çš„æ“ä½œæ¨¡æ¿å˜æˆ6.08ç§’</p>
<p>3.è§†é¢‘å åŠ ï¼Œ(intro_3_4.mp4:1.1Mï¼Œa_fit_add.mp4:424k)<br><code>ffmpeg -i intro_3_4.mp4 -i a_fittime.mp4 -filter_complex overlay -strict -2 a_fit_add.mp4</code></p>
<p>4.Preset</p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g7akqezzvtj30rv0j9dkl.jpg" alt="image"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ffoutputs += <span class="string">"[1:v]scale=if(gt(&#123;0&#125;/iw\, &#123;1&#125;/ih)\, -1\, &#123;0&#125;)"</span> \</span><br><span class="line">                       <span class="string">":if(gt(&#123;0&#125;/iw\, &#123;1&#125;/ih)\, &#123;1&#125;\, -1)[video];"</span>.format(dest_w, dest_h)</span><br></pre></td></tr></table></figure>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/07/07/Front-End/2019-07-07-front-end%20rendering/">Front-End Rendering!</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-07-07</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Front-End-Rendering/">Front-End-Rendering</a></span><div class="content"><h3 id="Front-End-Rendering"><a href="#Front-End-Rendering" class="headerlink" title="Front-End Rendering"></a>Front-End Rendering</h3><ul>
<li>å›¾ç‰‡ï¼šè£å‰ªï¼Œæ¨¡ç³Šï¼Œäº®åº¦ï¼Œå¯¹æ¯”åº¦ï¼Œé˜´å½±ï¼Œç°åº¦ï¼Œè‰²ç›¸æ—‹è½¬ï¼Œåè½¬ï¼Œé€æ˜Žåº¦ï¼Œé¥±å’Œåº¦ï¼Œè¤è‰²<br><a href="https://www.runoob.com/cssref/css3-pr-filter.html" target="_blank" rel="noopener">https://www.runoob.com/cssref/css3-pr-filter.html</a><br><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6nijqvpwvj31410kzgxe.jpg" alt="image-20190904152108270"></li>
</ul>
<ul>
<li><p>æ–‡å­—ï¼šæ¨¡ç³Šï¼Œé˜´å½±ï¼Œé€æ˜Žåº¦ï¼Œå‘å…‰ï¼Œæ¸å˜</p>
<p><a href="https://codepen.io/wuyeguangming/pen/jONaWXr" target="_blank" rel="noopener">https://codepen.io/wuyeguangming/pen/jONaWXr</a></p>
</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6nibg1wusj31kz0u0aua.jpg" alt=""></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6nij8edvlj31kc0u0nb7.jpg" alt="image-20190904152348021"></p>
<ul>
<li><p>åŠ¨æ•ˆï¼šä½ç§»ï¼Œç¼©æ”¾ï¼Œæ—‹è½¬ï¼Œæ¸å˜<br><a href="https://animejs.com/" target="_blank" rel="noopener">https://animejs.com/</a></p>
</li>
<li><p>ç‰©ç†å¼•æ“Žï¼šé‡åŠ›ã€ç¢°æ’žã€æ‘©æ“¦ã€é˜»åŠ›ã€æƒ¯æ€§ç­‰<br><a href="http://brm.io/matter-js/" target="_blank" rel="noopener">http://brm.io/matter-js/</a></p>
</li>
<li><p>è§†å·®æ•ˆæžœå¼•æ“Žï¼šè¿‘å¤§è¿œå°<br><a href="http://matthew.wagerfield.com/parallax/" target="_blank" rel="noopener">http://matthew.wagerfield.com/parallax/</a></p>
</li>
<li><p>3d<br><a href="https://threejs.org/examples/#webgl_animation_multiple" target="_blank" rel="noopener">https://threejs.org/examples/#webgl_animation_multiple</a></p>
</li>
<li><p>å»ºæ¨¡<br><a href="https://www.mixamo.com/#/" target="_blank" rel="noopener">https://www.mixamo.com/#/</a></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g6nijxu7ahj31l00u04qp.jpg" alt="image-20190904151945987"></p>
</li>
</ul>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://animejs.com/" target="_blank" rel="noopener">https://animejs.com/</a><br><a href="http://svgjs.com/" target="_blank" rel="noopener">http://svgjs.com</a><br><a href="https://daneden.github.io/animate.css/" target="_blank" rel="noopener">https://daneden.github.io/animate.css/</a></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/06/25/FFmpeg/2019-06-25-ffmpeg-cmds/">ffmpeg_cmds!</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-06-25</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/ffmpeg/">ffmpeg</a></span><div class="content"><h2 id="rm-black-sides"><a href="#rm-black-sides" class="headerlink" title="rm black sides"></a>rm black sides</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">â•°â”€â—‹ ffplay -i vn_hflip.mp4 -t 5 -vf cropdetect</span><br><span class="line">â•°â”€â—‹ ffplay -i vn_hflip.mp4 -t 5 -vf crop=1280:528:0:96</span><br></pre></td></tr></table></figure>

<h2 id="save-to-json"><a href="#save-to-json" class="headerlink" title="save to json"></a>save to json</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffprobe -hide_banner -print_format json -show_streams -i vn_hflip.mp4 &gt; vn_json_streams.log</span><br></pre></td></tr></table></figure>

<h2 id="check-error"><a href="#check-error" class="headerlink" title="check error"></a>check error</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffprobe -show_frames vn_hflip.mp4 &gt; vn_show_frames.log</span><br></pre></td></tr></table></figure>

<h2 id="video-to-pics"><a href="#video-to-pics" class="headerlink" title="video to pics"></a>video to pics</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i vn_hflip.mp4 -r 40 -f image2         -t 1 my%d.jpg        <span class="comment">## è·Ÿä¸‹ä¸€è¡Œæ¯”æœƒå¤šäº†å¹¾å¼µé‡è¦†çš„ï¼Œå› ç‚ºæ¯”ä¾†çš„videoå°±25fpsè€Œå·²</span></span><br><span class="line"><span class="string">""</span><span class="string">"2938"</span><span class="string">""</span>  ffmpeg -i vn_hflip.mp4 -r 25 -f image2 -t 1 my25_%d.jpg <span class="comment">## è·Ÿä¸Šä¸€è¡Œå‡ ä¹Žä¸€æ ·ï¼Œå°±æ˜¯æ­£å¸¸çš„25 rate</span></span><br><span class="line">ffmpeg -i vn_hflip.mp4 -vcodec mjpeg -ss 0:0:2 -t 0:0:1 0m%04d.jpg  <span class="comment">## è·Ÿä¸Šé¢æ¯”ä¸»è¦å°±æ˜¯ä»Žç¬¬äºŒç§’å¼€å§‹</span></span><br><span class="line"></span><br><span class="line">2937  ffmpeg -i vn_hflip.mp4 -r 40 -f image2 -t 1 my25_%d.jpg</span><br><span class="line">â˜…â˜…â˜… -r, -ss, -t  æœ¬æ¥çš„videoè¦å˜æˆçš„rateï¼Œå¼€å§‹ã€æŠ“å¤šä¹…</span><br><span class="line"></span><br><span class="line">ffmpeg -i vn_hflip.mp4 -ss 00:00:14.435 -vframes 1 out.png</span><br><span class="line">â˜…â˜…â˜… -vframes æŠ“å‡ å¼ </span><br></pre></td></tr></table></figure>

<h2 id="pics-to-video"><a href="#pics-to-video" class="headerlink" title="pics to video"></a>pics to video</h2><p>æŠŠå¤šä¸ªå›¾åƒæ–‡ä»¶ä½¿ç”¨h264ç¼–ç å°è£…æˆaviæ–‡ä»¶ï¼Œå¦‚æœ‰my0.jpg, my1.jpg â€¦ my99.jpg</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i my%d.jpg  -vcodec h264 my.avi</span><br></pre></td></tr></table></figure>



<p>-r é€‰é¡¹çš„ç”¨æ³•ï¼š</p>
<p>é¢„è®¾æ˜¯</p>
<p>ä»¥25FPSè¯»å…¥æ‰€æœ‰å›¾ç‰‡ï¼Œæ‰€ä»¥len(Images[])ä¼šæ˜¯è¾“å‡ºçš„videoçš„duration. </p>
<p>ä½œå‡º25FPSçš„video, æ‰€ä»¥å¦‚æžœ -råŠ åœ¨ outputå‰é¢ï¼Œä¼šè¿›è¡Œæ’å¸§ã€åˆ å¸§ã€‚</p>
<p>å¦‚æžœ-råŠ åœ¨ inputå‰é¢ï¼Œå°±æ˜¯æ¯ç§’è¯»è¿›æ¥å‡ å¼ å›¾ç‰‡</p>
<p>å¦‚æžœã€€ffmpeg -r 10 -i z-%5d.jpeg -vcodec h264 -r 60 out10in60out.mp4</p>
<p>é‚£ä¹ˆå› ä¸ºæ¯ç§’è¯»è¿›æ¥10å¼ è€Œå·²ï¼Œç¡¬åšæˆ60fpsçš„videoï¼Œä¹Ÿæ˜¯æ²¡ç”¨ï¼Œå› ä¸ºä¸­é—´åªæ˜¯å†…æ’æˆäº†60fps</p>
<h2 id="video-to-gif"><a href="#video-to-gif" class="headerlink" title="video to gif"></a>video to gif</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i vn_hflip.mp4 -ss 0 -r 1 -vframes 6 vn.gif</span><br><span class="line">ffmpeg -i vn_hflip.mp4 -ss 0 -vf fps=1 -vframes 6 vn_fps.gif <span class="comment"># è¿™ä¸ªä¼¼ä¹Žæ¯”ä¸Šé¢çš„å¥½ä¸€äº›</span></span><br></pre></td></tr></table></figure>




<p>##EXTRACTION !!!</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> 2999  ffmpeg -i ../vn_hflip.mp4 -ss 00:00:00 -t 10 -vf fps=1 fps1_%d.png</span><br><span class="line">(joe_py36) â”Œâ”€[joe@JoeMBP2] - [~/Movies/exp/tmp] - [3003]</span><br><span class="line">â””â”€[$] <span class="built_in">history</span> | grep r1                                                                                                                                                                           [22:06:04]</span><br><span class="line"> 2975  ffmpeg -i ../vn_hflip.mp4 -r 1 r1_%d.png</span><br><span class="line"> 2977  ffmpeg -i ../vn_hflip.mp4 -r 1 -vframes 6 r1_vframes_%d.png</span><br></pre></td></tr></table></figure>







<h2 id="add-logo"><a href="#add-logo" class="headerlink" title="add logo"></a>add logo</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i vn_hflip.mp4 -i ~/Pictures/Sackboy_0.jpeg -filter_complex overlay=W-w:H-h vn_logo.avi</span><br><span class="line">    å¦‚å³ä¸‹è§’: ffmpeg -i God.rm -i logo.png -filter_complex overlay=W-w:H-h my.avi</span><br><span class="line">    å¦‚å±…ä¸­:  ffmpeg -i God.rm -i logo.png -filter_complex overlay=W/2-w/2:H/2-h/2 my.avi</span><br></pre></td></tr></table></figure>



</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/06/07/Web/2019-06-07-Requests'%20secret:%20pool_connections%20and%20pool_maxsize/">Web/2019-06-07-Requests' secret: pool_connections and pool_maxsize</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-06-07</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Web/">Web</a></span><div class="content"><p>from: <a href="https://www.cnblogs.com/pengyusong/p/5802929.html" target="_blank" rel="noopener">https://www.cnblogs.com/pengyusong/p/5802929.html</a></p>
<p>and <a href="https://laike9m.com/blog/requests-secret-pool_connections-and-pool_maxsize,89/" target="_blank" rel="noopener">https://laike9m.com/blog/requests-secret-pool_connections-and-pool_maxsize,89/</a></p>
<h1 id="Requestsâ€™-secret-pool-connections-and-pool-maxsize"><a href="#Requestsâ€™-secret-pool-connections-and-pool-maxsize" class="headerlink" title="Requestsâ€™ secret: pool_connections and pool_maxsize"></a><strong>Requestsâ€™ secret: pool_connections and pool_maxsize</strong></h1><p><a href="http://docs.python-requests.org/en/latest/" target="_blank" rel="noopener">Requests</a> æ˜¯ä¸€ä¸ªpythonå¼€å‘è€…ä¼—æ‰€å‘¨çŸ¥çš„ç¬¬ä¸‰æ–¹åº“ã€‚å› å…¶ç®€å•çš„APIå’Œé«˜æ€§èƒ½ï¼Œå¤§å¤šæ•°äººå€¾å‘äºŽä½¿ç”¨requestsè€Œä¸æ˜¯urllib2ä½œä¸ºè®¿é—®httpçš„æ ‡å‡†åº“ã€‚ç„¶è€Œå¾ˆå¤šä½¿ç”¨requestsåº“çš„äººå¯èƒ½ä¸çŸ¥é“å†…éƒ¨åŽŸå› ï¼Œä»Šå¤©æˆ‘å°±æ¥è§£é‡Šä»¥ä¸‹ä¿©ä¸ªæ¦‚å¿µ: <code>pool_connections</code> å’Œ<code>pool_maxsize</code>.</p>
<p>ä»Ž <code>Session å¼€å§‹</code>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">s = requests.Session()</span><br><span class="line">s.get(<span class="string">'https://www.google.com'</span>)</span><br></pre></td></tr></table></figure>

<p>è¿™å¾ˆç®€å•ï¼Œä½ å¯èƒ½çŸ¥é“requestsâ€™ <code>Session</code> æŒæœ‰cookie. ä½†ä½ çŸ¥é“ <code>Session</code> æœ‰ä¸€ä¸ª <a href="http://docs.python-requests.org/en/latest/api/#requests.Session.mount" target="_blank" rel="noopener"><code>mount</code></a> æ–¹æ³•å—?</p>
<blockquote>
<p><code>mount(prefix, adapter)</code><br>Registers a connection adapter to a prefix.<br>Adapters are sorted in descending order by key length.</p>
</blockquote>
<p>ä¸çŸ¥é“ï¼Ÿå¾ˆå¥½ï¼Œå®žé™…ä¸Šä½ å·²ç»ä½¿ç”¨äº†è¿™ä¸ªæ–¹æ³•å½“ä½ åˆå§‹åŒ–ä¸€ä¸ªsessionå¯¹è±¡æ—¶:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Session</span><span class="params">(SessionRedirectMixin)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        ...</span><br><span class="line">        <span class="comment"># Default connection adapters.</span></span><br><span class="line">        self.adapters = OrderedDict()</span><br><span class="line">        self.mount(<span class="string">'https://'</span>, HTTPAdapter())</span><br><span class="line">        self.mount(<span class="string">'http://'</span>, HTTPAdapter())</span><br></pre></td></tr></table></figure>

<p>çŽ°åœ¨ï¼Œåˆ°äº†æœ‰è¶£çš„éƒ¨åˆ†ã€‚å¦‚æžœä½ é˜…è¯»è¿‡ Ian Cordascoâ€™s æ–‡ç«  <a href="http://www.coglib.com/~icordasc/blog/2014/12/retries-in-requests.html" target="_blank" rel="noopener">Retries in Requests</a>, ä½ åº”è¯¥çŸ¥é“ <code>HTTPAdapter</code> å¯ä»¥æä¾›é‡è¯•åŠŸèƒ½. ä½†ä¸€ä¸ª <code>HTTPAdapter</code> çœŸå®žæ˜¯ä»€ä¹ˆ? Quoted from <a href="http://docs.python-requests.org/en/latest/api/#requests.adapters.HTTPAdapter" target="_blank" rel="noopener">doc</a>:</p>
<blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">requests</span>.<span class="title">adapters</span>.<span class="title">HTTPAdapter</span><span class="params">(pool_connections=<span class="number">10</span>, pool_maxsize=<span class="number">10</span>, max_retries=<span class="number">0</span>, pool_block=False)</span></span></span><br></pre></td></tr></table></figure>

<p>The built-in HTTP Adapter for urllib3.</p>
<p>Provides a general-case interface for Requests sessions to contact HTTP and HTTPS urls by implementing the Transport Adapter interface. This class will usually be created by the Session class under the covers.</p>
<p>Parameters:</p>
<ul>
<li><code>pool_connections</code> â€“ The number of urllib3 connection pools to cache.</li>
<li><code>pool_maxsize</code> â€“ The maximum number of connections to save in the pool.</li>
<li><code>max_retries(int)</code> â€“ The maximum number of retries each connection should attempt. Note, this applies only to failed DNS lookups, socket connections and connection timeouts, never to requests where data has made it to the server. By default, Requests does not retry failed connections. If you need granular control over the conditions under which we retry a request, import urllib3â€™s Retry class and pass that instead.</li>
<li><code>pool_block</code> â€“ Whether the connection pool should block for connections. Usage:</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; <span class="keyword">import</span> requests</span><br><span class="line">&gt;&gt; s = requests.Session()</span><br><span class="line">&gt;&gt; a = requests.adapters.HTTPAdapter(max_retries=<span class="number">3</span>)</span><br><span class="line">&gt;&gt; s.mount(<span class="string">'http://'</span>, a)</span><br></pre></td></tr></table></figure>
</blockquote>
<p>å¦‚æžœä¸Šé¢çš„æ–‡æ¡£ä½¿ä½ è¿·æƒ‘ï¼Œè¿™é‡Œæ˜¯æˆ‘çš„è§£é‡Š: HTTP Adapter æ‰€åšçš„å°±æ˜¯ï¼šæ ¹æ®ä¸åŒçš„ç›®æ ‡urlï¼Œå¯¹æ¯ä¸ªä¸åŒçš„è¯·æ±‚æä¾›ä¸åŒçš„é…ç½®ï¼Œè¿˜è®°å¾—ä¸Šé¢çš„ä»£ç å—ï¼Ÿ</p>
<p>ã€€ã€€ã€€ã€€what HTTP Adapter does is simply <strong>providing different configurations for different requests according to target url</strong>. Remember the code above?</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">self.mount(<span class="string">'https://'</span>, HTTPAdapter())</span><br><span class="line">self.mount(<span class="string">'http://'</span>, HTTPAdapter())</span><br></pre></td></tr></table></figure>

<p>å®ƒåˆ›å»ºäº†ä¿©ä¸ª <code>HTTPAdapter</code> å¯¹è±¡ä½¿ç”¨é»˜è®¤çš„å‚æ•°ï¼š<code>pool_connections=10, pool_maxsize=10, max_retries=0, pool_block=False</code>, å¹¶ä¸”æŒ‚è½½åˆ° <code>https://</code> å’Œ <code>http:// ç›¸å¯¹è·¯å¾„</code>, æ„æ€æ˜¯ç¬¬ä¸€ä¸ªé…ç½®åœ¨ä½ è®¿é—® <code>http://xxx ä¼šä½¿ç”¨åˆ°ï¼Œ ç¬¬äºŒä¸ªä¼šåœ¨ä½ è®¿é—® ``https://xxx</code>. å°½ç®¡ä¸Šé¢ä¿©ä¸ªé…ç½®æ˜¯ç›¸åŒçš„ï¼Œè¯·æ±‚httpå’Œhttpsä»ç„¶æ˜¯éš”ç¦»çš„ã€‚æˆ‘ä»¬ä¼šåœ¨ä¸‹é¢çœ‹åˆ°è¯´æ˜Žã€‚</p>
<p>å°±åƒæˆ‘è¯´çš„ï¼Œè¿™ç¯‡æ–‡ç« çš„ç›®çš„ä¸»è¦æ˜¯è§£é‡Š <code>pool_connections</code> and <code>pool_maxsize</code>.</p>
<p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ <code>pool_connections</code>. æ˜¨å¤©æˆ‘åœ¨stackoverflowæå‡ºäº†ä¸€ä¸ªé—®é¢˜ï¼š<a href="http://stackoverflow.com/questions/34837026/whats-the-meaning-of-pool-connections-in-requests-adapters-httpadapter" target="_blank" rel="noopener">question</a> ï¼Œå› ä¸ºæˆ‘ä¸ç¡®å®šæˆ‘æ˜¯å¦ç†è§£æ­£ç¡®ï¼Œè¿™ä¸ªé—®é¢˜çš„å›žç­”æ¶ˆé™¤äº†æˆ‘çš„ä¸ç¡®å®šæ€§ã€‚HTTPï¼Œä¼—æ‰€å‘¨çŸ¥ï¼Œæ˜¯åŸºäºŽTCPåè®®ï¼Œä¸€ä¸ªHTTPè¿žæŽ¥ä¹Ÿæ˜¯ä¸€ä¸ªTCPè¿žæŽ¥ï¼Œå®ƒæ˜¯ç”±ä¸€ä¸ªäº”å…ƒç»„å”¯ä¸€æ ‡è¯†:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(&lt;protocol&gt;, &lt;src addr&gt;, &lt;src port&gt;, &lt;dest addr&gt;, &lt;dest port&gt;)</span><br></pre></td></tr></table></figure>

<p>å°±æ˜¯è¯´ï¼Œä½ é’ˆå¯¹ <code>www.example.com å»ºç«‹äº†ä¸€ä¸ªHTTP/TCPè¿žæŽ¥</code>, å‡è®¾æœåŠ¡å™¨æ”¯æŒ <code>Keep-Alive</code>, ä¸‹ä¸€æ¬¡ä½ å‘é€è¯·æ±‚åˆ° <code>www.example.com/a</code> or <code>www.example.com/b</code>, ä½ å¯ä»¥ä½¿ç”¨ç›¸åŒçš„è¿žæŽ¥ï¼Œå› ä¸ºäº”å…ƒç»„æ²¡æœ‰æ”¹å˜. å®žé™…ä¸Š, <a href="http://docs.python-requests.org/en/latest/user/advanced/#keep-alive" target="_blank" rel="noopener">requestsâ€™ Session è‡ªåŠ¨ä¼šå¸®ä½ å¤„ç†</a> å¹¶ä¸”é‡ç”¨è¿žæŽ¥ï¼Œåªè¦å®ƒèƒ½.</p>
<p>è¿™ä¸ªé—®é¢˜æ˜¯ï¼Œä»€ä¹ˆå†³å®šäº†ä½ æ˜¯å¦å¯ä»¥é‡ç”¨è€çš„è¿žæŽ¥ï¼Ÿæ˜¯çš„ï¼Œå°±æ˜¯ <code>pool_connections</code>!</p>
<blockquote>
<p>pool_connections â€“ The number of urllib3 connection pools to cache.</p>
</blockquote>
<p>æˆ‘çŸ¥é“ï¼Œæˆ‘çŸ¥é“ï¼Œæˆ‘ä¹Ÿä¸æƒ³å¼•å…¥å¾ˆå¤šæœ¯è¯­, è¿™æ˜¯æœ€åŽä¸€ä¸ªï¼Œæˆ‘å‘èª“. ç®€å•çš„ç†è§£å®ƒï¼Œ ä¸€ä¸ªhostå¯¹åº”çš„ä¸€ä¸ªè¿žæŽ¥æ± ï¼š<strong>one connection pool corresponds to one host</strong>, å—¯ï¼Œå°±æ˜¯è¿™ä¸ªæ„æ€.</p>
<p>è¿™æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œæ— å…³çš„è¡Œå·²è¢«å¿½ç•¥:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">s = requests.Session()</span><br><span class="line">s.mount(<span class="string">'https://'</span>, HTTPAdapter(pool_connections=1))</span><br><span class="line">s.get(<span class="string">'https://www.baidu.com'</span>)</span><br><span class="line">s.get(<span class="string">'https://www.zhihu.com'</span>)</span><br><span class="line">s.get(<span class="string">'https://www.baidu.com'</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">""</span><span class="string">"output</span></span><br><span class="line"><span class="string">INFO:requests.packages.urllib3.connectionpool:Starting new HTTPS connection (1): www.baidu.com</span></span><br><span class="line"><span class="string">DEBUG:requests.packages.urllib3.connectionpool:"</span>GET / HTTP/1.1<span class="string">" 200 None</span></span><br><span class="line"><span class="string">INFO:requests.packages.urllib3.connectionpool:Starting new HTTPS connection (1): www.zhihu.com</span></span><br><span class="line"><span class="string">DEBUG:requests.packages.urllib3.connectionpool:"</span>GET / HTTP/1.1<span class="string">" 200 2621</span></span><br><span class="line"><span class="string">INFO:requests.packages.urllib3.connectionpool:Starting new HTTPS connection (1): www.baidu.com</span></span><br><span class="line"><span class="string">DEBUG:requests.packages.urllib3.connectionpool:"</span>GET / HTTP/1.1<span class="string">" 200 None</span></span><br><span class="line"><span class="string">"</span><span class="string">""</span></span><br></pre></td></tr></table></figure>

<p><code>HTTPAdapter(pool_connections=1)</code> è¢«æ˜ å°„åˆ° <code>https://</code>, ä»–æ„æ€æ˜¯åœ¨åŒä¸€æ—¶é—´ä»…æœ‰ä¸€ä¸ªè¿žæŽ¥æ± . åœ¨è°ƒç”¨ <code>s.get(&#39;https://www.baidu.com&#39;)</code>, ç¼“å­˜çš„è¿žæŽ¥æ± æ˜¯ <code>connectionpool(&#39;https://www.baidu.com&#39;)</code>. çŽ°åœ¨ <code>s.get(&#39;https://www.zhihu.com&#39;)</code> æ¥äº†ï¼Œè¿™ä¸ªsessionå‘çŽ°ä»–ä¸èƒ½ä½¿ç”¨ç¼“å­˜çš„è¿žæŽ¥ï¼Œå› ä¸ºä»–ä¸æ˜¯ç›¸åŒçš„host(one connection pool corresponds to one host, remember?). å› æ­¤sessionä¸å¾—ä¸åˆ›å»ºä¸€ä¸ªæ–°çš„è¿žæŽ¥æ± . å› ä¸º <code>pool_connections=1</code>, sessionä¸èƒ½åœ¨åŒä¸€æ—¶é—´æŒæœ‰ä¿©ä¸ªè¿žæŽ¥æ± , å› æ­¤ä»–ä¸¢å¼ƒäº†æ—§çš„è¿žæŽ¥æ± ï¼š <code>connectionpool(&#39;https://www.baidu.com&#39;)</code> å¹¶ä¸”ä¿å­˜äº†æ–°çš„ï¼š<code>connectionpool(&#39;https://www.zhihu.com&#39;)</code>. ä¸‹ä¸€æ¬¡getåŒæ ·å¦‚æ­¤Next <code>get</code> is the same. è¿™å°±æ˜¯æˆ‘ä»¬çœ‹è§ä¸‰ä¸ª <code>Starting new HTTPS connection</code> æ—¥å¿—è¡Œçš„åŽŸå› </p>
<p>å¦‚æžœæˆ‘ä»¬è®¾ç½® <code>pool_connections</code> ä¸º 2:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">s = requests.Session()</span><br><span class="line">s.mount(<span class="string">'https://'</span>, HTTPAdapter(pool_connections=2))</span><br><span class="line">s.get(<span class="string">'https://www.baidu.com'</span>)</span><br><span class="line">s.get(<span class="string">'https://www.zhihu.com'</span>)</span><br><span class="line">s.get(<span class="string">'https://www.baidu.com'</span>)</span><br><span class="line"><span class="string">""</span><span class="string">"output</span></span><br><span class="line"><span class="string">INFO:requests.packages.urllib3.connectionpool:Starting new HTTPS connection (1): www.baidu.com</span></span><br><span class="line"><span class="string">DEBUG:requests.packages.urllib3.connectionpool:"</span>GET / HTTP/1.1<span class="string">" 200 None</span></span><br><span class="line"><span class="string">INFO:requests.packages.urllib3.connectionpool:Starting new HTTPS connection (1): www.zhihu.com</span></span><br><span class="line"><span class="string">DEBUG:requests.packages.urllib3.connectionpool:"</span>GET / HTTP/1.1<span class="string">" 200 2623</span></span><br><span class="line"><span class="string">DEBUG:requests.packages.urllib3.connectionpool:"</span>GET / HTTP/1.1<span class="string">" 200 None</span></span><br><span class="line"><span class="string">"</span><span class="string">""</span></span><br></pre></td></tr></table></figure>

<p>å¾ˆå¥½ï¼ŒçŽ°åœ¨æˆ‘ä»¬å¯ä»¥åˆ›å»ºè¿žæŽ¥ä¿©æ¬¡äº†å¹¶ä¸”ä¿æŒè¿žæŽ¥æ´»è·ƒ</p>
<p>æœ€åŽ, <code>pool_maxsize</code>.</p>
<p>é¦–å…ˆ, ä»…å½“ä½ åœ¨å¤šçº¿ç¨‹çŽ¯å¢ƒä¸‹ä½¿ç”¨sessionï¼Œä½ æ‰åº”è¯¥å…³å¿ƒ <code>pool_maxsize</code> , ä¾‹å¦‚ï¼Œä»Žå¤šä¸ªçº¿ç¨‹ä½¿ç”¨åŒä¸€ä¸ªsessionå‘å‡ºå¹¶å‘è¯·æ±‚.</p>
<p>å®žé™…ä¸Šï¼Œ<code>pool_maxsize</code> æ˜¯ä¸€ä¸ªç”¨æ¥åˆå§‹åŒ–urllib3â€™s <code>HTTPConnectionPoolçš„å‚æ•°</code>, å®ƒæ‰æ˜¯çœŸæ­£å«ä¹‰ä¸Šçš„è¿žæŽ¥æ± . <code>HTTPConnectionPool</code> æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œé’ˆå¯¹äºŽç‰¹å®šçš„hostä¿å­˜è¿žæŽ¥çš„é›†åˆ, ä¸” <code>pool_maxsize</code> æ˜¯è¿™ä¸ªé›†åˆçš„æœ€å¤§å€¼. å¦‚æžœä½ è¿è¡Œä½ çš„ä»£ç åœ¨åŒä¸€ä¸ªçº¿ç¨‹ï¼Œå®ƒæ˜¯ä¸å¯èƒ½é’ˆå¯¹å¤šä¸ªä¸»æœºåˆ›å»ºå¤šä¸ªè¿žæŽ¥çš„ï¼Œå› ä¸º requests library æ˜¯é˜»å¡žçš„, å› æ­¤HTTPè¯·æ±‚æ€»æ˜¯ä¸€ä¸ªæŽ¥ç€ä¸€ä¸ªå‘é€.</p>
<p>å¦‚æžœä½¿ç”¨å¤šçº¿ç¨‹å°±ä¼šä¸ä¸€æ ·.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">def thread_get(url):</span><br><span class="line">    s.get(url)</span><br><span class="line"></span><br><span class="line">s = requests.Session()</span><br><span class="line">s.mount(<span class="string">'https://'</span>, HTTPAdapter(pool_connections=1, pool_maxsize=2))</span><br><span class="line">t1 = Thread(target=thread_get, args=(<span class="string">'https://www.zhihu.com'</span>,))</span><br><span class="line">t2 = Thread(target=thread_get, args=(<span class="string">'https://www.zhihu.com/question/36612174'</span>,))</span><br><span class="line">t1.start();t2.start()</span><br><span class="line">t1.join();t2.join()</span><br><span class="line">t3 = Thread(target=thread_get, args=(<span class="string">'https://www.zhihu.com/question/39420364'</span>,))</span><br><span class="line">t4 = Thread(target=thread_get, args=(<span class="string">'https://www.zhihu.com/question/21362402'</span>,))</span><br><span class="line">t3.start();t4.start()</span><br><span class="line"><span class="string">""</span><span class="string">"output</span></span><br><span class="line"><span class="string">INFO:requests.packages.urllib3.connectionpool:Starting new HTTPS connection (1): www.zhihu.com</span></span><br><span class="line"><span class="string">INFO:requests.packages.urllib3.connectionpool:Starting new HTTPS connection (2): www.zhihu.com</span></span><br><span class="line"><span class="string">DEBUG:requests.packages.urllib3.connectionpool:"</span>GET /question/36612174 HTTP/1.1<span class="string">" 200 21906</span></span><br><span class="line"><span class="string">DEBUG:requests.packages.urllib3.connectionpool:"</span>GET / HTTP/1.1<span class="string">" 200 2606</span></span><br><span class="line"><span class="string">DEBUG:requests.packages.urllib3.connectionpool:"</span>GET /question/21362402 HTTP/1.1<span class="string">" 200 57556</span></span><br><span class="line"><span class="string">DEBUG:requests.packages.urllib3.connectionpool:"</span>GET /question/39420364 HTTP/1.1<span class="string">" 200 28739</span></span><br><span class="line"><span class="string">"</span><span class="string">""</span></span><br></pre></td></tr></table></figure>

<p>çœ‹è§äº†å—? å®ƒä¸ºç›¸åŒçš„hostå»ºç«‹äº†ä¿©ä¸ªè¿žæŽ¥ï¼š <code>www.zhihu.com</code>, å°±åƒæˆ‘è¯´çš„, è¿™ä¸ªä»…å‘ç”Ÿåœ¨å¤šçº¿ç¨‹çŽ¯å¢ƒä¸‹. åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªè¿žæŽ¥æ± ï¼Œä½¿ç”¨äº†å‚æ•° <code>pool_maxsize=2</code>, å‘çŽ°åŒä¸€æ—¶é—´ä¸ä¼šè¶…è¿‡ä¿©ä¸ªè¿žæŽ¥ï¼Œå› æ­¤è¿™æ˜¯è¶³å¤Ÿçš„ï¼Œæˆ‘ä»¬çœ‹åˆ°<code>t3</code> å’Œ <code>t4</code> æ²¡æœ‰åˆ›å»ºæ–°çš„è¿žæŽ¥ï¼Œä»–ä»¬é‡ç”¨äº†å°±çš„è¿žæŽ¥.</p>
<p>å¦‚æžœæ²¡æœ‰è¶³å¤Ÿçš„å¤§å°å‘¢?</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">s = requests.Session()</span><br><span class="line">s.mount(<span class="string">'https://'</span>, HTTPAdapter(pool_connections=1, pool_maxsize=1))</span><br><span class="line">t1 = Thread(target=thread_get, args=(<span class="string">'https://www.zhihu.com'</span>,))</span><br><span class="line">t2 = Thread(target=thread_get, args=(<span class="string">'https://www.zhihu.com/question/36612174'</span>,))</span><br><span class="line">t1.start()</span><br><span class="line">t2.start()</span><br><span class="line">t1.join();t2.join()</span><br><span class="line">t3 = Thread(target=thread_get, args=(<span class="string">'https://www.zhihu.com/question/39420364'</span>,))</span><br><span class="line">t4 = Thread(target=thread_get, args=(<span class="string">'https://www.zhihu.com/question/21362402'</span>,))</span><br><span class="line">t3.start();t4.start()</span><br><span class="line">t3.join();t4.join()</span><br><span class="line"><span class="string">""</span><span class="string">"output</span></span><br><span class="line"><span class="string">INFO:requests.packages.urllib3.connectionpool:Starting new HTTPS connection (1): www.zhihu.com</span></span><br><span class="line"><span class="string">INFO:requests.packages.urllib3.connectionpool:Starting new HTTPS connection (2): www.zhihu.com</span></span><br><span class="line"><span class="string">DEBUG:requests.packages.urllib3.connectionpool:"</span>GET /question/36612174 HTTP/1.1<span class="string">" 200 21906</span></span><br><span class="line"><span class="string">DEBUG:requests.packages.urllib3.connectionpool:"</span>GET / HTTP/1.1<span class="string">" 200 2606</span></span><br><span class="line"><span class="string">WARNING:requests.packages.urllib3.connectionpool:Connection pool is full, discarding connection: www.zhihu.com</span></span><br><span class="line"><span class="string">INFO:requests.packages.urllib3.connectionpool:Starting new HTTPS connection (3): www.zhihu.com</span></span><br><span class="line"><span class="string">DEBUG:requests.packages.urllib3.connectionpool:"</span>GET /question/39420364 HTTP/1.1<span class="string">" 200 28739</span></span><br><span class="line"><span class="string">DEBUG:requests.packages.urllib3.connectionpool:"</span>GET /question/21362402 HTTP/1.1<span class="string">" 200 57556</span></span><br><span class="line"><span class="string">WARNING:requests.packages.urllib3.connectionpool:Connection pool is full, discarding connection: www.zhihu.com</span></span><br><span class="line"><span class="string">"</span><span class="string">""</span></span><br></pre></td></tr></table></figure>

<p>çŽ°åœ¨, <code>pool_maxsize=1</code>ï¼Œä¼šæ‰“å°è­¦å‘Šæ—¥å¿—å¦‚ä¸‹ï¼Œå°±åƒä¸‹é¢çš„:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Connection pool is full, discarding connection: www.zhihu.com</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥æ³¨æ„åˆ°ä»…æœ‰ä¸€ä¸ªè¿žæŽ¥è¢«ä¿å­˜åœ¨è¿žæŽ¥æ± ä¸­, ä¸ºt3æˆ–è€…t4åˆ›å»ºä¸€ä¸ªæ–°çš„è¿žæŽ¥. å¾ˆæ˜Žæ˜¾è¿™æ˜¯ä¸å¤Ÿçš„. è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨ urllib3â€™s æ–‡æ¡£ä¸­è¯´æ˜Žå¦‚ä¸‹:</p>
<blockquote>
<p>å¦‚æžœä½ è®¡åˆ’åœ¨è¿žæŽ¥æ± çŽ¯å¢ƒä¸‹ä½¿ç”¨ä¸€ä¸ªè¿žæŽ¥æ± , ä½ åº”è¯¥è®¾ç½®è¿žæŽ¥æ± æœ€å¤§æ•°é‡ä¸ºä¸€ä¸ªæ¯”è¾ƒé«˜çš„å€¼ï¼Œä¾‹å¦‚å’Œçº¿ç¨‹çš„æ•°é‡ç›¸åŒ.</p>
</blockquote>
<p>æœ€åŽ, <code>HTTPAdapter</code> å®žä¾‹æ˜ å°„åˆ°ä¸åŒçš„å‰ç¼€æ˜¯ç›¸äº’ç‹¬ç«‹çš„.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">s = requests.Session()</span><br><span class="line">s.mount(<span class="string">'https://'</span>, HTTPAdapter(pool_connections=1, pool_maxsize=2))</span><br><span class="line">s.mount(<span class="string">'https://baidu.com'</span>, HTTPAdapter(pool_connections=1, pool_maxsize=1))</span><br><span class="line">t1 = Thread(target=thread_get, args=(<span class="string">'https://www.zhihu.com'</span>,))</span><br><span class="line">t2 =Thread(target=thread_get, args=(<span class="string">'https://www.zhihu.com/question/36612174'</span>,))</span><br><span class="line">t1.start();t2.start()</span><br><span class="line">t1.join();t2.join()</span><br><span class="line">t3 = Thread(target=thread_get, args=(<span class="string">'https://www.zhihu.com/question/39420364'</span>,))</span><br><span class="line">t4 = Thread(target=thread_get, args=(<span class="string">'https://www.zhihu.com/question/21362402'</span>,))</span><br><span class="line">t3.start();t4.start()</span><br><span class="line">t3.join();t4.join()</span><br><span class="line"><span class="string">""</span><span class="string">"output</span></span><br><span class="line"><span class="string">INFO:requests.packages.urllib3.connectionpool:Starting new HTTPS connection (1): www.zhihu.com</span></span><br><span class="line"><span class="string">INFO:requests.packages.urllib3.connectionpool:Starting new HTTPS connection (2): www.zhihu.com</span></span><br><span class="line"><span class="string">DEBUG:requests.packages.urllib3.connectionpool:"</span>GET /question/36612174 HTTP/1.1<span class="string">" 200 21906</span></span><br><span class="line"><span class="string">DEBUG:requests.packages.urllib3.connectionpool:"</span>GET / HTTP/1.1<span class="string">" 200 2623</span></span><br><span class="line"><span class="string">DEBUG:requests.packages.urllib3.connectionpool:"</span>GET /question/39420364 HTTP/1.1<span class="string">" 200 28739</span></span><br><span class="line"><span class="string">DEBUG:requests.packages.urllib3.connectionpool:"</span>GET /question/21362402 HTTP/1.1<span class="string">" 200 57669</span></span><br><span class="line"><span class="string">"</span><span class="string">""</span></span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„ä»£ç å¾ˆå®¹æ˜“ï¼Œä¸éœ€è¦å†æ¬¡è§£é‡Šäº†.</p>
<p>å°±è¿™æ ·äº†ï¼Œå¸Œæœ›è¿™ç¯‡æ–‡ç« å¸®åŠ©ä½ æ›´å¥½çš„ç†è§£requestsåº“. é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªgist <a href="https://gist.github.com/laike9m/ead19c65a416c7022c00" target="_blank" rel="noopener">here</a> è¿™é‡ŒåŒ…å«è¿™ç¯‡æ–‡ç« çš„æµ‹è¯•ä»£ç . éšä¾¿ä¸‹è½½å¹¶å°è¯•å§</p>
<h2 id="Appendix"><a href="#Appendix" class="headerlink" title="Appendix"></a>Appendix</h2><ol>
<li><p>For https, requests uses urllib3â€™s <a href="http://urllib3.readthedocs.org/en/latest/pools.html#urllib3.connectionpool.HTTPSConnectionPool" target="_blank" rel="noopener">HTTPSConnectionPool</a>, but itâ€™s pretty much the same as HTTPConnectionPool so I didnâ€™t differeniate them in this article.</p>
</li>
<li><p><code>Session</code>â€˜s <code>mount</code> method ensures the longest prefix gets matched first. Its implementation is pretty interesting so I posted it here.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mount</span><span class="params">(self, prefix, adapter)</span>:</span></span><br><span class="line">    <span class="string">"""Registers a connection adapter to a prefix.</span></span><br><span class="line"><span class="string">    Adapters are sorted in descending order by key length."""</span></span><br><span class="line">    self.adapters[prefix] = adapter</span><br><span class="line">    keys_to_move = [k <span class="keyword">for</span> k <span class="keyword">in</span> self.adapters <span class="keyword">if</span> len(k) &lt; len(prefix)]</span><br><span class="line">    <span class="keyword">for</span> key <span class="keyword">in</span> keys_to_move:</span><br><span class="line">        self.adapters[key] = self.adapters.pop(key)</span><br></pre></td></tr></table></figure>

<p>Note that <code>self.adapters</code> is an <code>OrderedDict</code>.</p>
</li>
</ol>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/05/03/LC/2019-05-03-Remove-Element/">LC/2019-05-03-Remove-Element</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-05-03</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/LC/">LC</a></span><div class="content"><p>RemoveElement</p>
<p>â€‹</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/02/18/SQL/2019-02-18-SQL/">SQL/2019-02-18-SQL</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-02-18</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/SQL/">SQL</a></span><div class="content"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> celebs </span><br><span class="line"><span class="keyword">WHERE</span> twitter_handle <span class="keyword">IS</span> <span class="literal">NULL</span>;</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> celebs; </span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> awards (</span><br><span class="line">  <span class="keyword">id</span> <span class="built_in">INTEGER</span> PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line">  recipient <span class="built_in">TEXT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  award_name <span class="built_in">TEXT</span> <span class="keyword">DEFAULT</span> <span class="string">'Grammy'</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>





<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- name	location	category	employees	raised	valuation	founded	stage	ceo	info</span></span><br><span class="line"><span class="comment">-- Pied Piper	Silicon Valley	Cloud Computing	6	5000000	50000000	2014	A	Richard Hendricks	A Middle-Out Compression Solution</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- select * from startups;</span></span><br><span class="line"><span class="comment">-- select count(*)  from startups;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- select sum(valuation)  from startups;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- select max(raised)  from startups;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- -- 5</span></span><br><span class="line"><span class="comment">-- select max(raised)  </span></span><br><span class="line"><span class="comment">-- from startups</span></span><br><span class="line"><span class="comment">-- where stage = 'Seed';</span></span><br><span class="line"><span class="comment">-- -- 6</span></span><br><span class="line"><span class="comment">-- select min(founded) </span></span><br><span class="line"><span class="comment">-- from startups;</span></span><br><span class="line"><span class="comment">-- -- 7</span></span><br><span class="line"><span class="comment">-- select avg(valuation) </span></span><br><span class="line"><span class="comment">-- from startups;</span></span><br><span class="line"><span class="comment">-- -- 8</span></span><br><span class="line"><span class="comment">-- select category, avg(valuation) </span></span><br><span class="line"><span class="comment">-- from startups</span></span><br><span class="line"><span class="comment">-- group by category;</span></span><br><span class="line"><span class="comment">-- -- 9</span></span><br><span class="line"><span class="comment">-- select category, round(avg(valuation), 2)</span></span><br><span class="line"><span class="comment">-- from startups</span></span><br><span class="line"><span class="comment">-- group by category;</span></span><br><span class="line"><span class="comment">-- -- 10</span></span><br><span class="line"><span class="comment">-- select category, round(avg(valuation), 2)</span></span><br><span class="line"><span class="comment">-- from startups</span></span><br><span class="line"><span class="comment">-- group by category</span></span><br><span class="line"><span class="comment">-- order by 2 desc;</span></span><br><span class="line"><span class="comment">-- -- 11</span></span><br><span class="line"><span class="comment">-- -- select category, count(company)</span></span><br><span class="line"><span class="comment">-- select category, count(*)</span></span><br><span class="line"><span class="comment">-- from startups</span></span><br><span class="line"><span class="comment">-- group by category;</span></span><br><span class="line"><span class="comment">-- -- 12</span></span><br><span class="line"><span class="comment">-- -- -- select category, count(company)</span></span><br><span class="line"><span class="comment">-- select category, count(*)</span></span><br><span class="line"><span class="comment">-- from startups</span></span><br><span class="line"><span class="comment">-- group by category</span></span><br><span class="line"><span class="comment">-- having count(*) &gt; 3</span></span><br><span class="line"><span class="comment">-- order by 2 desc;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- select * from startups;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 13</span></span><br><span class="line"><span class="comment">-- select location, avg(valuation)</span></span><br><span class="line"><span class="keyword">select</span> location, <span class="keyword">avg</span>(employees)</span><br><span class="line"><span class="keyword">from</span> startups</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> location</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">avg</span>(employees) &gt; <span class="number">500</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- having avg(*)</span></span><br></pre></td></tr></table></figure>

<h3 id="Write-the-following-queries"><a href="#Write-the-following-queries" class="headerlink" title="Write the following queries:"></a>Write the following queries:</h3><p><strong>1.</strong></p>
<p>Getting started, take a look at the <code>startups</code> table:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> startups;</span><br></pre></td></tr></table></figure>

<p>How many columns are there?</p>
<p>Stuck? Get a hint</p>
<p><strong>2.</strong></p>
<p>Calculate the total number of companies in the table.</p>
<p>Hint</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*)</span><br><span class="line"><span class="keyword">FROM</span> startups;</span><br></pre></td></tr></table></figure>

<p>There are 70 companies in the table.</p>
<p><strong>3.</strong></p>
<p>We want to know the total value of all companies in this table.</p>
<p>Calculate this by getting the <code>SUM()</code> of the <code>valuation</code> column.</p>
<p>Hint</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SUM</span>(valuation)</span><br><span class="line"><span class="keyword">FROM</span> startups;</span><br></pre></td></tr></table></figure>

<p>The sum is $974,455,790,000!</p>
<p><strong>4.</strong></p>
<p>What is the highest amount raised by a startup?</p>
<p>Return the maximum amount of money <code>raised</code>.</p>
<p>Hint</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MAX</span>(raised)</span><br><span class="line"><span class="keyword">FROM</span> startups;</span><br></pre></td></tr></table></figure>

<p><strong>5.</strong></p>
<p>Edit the query so that it returns the maximum amount of money <code>raised</code>, during â€˜Seedâ€™ stage.</p>
<p>Hint</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MAX</span>(raised)</span><br><span class="line"><span class="keyword">FROM</span> startups</span><br><span class="line"><span class="keyword">WHERE</span> stage = <span class="string">'Seed'</span>;</span><br></pre></td></tr></table></figure>

<p><strong>6.</strong></p>
<p>In what year was the oldest company on the list founded?</p>
<p>Hint</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MIN</span>(founded)</span><br><span class="line"><span class="keyword">FROM</span> startups;</span><br></pre></td></tr></table></figure>

<h3 id="Letâ€™s-find-out-the-valuations-among-different-sectors"><a href="#Letâ€™s-find-out-the-valuations-among-different-sectors" class="headerlink" title="Letâ€™s find out the valuations among different sectors:"></a>Letâ€™s find out the valuations among different sectors:</h3><p><strong>7.</strong></p>
<p>Return the average <code>valuation</code>.</p>
<p>Stuck? Get a hint</p>
<p><strong>8.</strong></p>
<p>Return the average <code>valuation</code>, in each <code>category</code>.</p>
<p>Hint</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">category</span>, <span class="keyword">AVG</span>(valuation)</span><br><span class="line"><span class="keyword">FROM</span> startups</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">category</span>;</span><br></pre></td></tr></table></figure>

<p><strong>9.</strong></p>
<p>Return the average <code>valuation</code>, in each <code>category</code>.</p>
<p>Round the averages to two decimal places.</p>
<p>Hint</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">category</span>, <span class="keyword">ROUND</span>(<span class="keyword">AVG</span>(valuation), <span class="number">2</span>)</span><br><span class="line"><span class="keyword">FROM</span> startups</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">category</span>;</span><br></pre></td></tr></table></figure>

<p><strong>10.</strong></p>
<p>Return the average <code>valuation</code>, in each <code>category</code>.</p>
<p>Round the averages to two decimal places.</p>
<p>Lastly, order the list from highest averages to lowest.</p>
<p>Hint</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">category</span>, <span class="keyword">ROUND</span>(<span class="keyword">AVG</span>(valuation), <span class="number">2</span>)</span><br><span class="line"><span class="keyword">FROM</span> startups</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="number">1</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="number">2</span> <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>

<p>Health Care startups seem to have higher valuations than other categories.</p>
<h3 id="What-are-the-most-competitive-markets"><a href="#What-are-the-most-competitive-markets" class="headerlink" title="What are the most competitive markets?"></a>What are the most competitive markets?</h3><p><strong>11.</strong></p>
<p>First, return the name of each <code>category</code> with the total number of companies that belong to it.</p>
<p>Hint</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">category</span>, <span class="keyword">COUNT</span>(*)</span><br><span class="line"><span class="keyword">FROM</span> startups</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">category</span>;</span><br></pre></td></tr></table></figure>

<p><strong>12.</strong></p>
<p>Next, filter the result to only include categories that have more than three companies in them.</p>
<p>What are the most competitive markets?</p>
<p>Hint</p>
<p>Because you are filtering on a condition that has an aggregate function, you need to use <code>HAVING</code> instead of <code>WHERE</code>:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">category</span>, <span class="keyword">COUNT</span>(*)</span><br><span class="line"><span class="keyword">FROM</span> startupss</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">category</span></span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">COUNT</span>(*) &gt; <span class="number">3</span>;</span><br></pre></td></tr></table></figure>

<p>If you want to go a step further, sort the result using <code>ORDER BY</code>:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">category</span>, <span class="keyword">COUNT</span>(*)</span><br><span class="line"><span class="keyword">FROM</span> startups</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">category</span></span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">COUNT</span>(*) &gt; <span class="number">3</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="number">2</span> <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>

<p>The most competitive markets are:</p>
<ol>
<li>Social</li>
<li>Mobile</li>
<li>Education</li>
</ol>
<h3 id="Letâ€™s-see-if-thereâ€™s-a-difference-in-startups-sizes-among-different-locations"><a href="#Letâ€™s-see-if-thereâ€™s-a-difference-in-startups-sizes-among-different-locations" class="headerlink" title="Letâ€™s see if thereâ€™s a difference in startups sizes among different locations:"></a>Letâ€™s see if thereâ€™s a difference in startups sizes among different locations:</h3><p><strong>13.</strong></p>
<p>What is the average size of a startup in each <code>location</code>?</p>
<p>Hint</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> location, <span class="keyword">AVG</span>(employees)</span><br><span class="line"><span class="keyword">FROM</span> startups</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> location;</span><br></pre></td></tr></table></figure>

<p><strong>14.</strong></p>
<p>What is the average size of a startup in each <code>location</code>, with average sizes above 500?</p>
<p>Hint</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> location, <span class="keyword">AVG</span>(employees)</span><br><span class="line"><span class="keyword">FROM</span> startups</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> location</span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">AVG</span>(employees) &gt; <span class="number">500</span>;</span><br></pre></td></tr></table></figure>





<h2 id="Multiple-Tables-with-REBU"><a href="#Multiple-Tables-with-REBU" class="headerlink" title="Multiple Tables with REBU"></a>Multiple Tables with REBU</h2><p>LEARN SQL</p>
<h1 id="Multiple-Tables-with-REBU-1"><a href="#Multiple-Tables-with-REBU-1" class="headerlink" title="Multiple Tables with REBU"></a>Multiple Tables with REBU</h1><p>Letâ€™s practice what we learned about joins by combining rows from different tables.</p>
<p>Suppose you are a data analyst at REBU, a ridesharing platform. For a project, you were given three tables:</p>
<ul>
<li><code>trips</code> - trips information</li>
<li><code>riders</code> - users data</li>
<li><code>cars</code> - autonomous cars</li>
</ul>
<p>Have fun!</p>
<p>If you get stuck during this project or would like to see an experienced developer work through it, click â€œ<strong>Get Help</strong>â€œ to see a <strong>project walkthrough video</strong>.</p>
<p>Tasks</p>
<p>10/10Complete</p>
<p>Mark the tasks as complete by checking them off</p>
<h3 id="Write-the-following-queries-1"><a href="#Write-the-following-queries-1" class="headerlink" title="Write the following queries:"></a>Write the following queries:</h3><p><strong>1.</strong></p>
<p>Letâ€™s examine the three tables.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM trips;</span><br><span class="line"></span><br><span class="line">SELECT * FROM riders;</span><br><span class="line"></span><br><span class="line">SELECT * FROM cars;</span><br></pre></td></tr></table></figure>

<p>What are the column names?</p>
<p>Stuck? Get a hint</p>
<p><strong>2.</strong></p>
<p>Whatâ€™s the primary key of <code>trips</code>?</p>
<p>Whatâ€™s the primary key of <code>riders</code>?</p>
<p>Whatâ€™s the primary key of <code>cars</code>?</p>
<p>Hint</p>
<p>The primary key of <code>trips</code> is <code>id</code>.</p>
<p>The primary key of <code>riders</code> is <code>id</code>.</p>
<p>The primary key of <code>cars</code> is <code>id</code>.</p>
<p>They have the same name, but they are very different.</p>
<p><strong>3.</strong></p>
<p>Try out a simple cross join between <code>riders</code> and <code>cars</code>.</p>
<p>Is the result useful?</p>
<p>Hint</p>
<p>Suppose these are the three columns we select:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT riders.first,</span><br><span class="line">   riders.last,</span><br><span class="line">   cars.model</span><br><span class="line">FROM riders, cars;</span><br></pre></td></tr></table></figure>

<p>The result combines each user with every car model. Not so useful.</p>
<p><strong>4.</strong></p>
<p>Suppose we want to create a Trip Log with the trips and its users.</p>
<p>Find the columns to join between <code>trips</code> and <code>riders</code> and combine the two tables using a <code>LEFT JOIN</code>.</p>
<p>Let <code>trips</code> be the left table.</p>
<p>Hint</p>
<p>If we <code>LEFT JOIN</code> on <code>trips.rider_id</code> and <code>riders.id</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM trips</span><br><span class="line">LEFT JOIN riders </span><br><span class="line">  ON trips.rider_id &#x3D; riders.id;</span><br></pre></td></tr></table></figure>

<p>The result has a lot of columns.</p>
<p>Suppose, we only want certain columns:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">SELECT trips.date, </span><br><span class="line">   trips.pickup, </span><br><span class="line">   trips.dropoff, </span><br><span class="line">   trips.type, </span><br><span class="line">   trips.cost,</span><br><span class="line">   riders.first, </span><br><span class="line">   riders.last,</span><br><span class="line">   riders.username</span><br><span class="line">FROM trips</span><br><span class="line">LEFT JOIN riders </span><br><span class="line">  ON trips.rider_id &#x3D; riders.id;</span><br></pre></td></tr></table></figure>

<p><strong>5.</strong></p>
<p>Suppose we want to create a link between the <code>trips</code> and the <code>cars</code> used during those trips.</p>
<p>Find the columns to join on and combine the <code>trips</code> and <code>cars</code> table using an <code>INNER JOIN</code>.</p>
<p>Hint</p>
<p>For <code>INNER JOIN</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM trips</span><br><span class="line">JOIN cars</span><br><span class="line">  ON trips.car_id &#x3D; cars.id;</span><br></pre></td></tr></table></figure>

<p>The <code>JOIN</code> keyword can also be <code>INNER JOIN</code>.</p>
<p><strong>6.</strong></p>
<p>The new riders data are in! There are three new users this month.</p>
<p>Stack the <code>riders</code> table on top of the new table named <code>riders2</code>.</p>
<p>Hint</p>
<p>For stacking one dataset on top of another, we use <code>UNION</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM riders</span><br><span class="line">UNION</span><br><span class="line">SELECT *</span><br><span class="line">FROM riders2;</span><br></pre></td></tr></table></figure>

<h3 id="Bonus-Questions-Queries-and-Aggregates"><a href="#Bonus-Questions-Queries-and-Aggregates" class="headerlink" title="Bonus Questions! Queries and Aggregates:"></a>Bonus Questions! Queries and Aggregates:</h3><p><strong>7.</strong></p>
<p>What is the average <code>cost</code> for a trip?</p>
<p>Hint</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT AVG(cost)</span><br><span class="line">FROM trips;</span><br></pre></td></tr></table></figure>

<p>The result is 31.915</p>
<p>If we use the <code>ROUND()</code> function to round the result to 2 decimal places:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT ROUND(AVG(cost), 2)</span><br><span class="line">FROM trips;</span><br></pre></td></tr></table></figure>

<p>The average <code>cost</code> is $31.92!</p>
<p><strong>8.</strong></p>
<p>REBU is looking to do an email campaign for all the irregular users.</p>
<p>Find all the <code>riders</code> who have used REBU less than 500 times!</p>
<p>Hint</p>
<p>If we are only searching within the <code>riders</code> table:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM riders</span><br><span class="line">WHERE total_trips &lt; 500;</span><br></pre></td></tr></table></figure>


<p>If we want to search in both <code>riders</code> and <code>riders2</code>, then we might have to do something like this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM riders</span><br><span class="line">WHERE total_trips &lt; 500</span><br><span class="line">UNION</span><br><span class="line">SELECT *</span><br><span class="line">FROM riders2</span><br><span class="line">WHERE total_trips &lt; 500;</span><br></pre></td></tr></table></figure>

<p><strong>9.</strong></p>
<p>Calculate the number of cars that are <code>active</code>.</p>
<p>Stuck? Get a hint</p>
<p><strong>10.</strong></p>
<p>Itâ€™s safety recall time for cars that have been on the road for a while.</p>
<p>Write a query that finds the two cars that have the highest <code>trips_completed</code>.</p>
<p>Hint</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM cars</span><br><span class="line">ORDER BY trips_completed DESC</span><br><span class="line">LIMIT 2;</span><br></pre></td></tr></table></figure></div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/01/15/Python/2019-01-15-property,%20setter%20&amp;%20getter/">Python/2019-01-15-property, setter &amp; getter</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-01-15</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Python/">Python</a></span><div class="content"><p>ref: <a href="https://medium.com/bryanyang0528/python-setter-å’Œ-getter-6c08a9d37d46" target="_blank" rel="noopener">https://medium.com/bryanyang0528/python-setter-%E5%92%8C-getter-6c08a9d37d46</a></p>
<p>ç®€è¨€ä¹‹ï¼š</p>
<p>obj.attribute_1 å¯ä»¥æ‹¿åˆ° ç‰©ä»¶çš„ attributeï¼›ä½†ä¹Ÿæ˜“è¢«æ”¹æŽ‰ã€‚<br>ç‚ºäº†ä¸è®“ä½¿ç”¨è€…è¼•æ˜“èƒ½æ”¹æŽ‰ attribute, æ‰€ä»¥ä»¥ä¸‹æ»‘ç·šé–‹é ­çš„ç§æœ‰å±¬æ€§ï¼Œä½†é€™æ¨£å°±ç„¡æ³•ç„¡æ³•è¢«objç›´æŽ¥ä½¿ç”¨ï¼Œå¾—é€éŽoopçš„set&amp;getæ–¹æ³•ã€‚<br>ç‚ºäº†è®“å®ƒå¯ä»¥ç”¨ä¸€æ¨£çš„èªžæ³•è¢«æ‹¿å‡ºä½¿ç”¨ï¼Œæ‰€ä»¥ç”¨ <code>property</code>ï¼Œå°‡methodè®Šæˆå±¬æ€§åœ¨ä½œä½¿ç”¨ï¼›åŒæ™‚ï¼Œç‚ºäº†è®“å®ƒå¯ä»¥ç”¨ä¸€æ¨£çš„èªžæ³•è¢«è¨­å€¼ï¼Œæ‰€ä»¥ç”¨<code>setter</code>ï¼Œå°‡é—œéµå­—åŠ åœ¨è¦è®Šæˆå±¬æ€§åŒ–çš„methodä¸Šé¢ï¼Œç„¶å¾Œåœ¨methodè£¡é¢åŽ»æ”¹ç§æœ‰å±¬æ€§ã€‚</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/01/08/System-Design/2020-01-08-Redis%20Task%20Manager/">System-Design/2020-01-08-Redis Task Manager</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-01-08</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/SystemDesign/">SystemDesign</a></span><div class="content"><h3 id="taskwork-py"><a href="#taskwork-py" class="headerlink" title="taskwork.py"></a>taskwork.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> Queue</span><br><span class="line"><span class="keyword">from</span> multiprocessing.managers <span class="keyword">import</span> BaseManager</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QueueManager</span><span class="params">(BaseManager)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">QueueManager.register(<span class="string">'get_task_queue'</span>)</span><br><span class="line">QueueManager.register(<span class="string">'get_result_queue'</span>)</span><br><span class="line"></span><br><span class="line">server_addr = <span class="string">'127.0.0.1'</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">'Connect to server %s...'</span> % server_addr</span><br><span class="line">m = QueueManager(address=(server_addr, <span class="number">5000</span>), authkey=<span class="string">'abc'</span>)</span><br><span class="line">m.connect()</span><br><span class="line"></span><br><span class="line">task = m.get_task_queue()</span><br><span class="line">result = m.get_result_queue()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        n = task.get(timeout=<span class="number">10</span>)</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"run task %d * %d"</span> % (n, n)</span><br><span class="line">        r = <span class="string">"%d * %d = %d"</span> % (n, n, n*n)</span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line">        result.put(r)</span><br><span class="line">    <span class="keyword">except</span> Queue.Empty:</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"task queue is empty!"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"worker exit!"</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="taskmanager-py"><a href="#taskmanager-py" class="headerlink" title="taskmanager.py"></a>taskmanager.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">å¦‚æžœæˆ‘ä»¬å·²ç»æœ‰ä¸€ä¸ªé€šè¿‡Queneé€šä¿¡çš„å¤šè¿›ç¨‹ç¨‹åºåœ¨åŒä¸€å°æœºå™¨ä¸Šè¿è¡Œï¼ŒçŽ°åœ¨ï¼Œç”±äºŽå¤„ç†</span></span><br><span class="line"><span class="string">ä»»åŠ¡çš„è¿›ç¨‹ä»»åŠ¡ç¹é‡ï¼Œå¸Œæœ›æŠŠå‘é€ä»»åŠ¡çš„è¿›ç¨‹å’Œå¤„ç†ä»»åŠ¡çš„è¿›ç¨‹åˆ†å¸ƒåˆ°ä¸¤å°æœºå™¨ä¸Šã€‚æ€Žä¹ˆ</span></span><br><span class="line"><span class="string">ç”¨åˆ†å¸ƒå¼è¿›ç¨‹å®žçŽ°ï¼Ÿ</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> Queue</span><br><span class="line"><span class="keyword">from</span> multiprocessing.managers <span class="keyword">import</span> BaseManager</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‘é€ä»»åŠ¡çš„é˜Ÿåˆ—:</span></span><br><span class="line">task_queue = Queue.Queue()</span><br><span class="line"><span class="comment"># æŽ¥æ”¶ç»“æžœçš„é˜Ÿåˆ—:</span></span><br><span class="line">result_queue = Queue.Queue()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QueueManager</span><span class="params">(BaseManager)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    ä»ŽBaseManagerç»§æ‰¿çš„QueneManager</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŠŠä¸¤ä¸ªQueueéƒ½æ³¨å†Œåˆ°ç½‘ç»œä¸Šï¼Œcallableå‚æ•°å…³è”äº†Queueå¯¹è±¡</span></span><br><span class="line">QueueManager.register(<span class="string">'get_task_queue'</span>, callable=<span class="keyword">lambda</span>: task_queue)</span><br><span class="line">QueueManager.register(<span class="string">'get_result_queue'</span>, callable=<span class="keyword">lambda</span>: result_queue)</span><br><span class="line"><span class="comment"># ç»‘å®šç«¯å£5000,è®¾ç½®éªŒè¯ç 'abc'</span></span><br><span class="line">manager = QueueManager(address=(<span class="string">''</span>, <span class="number">5000</span>), authkey=<span class="string">'abc'</span>)</span><br><span class="line"><span class="comment"># å¯åŠ¨Queue</span></span><br><span class="line">manager.start()</span><br><span class="line"><span class="comment"># èŽ·å¾—é€šè¿‡ç½‘ç»œè®¿é—®çš„Queueå¯¹è±¡</span></span><br><span class="line">task = manager.get_task_queue()</span><br><span class="line">result = manager.get_result_queue()</span><br><span class="line"></span><br><span class="line"><span class="comment"># producer</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">    n = random.randint(<span class="number">0</span>, <span class="number">10000</span>)</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"Put task %d..."</span> % n</span><br><span class="line">    task.put(n)</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"Try get results..."</span></span><br><span class="line"><span class="comment"># worker</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">    r = result.get(timeout=<span class="number">20</span>)</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"Result: %s"</span> % r</span><br><span class="line"></span><br><span class="line">manager.shutdown()</span><br></pre></td></tr></table></figure>

</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/12/25/DevOps/2018-12-28-Redis%20Note/">DevOps/2018-12-28-Redis Note</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-12-25</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Python/">Python</a></span><div class="content"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(joe_py36) ~ Â» redis-server /usr/<span class="built_in">local</span>/etc/redis.conf</span><br></pre></td></tr></table></figure>



<h3 id="Select-collection"><a href="#Select-collection" class="headerlink" title="Select collection"></a>Select collection</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">redis-cli</span><br><span class="line">127.0.0.1:6379&gt; select 0</span><br><span class="line">OK</span><br></pre></td></tr></table></figure>



<h3 id="prevent-Chinese-error-codes"><a href="#prevent-Chinese-error-codes" class="headerlink" title="prevent Chinese error codes"></a>prevent Chinese error codes</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-cli --raw</span><br></pre></td></tr></table></figure>



<h3 id="Dict"><a href="#Dict" class="headerlink" title="Dict"></a>Dict</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; SET runoobkey redis</span><br><span class="line">OK</span><br><span class="line">redis 127.0.0.1:6379&gt; DEL runoobkey</span><br><span class="line">(integer) 1</span><br></pre></td></tr></table></figure>



<h3 id=""><a href="#" class="headerlink" title=""></a></h3></div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/12/25/LC/2020-1-1-Turtle_ing/">LC/2020-1-1-Turtle_ing</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-12-25</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Tur/">Tur</a></span><div class="content"><p>leetcode 84, 85, larget rectangle area</p>
<p>leetcode 1055 shortest way to form string</p>
<p>leetcode isPalindrome</p>
<p><a href="http://nataliekung.gitbook.io/ladder_code" target="_blank" rel="noopener">http://nataliekung.gitbook.io/ladder_code</a></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/12/20/DevOps/2018-12-20-Faster%20RCNN%20(Caffe)/">DevOps/2018-12-20-Faster RCNN (Caffe)</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-12-20</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/AI/">AI</a></span><div class="content"><h3 id="Faster-RCNN"><a href="#Faster-RCNN" class="headerlink" title="Faster RCNN"></a>Faster RCNN</h3><p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g98751x2waj30u0114juk.jpg" alt="image-20191123192705661"></p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g9875mkolxj30u00z70x2.jpg" alt="image-20191123192741508"></p>
<h4 id="prototxt"><a href="#prototxt" class="headerlink" title=".prototxt"></a>.prototxt</h4><p>(<a href="https://raw.githubusercontent.com/rbgirshick/py-faster-rcnn/master/models/pascal_voc/VGG16/faster_rcnn_end2end/test.prototxt" target="_blank" rel="noopener">https://raw.githubusercontent.com/rbgirshick/py-faster-rcnn/master/models/pascal_voc/VGG16/faster_rcnn_end2end/test.prototxt</a>) </p>
<p><img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g9898kj283j31m00k6jw4.jpg" alt="image-20191123203941972"></p>
<h5 id="netscope"><a href="#netscope" class="headerlink" title="netscope:"></a>netscope:</h5><p><a href="https://ethereon.github.io/netscope/#/editor" target="_blank" rel="noopener">https://ethereon.github.io/netscope/#/editor</a></p>
<figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br></pre></td><td class="code"><pre><span class="line">name: <span class="string">"VGG_ILSVRC_16_layers"</span></span><br><span class="line"></span><br><span class="line">input: <span class="string">"data"</span></span><br><span class="line">input_shape &#123;</span><br><span class="line">  dim: <span class="number">1</span></span><br><span class="line">  dim: <span class="number">3</span></span><br><span class="line">  dim: <span class="number">224</span></span><br><span class="line">  dim: <span class="number">224</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">input: <span class="string">"im_info"</span></span><br><span class="line">input_shape &#123;</span><br><span class="line">  dim: <span class="number">1</span></span><br><span class="line">  dim: <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"conv1_1"</span></span><br><span class="line">  type: <span class="string">"Convolution"</span></span><br><span class="line">  bottom: <span class="string">"data"</span></span><br><span class="line">  top: <span class="string">"conv1_1"</span></span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">0</span></span><br><span class="line">    decay_mult: <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">0</span></span><br><span class="line">    decay_mult: <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  convolution_param &#123;</span><br><span class="line">    num_output: <span class="number">64</span></span><br><span class="line">    pad: <span class="number">1</span></span><br><span class="line">    kernel_size: <span class="number">3</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"relu1_1"</span></span><br><span class="line">  type: <span class="string">"ReLU"</span></span><br><span class="line">  bottom: <span class="string">"conv1_1"</span></span><br><span class="line">  top: <span class="string">"conv1_1"</span></span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"conv1_2"</span></span><br><span class="line">  type: <span class="string">"Convolution"</span></span><br><span class="line">  bottom: <span class="string">"conv1_1"</span></span><br><span class="line">  top: <span class="string">"conv1_2"</span></span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">0</span></span><br><span class="line">    decay_mult: <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">0</span></span><br><span class="line">    decay_mult: <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  convolution_param &#123;</span><br><span class="line">    num_output: <span class="number">64</span></span><br><span class="line">    pad: <span class="number">1</span></span><br><span class="line">    kernel_size: <span class="number">3</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"relu1_2"</span></span><br><span class="line">  type: <span class="string">"ReLU"</span></span><br><span class="line">  bottom: <span class="string">"conv1_2"</span></span><br><span class="line">  top: <span class="string">"conv1_2"</span></span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"pool1"</span></span><br><span class="line">  type: <span class="string">"Pooling"</span></span><br><span class="line">  bottom: <span class="string">"conv1_2"</span></span><br><span class="line">  top: <span class="string">"pool1"</span></span><br><span class="line">  pooling_param &#123;</span><br><span class="line">    pool: MAX</span><br><span class="line">    kernel_size: <span class="number">2</span></span><br><span class="line">    stride: <span class="number">2</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"conv2_1"</span></span><br><span class="line">  type: <span class="string">"Convolution"</span></span><br><span class="line">  bottom: <span class="string">"pool1"</span></span><br><span class="line">  top: <span class="string">"conv2_1"</span></span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">0</span></span><br><span class="line">    decay_mult: <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">0</span></span><br><span class="line">    decay_mult: <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  convolution_param &#123;</span><br><span class="line">    num_output: <span class="number">128</span></span><br><span class="line">    pad: <span class="number">1</span></span><br><span class="line">    kernel_size: <span class="number">3</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"relu2_1"</span></span><br><span class="line">  type: <span class="string">"ReLU"</span></span><br><span class="line">  bottom: <span class="string">"conv2_1"</span></span><br><span class="line">  top: <span class="string">"conv2_1"</span></span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"conv2_2"</span></span><br><span class="line">  type: <span class="string">"Convolution"</span></span><br><span class="line">  bottom: <span class="string">"conv2_1"</span></span><br><span class="line">  top: <span class="string">"conv2_2"</span></span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">0</span></span><br><span class="line">    decay_mult: <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">0</span></span><br><span class="line">    decay_mult: <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  convolution_param &#123;</span><br><span class="line">    num_output: <span class="number">128</span></span><br><span class="line">    pad: <span class="number">1</span></span><br><span class="line">    kernel_size: <span class="number">3</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"relu2_2"</span></span><br><span class="line">  type: <span class="string">"ReLU"</span></span><br><span class="line">  bottom: <span class="string">"conv2_2"</span></span><br><span class="line">  top: <span class="string">"conv2_2"</span></span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"pool2"</span></span><br><span class="line">  type: <span class="string">"Pooling"</span></span><br><span class="line">  bottom: <span class="string">"conv2_2"</span></span><br><span class="line">  top: <span class="string">"pool2"</span></span><br><span class="line">  pooling_param &#123;</span><br><span class="line">    pool: MAX</span><br><span class="line">    kernel_size: <span class="number">2</span></span><br><span class="line">    stride: <span class="number">2</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"conv3_1"</span></span><br><span class="line">  type: <span class="string">"Convolution"</span></span><br><span class="line">  bottom: <span class="string">"pool2"</span></span><br><span class="line">  top: <span class="string">"conv3_1"</span></span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">1</span></span><br><span class="line">    decay_mult: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">2</span></span><br><span class="line">    decay_mult: <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  convolution_param &#123;</span><br><span class="line">    num_output: <span class="number">256</span></span><br><span class="line">    pad: <span class="number">1</span></span><br><span class="line">    kernel_size: <span class="number">3</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"relu3_1"</span></span><br><span class="line">  type: <span class="string">"ReLU"</span></span><br><span class="line">  bottom: <span class="string">"conv3_1"</span></span><br><span class="line">  top: <span class="string">"conv3_1"</span></span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"conv3_2"</span></span><br><span class="line">  type: <span class="string">"Convolution"</span></span><br><span class="line">  bottom: <span class="string">"conv3_1"</span></span><br><span class="line">  top: <span class="string">"conv3_2"</span></span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">1</span></span><br><span class="line">    decay_mult: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">2</span></span><br><span class="line">    decay_mult: <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  convolution_param &#123;</span><br><span class="line">    num_output: <span class="number">256</span></span><br><span class="line">    pad: <span class="number">1</span></span><br><span class="line">    kernel_size: <span class="number">3</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"relu3_2"</span></span><br><span class="line">  type: <span class="string">"ReLU"</span></span><br><span class="line">  bottom: <span class="string">"conv3_2"</span></span><br><span class="line">  top: <span class="string">"conv3_2"</span></span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"conv3_3"</span></span><br><span class="line">  type: <span class="string">"Convolution"</span></span><br><span class="line">  bottom: <span class="string">"conv3_2"</span></span><br><span class="line">  top: <span class="string">"conv3_3"</span></span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">1</span></span><br><span class="line">    decay_mult: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">2</span></span><br><span class="line">    decay_mult: <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  convolution_param &#123;</span><br><span class="line">    num_output: <span class="number">256</span></span><br><span class="line">    pad: <span class="number">1</span></span><br><span class="line">    kernel_size: <span class="number">3</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"relu3_3"</span></span><br><span class="line">  type: <span class="string">"ReLU"</span></span><br><span class="line">  bottom: <span class="string">"conv3_3"</span></span><br><span class="line">  top: <span class="string">"conv3_3"</span></span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"pool3"</span></span><br><span class="line">  type: <span class="string">"Pooling"</span></span><br><span class="line">  bottom: <span class="string">"conv3_3"</span></span><br><span class="line">  top: <span class="string">"pool3"</span></span><br><span class="line">  pooling_param &#123;</span><br><span class="line">    pool: MAX</span><br><span class="line">    kernel_size: <span class="number">2</span></span><br><span class="line">    stride: <span class="number">2</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"conv4_1"</span></span><br><span class="line">  type: <span class="string">"Convolution"</span></span><br><span class="line">  bottom: <span class="string">"pool3"</span></span><br><span class="line">  top: <span class="string">"conv4_1"</span></span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">1</span></span><br><span class="line">    decay_mult: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">2</span></span><br><span class="line">    decay_mult: <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  convolution_param &#123;</span><br><span class="line">    num_output: <span class="number">512</span></span><br><span class="line">    pad: <span class="number">1</span></span><br><span class="line">    kernel_size: <span class="number">3</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"relu4_1"</span></span><br><span class="line">  type: <span class="string">"ReLU"</span></span><br><span class="line">  bottom: <span class="string">"conv4_1"</span></span><br><span class="line">  top: <span class="string">"conv4_1"</span></span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"conv4_2"</span></span><br><span class="line">  type: <span class="string">"Convolution"</span></span><br><span class="line">  bottom: <span class="string">"conv4_1"</span></span><br><span class="line">  top: <span class="string">"conv4_2"</span></span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">1</span></span><br><span class="line">    decay_mult: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">2</span></span><br><span class="line">    decay_mult: <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  convolution_param &#123;</span><br><span class="line">    num_output: <span class="number">512</span></span><br><span class="line">    pad: <span class="number">1</span></span><br><span class="line">    kernel_size: <span class="number">3</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"relu4_2"</span></span><br><span class="line">  type: <span class="string">"ReLU"</span></span><br><span class="line">  bottom: <span class="string">"conv4_2"</span></span><br><span class="line">  top: <span class="string">"conv4_2"</span></span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"conv4_3"</span></span><br><span class="line">  type: <span class="string">"Convolution"</span></span><br><span class="line">  bottom: <span class="string">"conv4_2"</span></span><br><span class="line">  top: <span class="string">"conv4_3"</span></span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">1</span></span><br><span class="line">    decay_mult: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">2</span></span><br><span class="line">    decay_mult: <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  convolution_param &#123;</span><br><span class="line">    num_output: <span class="number">512</span></span><br><span class="line">    pad: <span class="number">1</span></span><br><span class="line">    kernel_size: <span class="number">3</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"relu4_3"</span></span><br><span class="line">  type: <span class="string">"ReLU"</span></span><br><span class="line">  bottom: <span class="string">"conv4_3"</span></span><br><span class="line">  top: <span class="string">"conv4_3"</span></span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"pool4"</span></span><br><span class="line">  type: <span class="string">"Pooling"</span></span><br><span class="line">  bottom: <span class="string">"conv4_3"</span></span><br><span class="line">  top: <span class="string">"pool4"</span></span><br><span class="line">  pooling_param &#123;</span><br><span class="line">    pool: MAX</span><br><span class="line">    kernel_size: <span class="number">2</span></span><br><span class="line">    stride: <span class="number">2</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"conv5_1"</span></span><br><span class="line">  type: <span class="string">"Convolution"</span></span><br><span class="line">  bottom: <span class="string">"pool4"</span></span><br><span class="line">  top: <span class="string">"conv5_1"</span></span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">1</span></span><br><span class="line">    decay_mult: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">2</span></span><br><span class="line">    decay_mult: <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  convolution_param &#123;</span><br><span class="line">    num_output: <span class="number">512</span></span><br><span class="line">    pad: <span class="number">1</span></span><br><span class="line">    kernel_size: <span class="number">3</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"relu5_1"</span></span><br><span class="line">  type: <span class="string">"ReLU"</span></span><br><span class="line">  bottom: <span class="string">"conv5_1"</span></span><br><span class="line">  top: <span class="string">"conv5_1"</span></span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"conv5_2"</span></span><br><span class="line">  type: <span class="string">"Convolution"</span></span><br><span class="line">  bottom: <span class="string">"conv5_1"</span></span><br><span class="line">  top: <span class="string">"conv5_2"</span></span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">1</span></span><br><span class="line">    decay_mult: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">2</span></span><br><span class="line">    decay_mult: <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  convolution_param &#123;</span><br><span class="line">    num_output: <span class="number">512</span></span><br><span class="line">    pad: <span class="number">1</span></span><br><span class="line">    kernel_size: <span class="number">3</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"relu5_2"</span></span><br><span class="line">  type: <span class="string">"ReLU"</span></span><br><span class="line">  bottom: <span class="string">"conv5_2"</span></span><br><span class="line">  top: <span class="string">"conv5_2"</span></span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"conv5_3"</span></span><br><span class="line">  type: <span class="string">"Convolution"</span></span><br><span class="line">  bottom: <span class="string">"conv5_2"</span></span><br><span class="line">  top: <span class="string">"conv5_3"</span></span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">1</span></span><br><span class="line">    decay_mult: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">2</span></span><br><span class="line">    decay_mult: <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  convolution_param &#123;</span><br><span class="line">    num_output: <span class="number">512</span></span><br><span class="line">    pad: <span class="number">1</span></span><br><span class="line">    kernel_size: <span class="number">3</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"relu5_3"</span></span><br><span class="line">  type: <span class="string">"ReLU"</span></span><br><span class="line">  bottom: <span class="string">"conv5_3"</span></span><br><span class="line">  top: <span class="string">"conv5_3"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#========= RPN ============</span><br><span class="line"></span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"rpn_conv/3x3"</span></span><br><span class="line">  type: <span class="string">"Convolution"</span></span><br><span class="line">  bottom: <span class="string">"conv5_3"</span></span><br><span class="line">  top: <span class="string">"rpn/output"</span></span><br><span class="line">  param &#123; lr_mult: <span class="number">1.0</span> decay_mult: <span class="number">1.0</span> &#125;</span><br><span class="line">  param &#123; lr_mult: <span class="number">2.0</span> decay_mult: <span class="number">0</span> &#125;</span><br><span class="line">  convolution_param &#123;</span><br><span class="line">    num_output: <span class="number">512</span></span><br><span class="line">    kernel_size: <span class="number">3</span> pad: <span class="number">1</span> stride: <span class="number">1</span></span><br><span class="line">    weight_filler &#123; type: <span class="string">"gaussian"</span> std: <span class="number">0.01</span> &#125;</span><br><span class="line">    bias_filler &#123; type: <span class="string">"constant"</span> value: <span class="number">0</span> &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"rpn_relu/3x3"</span></span><br><span class="line">  type: <span class="string">"ReLU"</span></span><br><span class="line">  bottom: <span class="string">"rpn/output"</span></span><br><span class="line">  top: <span class="string">"rpn/output"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"rpn_cls_score"</span></span><br><span class="line">  type: <span class="string">"Convolution"</span></span><br><span class="line">  bottom: <span class="string">"rpn/output"</span></span><br><span class="line">  top: <span class="string">"rpn_cls_score"</span></span><br><span class="line">  param &#123; lr_mult: <span class="number">1.0</span> decay_mult: <span class="number">1.0</span> &#125;</span><br><span class="line">  param &#123; lr_mult: <span class="number">2.0</span> decay_mult: <span class="number">0</span> &#125;</span><br><span class="line">  convolution_param &#123;</span><br><span class="line">    num_output: <span class="number">18</span>   # <span class="number">2</span>(bg/fg) * <span class="number">9</span>(anchors)</span><br><span class="line">    kernel_size: <span class="number">1</span> pad: <span class="number">0</span> stride: <span class="number">1</span></span><br><span class="line">    weight_filler &#123; type: <span class="string">"gaussian"</span> std: <span class="number">0.01</span> &#125;</span><br><span class="line">    bias_filler &#123; type: <span class="string">"constant"</span> value: <span class="number">0</span> &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"rpn_bbox_pred"</span></span><br><span class="line">  type: <span class="string">"Convolution"</span></span><br><span class="line">  bottom: <span class="string">"rpn/output"</span></span><br><span class="line">  top: <span class="string">"rpn_bbox_pred"</span></span><br><span class="line">  param &#123; lr_mult: <span class="number">1.0</span> decay_mult: <span class="number">1.0</span> &#125;</span><br><span class="line">  param &#123; lr_mult: <span class="number">2.0</span> decay_mult: <span class="number">0</span> &#125;</span><br><span class="line">  convolution_param &#123;</span><br><span class="line">    num_output: <span class="number">36</span>   # <span class="number">4</span> * <span class="number">9</span>(anchors)</span><br><span class="line">    kernel_size: <span class="number">1</span> pad: <span class="number">0</span> stride: <span class="number">1</span></span><br><span class="line">    weight_filler &#123; type: <span class="string">"gaussian"</span> std: <span class="number">0.01</span> &#125;</span><br><span class="line">    bias_filler &#123; type: <span class="string">"constant"</span> value: <span class="number">0</span> &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">   bottom: <span class="string">"rpn_cls_score"</span></span><br><span class="line">   top: <span class="string">"rpn_cls_score_reshape"</span></span><br><span class="line">   name: <span class="string">"rpn_cls_score_reshape"</span></span><br><span class="line">   type: <span class="string">"Reshape"</span></span><br><span class="line">   reshape_param &#123; shape &#123; dim: <span class="number">0</span> dim: <span class="number">2</span> dim: -<span class="number">1</span> dim: <span class="number">0</span> &#125; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#========= RoI Proposal ============</span><br><span class="line"></span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"rpn_cls_prob"</span></span><br><span class="line">  type: <span class="string">"Softmax"</span></span><br><span class="line">  bottom: <span class="string">"rpn_cls_score_reshape"</span></span><br><span class="line">  top: <span class="string">"rpn_cls_prob"</span></span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: 'rpn_cls_prob_reshape'</span><br><span class="line">  type: 'Reshape'</span><br><span class="line">  bottom: 'rpn_cls_prob'</span><br><span class="line">  top: 'rpn_cls_prob_reshape'</span><br><span class="line">  reshape_param &#123; shape &#123; dim: <span class="number">0</span> dim: <span class="number">18</span> dim: -<span class="number">1</span> dim: <span class="number">0</span> &#125; &#125;</span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: 'proposal'</span><br><span class="line">  type: 'Python'</span><br><span class="line">  bottom: 'rpn_cls_prob_reshape'</span><br><span class="line">  bottom: 'rpn_bbox_pred'</span><br><span class="line">  bottom: 'im_info'</span><br><span class="line">  top: 'rois'</span><br><span class="line">  python_param &#123;</span><br><span class="line">    module: 'rpn.proposal_layer'</span><br><span class="line">    layer: 'ProposalLayer'</span><br><span class="line">    param_str: <span class="string">"'feat_stride': 16"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#========= RCNN ============</span><br><span class="line"></span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"roi_pool5"</span></span><br><span class="line">  type: <span class="string">"ROIPooling"</span></span><br><span class="line">  bottom: <span class="string">"conv5_3"</span></span><br><span class="line">  bottom: <span class="string">"rois"</span></span><br><span class="line">  top: <span class="string">"pool5"</span></span><br><span class="line">  roi_pooling_param &#123;</span><br><span class="line">    pooled_w: <span class="number">7</span></span><br><span class="line">    pooled_h: <span class="number">7</span></span><br><span class="line">    spatial_scale: <span class="number">0.0625</span> # <span class="number">1</span>/<span class="number">16</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"fc6"</span></span><br><span class="line">  type: <span class="string">"InnerProduct"</span></span><br><span class="line">  bottom: <span class="string">"pool5"</span></span><br><span class="line">  top: <span class="string">"fc6"</span></span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">1</span></span><br><span class="line">    decay_mult: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">2</span></span><br><span class="line">    decay_mult: <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  inner_product_param &#123;</span><br><span class="line">    num_output: <span class="number">4096</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"relu6"</span></span><br><span class="line">  type: <span class="string">"ReLU"</span></span><br><span class="line">  bottom: <span class="string">"fc6"</span></span><br><span class="line">  top: <span class="string">"fc6"</span></span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"drop6"</span></span><br><span class="line">  type: <span class="string">"Dropout"</span></span><br><span class="line">  bottom: <span class="string">"fc6"</span></span><br><span class="line">  top: <span class="string">"fc6"</span></span><br><span class="line">  dropout_param &#123;</span><br><span class="line">    dropout_ratio: <span class="number">0.5</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"fc7"</span></span><br><span class="line">  type: <span class="string">"InnerProduct"</span></span><br><span class="line">  bottom: <span class="string">"fc6"</span></span><br><span class="line">  top: <span class="string">"fc7"</span></span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">1</span></span><br><span class="line">    decay_mult: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">2</span></span><br><span class="line">    decay_mult: <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  inner_product_param &#123;</span><br><span class="line">    num_output: <span class="number">4096</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"relu7"</span></span><br><span class="line">  type: <span class="string">"ReLU"</span></span><br><span class="line">  bottom: <span class="string">"fc7"</span></span><br><span class="line">  top: <span class="string">"fc7"</span></span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"drop7"</span></span><br><span class="line">  type: <span class="string">"Dropout"</span></span><br><span class="line">  bottom: <span class="string">"fc7"</span></span><br><span class="line">  top: <span class="string">"fc7"</span></span><br><span class="line">  dropout_param &#123;</span><br><span class="line">    dropout_ratio: <span class="number">0.5</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"cls_score"</span></span><br><span class="line">  type: <span class="string">"InnerProduct"</span></span><br><span class="line">  bottom: <span class="string">"fc7"</span></span><br><span class="line">  top: <span class="string">"cls_score"</span></span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">1</span></span><br><span class="line">    decay_mult: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">2</span></span><br><span class="line">    decay_mult: <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  inner_product_param &#123;</span><br><span class="line">    num_output: <span class="number">21</span></span><br><span class="line">    weight_filler &#123;</span><br><span class="line">      type: <span class="string">"gaussian"</span></span><br><span class="line">      std: <span class="number">0.01</span></span><br><span class="line">    &#125;</span><br><span class="line">    bias_filler &#123;</span><br><span class="line">      type: <span class="string">"constant"</span></span><br><span class="line">      value: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"bbox_pred"</span></span><br><span class="line">  type: <span class="string">"InnerProduct"</span></span><br><span class="line">  bottom: <span class="string">"fc7"</span></span><br><span class="line">  top: <span class="string">"bbox_pred"</span></span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">1</span></span><br><span class="line">    decay_mult: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  param &#123;</span><br><span class="line">    lr_mult: <span class="number">2</span></span><br><span class="line">    decay_mult: <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  inner_product_param &#123;</span><br><span class="line">    num_output: <span class="number">84</span></span><br><span class="line">    weight_filler &#123;</span><br><span class="line">      type: <span class="string">"gaussian"</span></span><br><span class="line">      std: <span class="number">0.001</span></span><br><span class="line">    &#125;</span><br><span class="line">    bias_filler &#123;</span><br><span class="line">      type: <span class="string">"constant"</span></span><br><span class="line">      value: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">layer &#123;</span><br><span class="line">  name: <span class="string">"cls_prob"</span></span><br><span class="line">  type: <span class="string">"Softmax"</span></span><br><span class="line">  bottom: <span class="string">"cls_score"</span></span><br><span class="line">  top: <span class="string">"cls_prob"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/12/12/Python/2018-12-12-MongoDB%20MapReduce/">Python/2018-12-12-MongoDB MapReduce</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-12-12</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Web/">Web</a></span><div class="content"><p>Ref: <a href="https://www.runoob.com/mongodb/mongodb-map-reduce.html" target="_blank" rel="noopener">https://www.runoob.com/mongodb/mongodb-map-reduce.html</a></p>
<p>Map-Reduceæ˜¯ä¸€ç§è®¡ç®—æ¨¡åž‹ï¼Œç®€å•çš„è¯´å°±æ˜¯å°†å¤§æ‰¹é‡çš„å·¥ä½œï¼ˆæ•°æ®ï¼‰åˆ†è§£ï¼ˆMAPï¼‰æ‰§è¡Œï¼Œç„¶åŽå†å°†ç»“æžœåˆå¹¶æˆæœ€ç»ˆç»“æžœï¼ˆREDUCEï¼‰ã€‚</p>
<p>MongoDBæä¾›çš„Map-Reduceéžå¸¸çµæ´»ï¼Œå¯¹äºŽå¤§è§„æ¨¡æ•°æ®åˆ†æžä¹Ÿç›¸å½“å®žç”¨ã€‚</p>
<h3 id="MapReduce-å‘½ä»¤"><a href="#MapReduce-å‘½ä»¤" class="headerlink" title="MapReduce å‘½ä»¤"></a>MapReduce å‘½ä»¤</h3><p>ä»¥ä¸‹æ˜¯MapReduceçš„åŸºæœ¬è¯­æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt;db.collection.mapReduce(</span><br><span class="line">   function() &#123;emit(key,value);&#125;,  &#x2F;&#x2F;map å‡½æ•°</span><br><span class="line">   function(key,values) &#123;return reduceFunction&#125;,   &#x2F;&#x2F;reduce å‡½æ•°</span><br><span class="line">   &#123;</span><br><span class="line">      out: collection,</span><br><span class="line">      query: document,</span><br><span class="line">      sort: document,</span><br><span class="line">      limit: number</span><br><span class="line">   &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ MapReduce è¦å®žçŽ°ä¸¤ä¸ªå‡½æ•° Map å‡½æ•°å’Œ Reduce å‡½æ•°,Map å‡½æ•°è°ƒç”¨ emit(key, value), éåŽ† collection ä¸­æ‰€æœ‰çš„è®°å½•, å°† key ä¸Ž value ä¼ é€’ç»™ Reduce å‡½æ•°è¿›è¡Œå¤„ç†ã€‚</p>
<p>Map å‡½æ•°å¿…é¡»è°ƒç”¨ emit(key, value) è¿”å›žé”®å€¼å¯¹ã€‚</p>
<p>å‚æ•°è¯´æ˜Ž:</p>
<ul>
<li><strong>map</strong> ï¼šæ˜ å°„å‡½æ•° (ç”Ÿæˆé”®å€¼å¯¹åºåˆ—,ä½œä¸º reduce å‡½æ•°å‚æ•°)ã€‚</li>
<li><strong>reduce</strong> ç»Ÿè®¡å‡½æ•°ï¼Œreduceå‡½æ•°çš„ä»»åŠ¡å°±æ˜¯å°†key-valueså˜æˆkey-valueï¼Œä¹Ÿå°±æ˜¯æŠŠvaluesæ•°ç»„å˜æˆä¸€ä¸ªå•ä¸€çš„å€¼valueã€‚ã€‚</li>
<li><strong>out</strong> ç»Ÿè®¡ç»“æžœå­˜æ”¾é›†åˆ (ä¸æŒ‡å®šåˆ™ä½¿ç”¨ä¸´æ—¶é›†åˆ,åœ¨å®¢æˆ·ç«¯æ–­å¼€åŽè‡ªåŠ¨åˆ é™¤)ã€‚</li>
<li><strong>query</strong> ä¸€ä¸ªç­›é€‰æ¡ä»¶ï¼Œåªæœ‰æ»¡è¶³æ¡ä»¶çš„æ–‡æ¡£æ‰ä¼šè°ƒç”¨mapå‡½æ•°ã€‚ï¼ˆqueryã€‚limitï¼Œsortå¯ä»¥éšæ„ç»„åˆï¼‰</li>
<li><strong>sort</strong> å’Œlimitç»“åˆçš„sortæŽ’åºå‚æ•°ï¼ˆä¹Ÿæ˜¯åœ¨å‘å¾€mapå‡½æ•°å‰ç»™æ–‡æ¡£æŽ’åºï¼‰ï¼Œå¯ä»¥ä¼˜åŒ–åˆ†ç»„æœºåˆ¶</li>
<li><strong>limit</strong> å‘å¾€mapå‡½æ•°çš„æ–‡æ¡£æ•°é‡çš„ä¸Šé™ï¼ˆè¦æ˜¯æ²¡æœ‰limitï¼Œå•ç‹¬ä½¿ç”¨sortçš„ç”¨å¤„ä¸å¤§ï¼‰</li>
</ul>
<p>ä»¥ä¸‹å®žä¾‹åœ¨é›†åˆ orders ä¸­æŸ¥æ‰¾ status:â€Aâ€ çš„æ•°æ®ï¼Œå¹¶æ ¹æ® cust_id æ¥åˆ†ç»„ï¼Œå¹¶è®¡ç®— amount çš„æ€»å’Œã€‚</p>
<p><img src="https://static.runoob.com/images/map-reduce.bakedsvg.svg" alt="map-reduce.bakedsvg"></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/12/12/Python/2018-12-12-ODM%20&amp;%20ORM/">Python/2018-12-12-ODM &amp; ORM</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-12-12</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Web/">Web</a></span><div class="content"><p>Ref All: <a href="https://medium.com/@julianam.tyler/what-is-the-difference-between-odm-and-orm-267bbb7778b0" target="_blank" rel="noopener">https://medium.com/@julianam.tyler/what-is-the-difference-between-odm-and-orm-267bbb7778b0</a></p>
<p>â€œ</p>
<p>When you first learn how to work with database, it all comes down to two types of database set ups which are ORM (object Relation Mapping) and ODM (Object Document Mapping)</p>
<p>ORM which is to map an object with a relational world, it basically converts data between incompatible types in object oriented programming languages. ORM wraps the implementation specific details of storage drivers in an API (application program interface), and maps the relational fields to an object members. For example if I have a table of employees, it is mapped to a single object for all employees, with various methods associated with it.</p>
<p>ODM on the other hand is an Object Document Mapper, which maps objects with a Document Database like MongoDB.</p>
<p>The main difference is that ORM is for MySQL databases, while ODM does the mapping for document representation of data.<br>best way to remember what ORM does would be to think of it as an excel spread sheet, with rows and columns. When using this set up, you want to be sure you have a great plan on how you want to tackle the current application, it does not allow as many modifications like ODM does. With ODM we can add new fields and properties easily but with ORM when adding a new field you need to keep in mind that nothing stays empty so it needs a value to be as default unless you want to go into each and modify.</p>
<p>â€œâ€</p>
</div><hr></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-chevron-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2020 By Joe Huang</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span><span></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>