<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Algo. Ult./seminar_6&amp;7&amp;8"><meta name="keywords" content=""><meta name="author" content="Joe Huang"><meta name="copyright" content="Joe Huang"><title>Algo. Ult./seminar_6&amp;7&amp;8 | Awaken Desparado</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><meta name="generator" content="Hexo 4.1.1"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Seminar-6-BFS-Advanced"><span class="toc-number">1.</span> <span class="toc-text">Seminar 6. BFS Advanced</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#630-騎士的最短路徑-II"><span class="toc-number">1.1.</span> <span class="toc-text">630. 騎士的最短路徑 II</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1516-異或和-X"><span class="toc-number">1.2.</span> <span class="toc-text">1516. 異或和 X</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#892-外星人詞典"><span class="toc-number">1.3.</span> <span class="toc-text">892. 外星人詞典</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1565-飛行棋-I"><span class="toc-number">1.4.</span> <span class="toc-text">1565. 飛行棋 I </span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#DP"><span class="toc-number">1.4.1.</span> <span class="toc-text">DP</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#拓展知識"><span class="toc-number">1.5.</span> <span class="toc-text">拓展知識</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1364-最短路徑-as-飛行棋"><span class="toc-number">1.5.1.</span> <span class="toc-text">1364.最短路徑, as 飛行棋</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1515-異或和"><span class="toc-number">1.5.2.</span> <span class="toc-text">1515.異或和</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#794-滑動拼圖-II"><span class="toc-number">1.5.3.</span> <span class="toc-text">794.滑動拼圖 II</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Seminar-7"><span class="toc-number">2.</span> <span class="toc-text">Seminar 7</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Preview"><span class="toc-number">2.1.</span> <span class="toc-text">Preview</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1181-二叉樹的直徑"><span class="toc-number">2.1.1.</span> <span class="toc-text">1181.二叉樹的直徑</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1469-樹上最長路徑-dfs解法"><span class="toc-number">2.2.</span> <span class="toc-text">1469.樹上最長路徑-dfs解法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DFS-gt-爆-Stack"><span class="toc-number">2.2.0.1.</span> <span class="toc-text">DFS &#x3D;&#x3D;&gt; 爆 Stack</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#BFS"><span class="toc-number">2.2.0.2.</span> <span class="toc-text">BFS</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#START"><span class="toc-number">2.3.</span> <span class="toc-text">START</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#分治"><span class="toc-number">2.3.1.</span> <span class="toc-text">分治</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#94-Binary-Tree-Maximum-Path-SumFollow"><span class="toc-number">2.3.2.</span> <span class="toc-text">94.Binary Tree Maximum Path SumFollow</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#535-打劫房屋-II"><span class="toc-number">2.3.3.</span> <span class="toc-text">535.打劫房屋 II</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#只返回一个值行不行？"><span class="toc-number">2.3.3.0.1.</span> <span class="toc-text">只返回一个值行不行？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#453-二叉樹拆成鏈表"><span class="toc-number">2.3.4.</span> <span class="toc-text">453.二叉樹拆成鏈表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#262-Heir-Tree-繼承人樹"><span class="toc-number">2.3.5.</span> <span class="toc-text">262. Heir Tree 繼承人樹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#915-BST的中序前驅節點"><span class="toc-number">2.3.6.</span> <span class="toc-text">915.BST的中序前驅節點</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#106-有序鏈表轉化為二叉搜索樹"><span class="toc-number">2.3.7.</span> <span class="toc-text">106.有序鏈表轉化為二叉搜索樹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#方法一-O-NlogN"><span class="toc-number">2.3.7.1.</span> <span class="toc-text">方法一 O(NlogN)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#方法二-O-N"><span class="toc-number">2.3.7.2.</span> <span class="toc-text">方法二 O(N)</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Seminar-8-DFS-Advanced"><span class="toc-number">3.</span> <span class="toc-text">Seminar 8.DFS Advanced</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#427-生成括號"><span class="toc-number">3.0.1.</span> <span class="toc-text">427.生成括號</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#780-删除無效的括號-–-FB-經典考察題"><span class="toc-number">3.0.2.</span> <span class="toc-text">780.删除無效的括號 – FB 經典考察題</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#107-單詞拆分-DFS"><span class="toc-number">3.0.3.</span> <span class="toc-text">107.單詞拆分 - DFS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#582-單詞拆分-II-DFS"><span class="toc-number">3.0.4.</span> <span class="toc-text">582.單詞拆分 II - DFS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#683-單詞拆分-III"><span class="toc-number">3.0.5.</span> <span class="toc-text">683.單詞拆分 III</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#652-因式分解"><span class="toc-number">3.0.6.</span> <span class="toc-text">652.因式分解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#815-課程表-IV-–-所有方案"><span class="toc-number">3.0.7.</span> <span class="toc-text">815 課程表 IV – 所有方案</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1514-掃地機器人"><span class="toc-number">3.0.8.</span> <span class="toc-text">1514.掃地機器人</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#121-Word-Ladder-II"><span class="toc-number">3.0.9.</span> <span class="toc-text">121. Word Ladder II</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#A-–-794-Sliding-Puzzle-II"><span class="toc-number">3.1.</span> <span class="toc-text">A* – 794.Sliding Puzzle II</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#解法1-min-dist-w-打擂台"><span class="toc-number">3.1.0.0.1.</span> <span class="toc-text">解法1, min_dist w&#x2F; 打擂台</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#解法1-2-加上SPFA"><span class="toc-number">3.1.0.0.2.</span> <span class="toc-text">解法1+2, 加上SPFA</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#單調隊列-1507-和至少為K的最短子數組"><span class="toc-number">3.2.</span> <span class="toc-text">單調隊列 - 1507.和至少為K的最短子數組</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">Joe Huang</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">274</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">25</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">40</span></a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Awaken Desparado</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">Algo. Ult./seminar_6&amp;7&amp;8</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-06-16</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/AlgoUlt/">AlgoUlt.</a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h1 id="Seminar-6-BFS-Advanced"><a href="#Seminar-6-BFS-Advanced" class="headerlink" title="Seminar 6. BFS Advanced"></a>Seminar 6. BFS Advanced</h1><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gftvn216ofj310c0jgdn3.jpg" alt="image-20200616093336824"></p>
<ul>
<li>什麼時候用BFS而不用DFS?</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gftvozc29sj310809q421.jpg" alt="image-20200616093533547"></p>
<ul>
<li>Topological Sort</li>
</ul>
<h2 id="630-騎士的最短路徑-II"><a href="#630-騎士的最短路徑-II" class="headerlink" title="630. 騎士的最短路徑 II"></a>630. 騎士的最短路徑 II</h2><ul>
<li><p>BFS 模版</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Queue = colleciton.deque()</span><br><span class="line">distance = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> start_point <span class="keyword">in</span> start_points:</span><br><span class="line">  Q.append(start_point)</span><br><span class="line">  distance(start_point) = <span class="number">0</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">while</span> Q:</span><br><span class="line">  now = queue.popleft()</span><br><span class="line">  <span class="keyword">for</span> neighbor <span class="keyword">in</span> neighbors[now]:</span><br><span class="line">    <span class="keyword">if</span> self.is_valid(neightbor):</span><br><span class="line">      Q.append(neighbor)</span><br><span class="line">      distance[neighbor] = distance[now] + <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> diatance[destination]</span><br></pre></td></tr></table></figure>
</li>
<li><p>Follow up:</p>
<ul>
<li><p>輸出路徑的題，在BFS, DFS, DP中都有，其中DFS最常見</p>
</li>
<li><p>BFS和DP中，輸出路徑 -&gt; 數據結構存儲</p>
</li>
<li><p>存什麼？</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> A. 每個點的上一個點？最後從終點不斷往前找前一個點</li>
<li><input disabled="" type="checkbox"> B. 每個點的下一個點？最後從起點一直往後找下一個點</li>
</ul>
</li>
<li><p>雙向BFS</p>
<ul>
<li><p>相遇時得到了答案</p>
<img src="/Users/joe/Library/Application Support/typora-user-images/image-20200616100657736.png" alt="image-20200616100657736" style="zoom: 25%;" />
</li>
<li><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gftwmqhbxvj30um0gc0vy.jpg" alt="image-20200616100800150" style="zoom:25%;" />

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> </span><br></pre></td></tr></table></figure>



</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="1516-異或和-X"><a href="#1516-異或和-X" class="headerlink" title="1516. 異或和 X"></a>1516. 異或和 X</h2><h2 id="892-外星人詞典"><a href="#892-外星人詞典" class="headerlink" title="892. 外星人詞典"></a>892. 外星人詞典</h2><ul>
<li><p>wrt, wrf, er, ett, erftt</p>
<ul>
<li><p>t -&gt; f</p>
</li>
<li><p>w -&gt; e</p>
</li>
<li><p>e -&gt; r</p>
</li>
<li><p>r -&gt; t</p>
</li>
<li><p>So, </p>
<ul>
<li>t -&gt; f</li>
<li>w -&gt; e -&gt; r<ul>
<li>wertf</li>
</ul>
</li>
</ul>
</li>
<li><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gftxa5yc1zj30gq0nogr5.jpg" alt="image-20200616103030839"  />

<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gftxcd54ggj30gk0do0xd.jpg" alt="image-20200616103238325"></p>
</li>
<li><p>舉列有環時不會進while，直接空 return</p>
</li>
<li><p>（abc, ab）得早期return處理掉</p>
</li>
<li><p>Time: </p>
</li>
<li><p><a href="https://paste.ubuntu.com/p/W2J52HPVwq/" target="_blank" rel="noopener">https://paste.ubuntu.com/p/W2J52HPVwq/</a></p>
</li>
</ul>
</li>
</ul>
<h2 id="1565-飛行棋-I"><a href="#1565-飛行棋-I" class="headerlink" title="1565. 飛行棋 I "></a>1565. 飛行棋 I <img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfty5hccf5j30h40lggpf.jpg" alt="image-20200616110036736"></h2><p>WRONG!</p>
<p>Reason: didn’t check whether “9” can be directly transmitted</p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gftyeoh6ebj30d6030q3i.jpg" alt="image-20200616110926749"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gftygxs7okj30h80n8gqj.jpg" alt="image-20200616111137543"></p>
<img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gftyibb8b7j308402wweq.jpg" alt="image-20200616111256890" style="zoom: 50%;" />

<p>how to fix?</p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gftyjr3kyuj30ea0awdi5.jpg" alt="image-20200616111419729"></p>
<ul>
<li>SPFA 最短路算法, 被淘汰，因為太慢了，但用起來夠了</li>
</ul>
<ul>
<li><p>Dij, Floyd, 這兩個可以拿來替換，他們都帶人名的，大不了可以不會</p>
</li>
<li><p>可做1364</p>
</li>
<li><p>放後面也可以</p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gftypnbvbyj30xk0kswme.jpg" alt="image-20200616111955720"></p>
</li>
</ul>
<ul>
<li><h3 id="DP"><a href="#DP" class="headerlink" title="DP"></a>DP</h3><img src="/Users/joe/Library/Application Support/typora-user-images/image-20200616113300330.png" alt="image-20200616113300330" style="zoom:67%;" />





</li>
</ul>
<ul>
<li><p>push vs pull in DP</p>
<img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gftz5g5zsnj30f60m4782.jpg" alt="image-20200616113511064" style="zoom:67%;" />



</li>
</ul>
<h2 id="拓展知識"><a href="#拓展知識" class="headerlink" title="拓展知識"></a>拓展知識</h2><h3 id="1364-最短路徑-as-飛行棋"><a href="#1364-最短路徑-as-飛行棋" class="headerlink" title="1364.最短路徑, as 飛行棋"></a>1364.最短路徑, as 飛行棋</h3><ul>
<li><input disabled="" type="checkbox"> TODO…, not yet finished</li>
</ul>
<h3 id="1515-異或和"><a href="#1515-異或和" class="headerlink" title="1515.異或和"></a>1515.異或和</h3><ul>
<li><p>競賽題。。。</p>
</li>
<li><p>雙向BFS</p>
<ul>
<li>降時間，但有時不一定能降，像騎士就無法降時間</li>
<li>但這題在中間會和就可以在中間會和</li>
</ul>
</li>
<li><p>1 &lt;= n, m &lt;= 20</p>
<ul>
<li><p>組合數 C(20, 40) ==&gt; 非常大</p>
</li>
<li><p>約2^(n+m)，2^40 次方　再小一點</p>
<img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfufb10aywj30aq094wgf.jpg" alt="image-20200616205407495" style="zoom:33%;" />
</li>
<li><p>2^40是2^12，稳爆；2^20约10^6，可接受<br><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfuge4qs73j30k40ks7b0.jpg" alt="image-20200616213141875"></p>
</li>
</ul>
</li>
</ul>
<h3 id="794-滑動拼圖-II"><a href="#794-滑動拼圖-II" class="headerlink" title="794.滑動拼圖 II"></a>794.滑動拼圖 II</h3><h1 id="Seminar-7"><a href="#Seminar-7" class="headerlink" title="Seminar 7"></a>Seminar 7</h1><h2 id="Preview"><a href="#Preview" class="headerlink" title="Preview"></a>Preview</h2><h3 id="1181-二叉樹的直徑"><a href="#1181-二叉樹的直徑" class="headerlink" title="1181.二叉樹的直徑"></a>1181.二叉樹的直徑</h3><ul>
<li><p>分治</p>
</li>
<li><p>遞歸</p>
</li>
<li><p>Root    -&gt; root.left</p>
<p>​            -&gt; root.right</p>
</li>
<li><p>M_D = max_diameter; M_C = max_chain</p>
<ul>
<li><p>return max(M_D_root, M_C_root)</p>
<img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfu9xow74tj30ma0b249p.jpg" alt="image-20200616174814887" style="zoom:80%;" />
</li>
</ul>
</li>
<li><p>定義、出口、拆解</p>
<ul>
<li><p>def dfs(root):</p>
<pre><code>if not root:
      return [0, 0]
  left_M_D, left_M_C = self.dfs(root.L)
  right_M_D, right_M_C = self.dfs(root.R)
  M_D = max(left_M_D, right_M_D, left_M_C + right_M_C)
  M_C = max(right_M_C, right_M_C) + 1    </code></pre><p>​    return [M_D, M_C]</p>
</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfud9xokowj30eu0d4tby.jpg" alt="image-20200616194351449"></p>
</li>
</ul>
<h2 id="1469-樹上最長路徑-dfs解法"><a href="#1469-樹上最長路徑-dfs解法" class="headerlink" title="1469.樹上最長路徑-dfs解法"></a>1469.樹上最長路徑-dfs解法</h2><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfzsh05ytnj30ws0jm4qp.jpg" alt="image-20200621121725802"></p>
<p>Time: O(N), 10^5</p>
<p>Space: O(N), 10^5</p>
<ul>
<li><h4 id="DFS-gt-爆-Stack"><a href="#DFS-gt-爆-Stack" class="headerlink" title="DFS ==&gt; 爆 Stack"></a>DFS ==&gt; 爆 Stack</h4></li>
</ul>
<h4 id="BFS"><a href="#BFS" class="headerlink" title="BFS"></a>BFS</h4><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfztcm972yj30le02w40h.jpg" alt="image-20200621124751035"></p>
<h2 id="START"><a href="#START" class="headerlink" title="START"></a>START</h2><img src="/Users/joe/Library/Application Support/typora-user-images/image-20200618093143030.png" alt="image-20200618093143030" style="zoom:67%;" />

<h3 id="分治"><a href="#分治" class="headerlink" title="分治"></a>分治</h3><ul>
<li><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfw6ut4teij30ou01ut9g.jpg" alt="image-20200618093252701" style="zoom:67%;" />
</li>
<li><p>把整棵樹的問題分解成左右子樹的問題，用相同的方法去解決它們</p>
</li>
<li><p>分治是思想，</p>
<ul>
<li>遞歸是實現藉由調用自己實現</li>
<li>也可以棧實現</li>
</ul>
</li>
</ul>
<h3 id="94-Binary-Tree-Maximum-Path-SumFollow"><a href="#94-Binary-Tree-Maximum-Path-SumFollow" class="headerlink" title="94.Binary Tree Maximum Path SumFollow"></a>94.Binary Tree Maximum Path SumFollow</h3><img src="/Users/joe/Library/Application Support/typora-user-images/image-20200618094817945.png" alt="image-20200618094817945" style="zoom:67%;" />



<ul>
<li><strong>要初始化为 -sys.maxsize，不然会这样挂掉</strong></li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfw7ndkm8tj30tu0d642s.jpg" alt="image-20200618100018499"></p>
<h3 id="535-打劫房屋-II"><a href="#535-打劫房屋-II" class="headerlink" title="535.打劫房屋 II"></a>535.打劫房屋 II</h3><ul>
<li>强行分治不行，未考虑相邻的房子无法打劫的问题</li>
</ul>
<img src="/Users/joe/Library/Application Support/typora-user-images/image-20200618101046235.png" alt="image-20200618101046235" style="zoom:67%;" />

<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfw7z6khqqj30l00f6k2e.jpg" alt="image-20200618101136307"></p>
<ul>
<li>指数级了！下面這些才是必需要枚舉的情況，這題不需要<ul>
<li>子集</li>
<li>全排列</li>
<li>ｎ皇后</li>
</ul>
</li>
<li>如果無法得出正確答案，說明什麼？<ul>
<li>返回的info不夠</li>
</ul>
</li>
<li>增加返回值的種類<ul>
<li>Max_not_in_profit_L</li>
<li>Max_in_profit_L</li>
<li>Max_not_in_profit_R</li>
<li>Max_in_profit_R</li>
</ul>
</li>
</ul>
<img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfw85whozwj30l40emaic.jpg" alt="image-20200618101806841" style="zoom:80%;" />

<p>![image-20200618102718964](/Users/joe/Library/Application Support/typora-user-images/image-20200618102718964.png)</p>
<h5 id="只返回一个值行不行？"><a href="#只返回一个值行不行？" class="headerlink" title="只返回一个值行不行？"></a>只返回一个值行不行？</h5><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfw8j2otn7j31080mgtkg.jpg" alt="image-20200618103046363"></p>
<p>全局不推薦，不好！</p>
<p>全局可能被其他的function影響，對多線程也不好</p>
<h3 id="453-二叉樹拆成鏈表"><a href="#453-二叉樹拆成鏈表" class="headerlink" title="453.二叉樹拆成鏈表"></a>453.二叉樹拆成鏈表</h3><ul>
<li>TODO:<ul>
<li>1.right = 2</li>
<li>4.right = 5</li>
</ul>
</li>
</ul>
<img src="/Users/joe/Library/Application Support/typora-user-images/image-20200618104542919.png" alt="image-20200618104542919" style="zoom:67%;" />

<ul>
<li>通過考慮怎麼合上，思考要傳什麼進去</li>
</ul>
<h3 id="262-Heir-Tree-繼承人樹"><a href="#262-Heir-Tree-繼承人樹" class="headerlink" title="262. Heir Tree 繼承人樹"></a>262. Heir Tree 繼承人樹</h3><ul>
<li>不真的删，前是建標記，所以別修改father’s child list</li>
<li>Lazy Delete: 晚點再刪, 同 <strong>859.Max Stack</strong></li>
<li>設計的意味，設計data base了</li>
</ul>
<img src="/Users/joe/Library/Application Support/typora-user-images/image-20200618110201357.png" alt="image-20200618110201357" style="zoom:67%;" />

<img src="/Users/joe/Library/Application Support/typora-user-images/image-20200618110244262.png" alt="image-20200618110244262" style="zoom:67%;" />



<h3 id="915-BST的中序前驅節點"><a href="#915-BST的中序前驅節點" class="headerlink" title="915.BST的中序前驅節點"></a>915.BST的中序前驅節點</h3><ul>
<li><input disabled="" type="checkbox"> A. O(N)</li>
<li><input disabled="" type="checkbox"> B. O(logN)</li>
<li><input checked="" disabled="" type="checkbox"> <strong>C. O(h)</strong> 未必要平衡，所以比B合適 </li>
</ul>
<img src="/Users/joe/Library/Application Support/typora-user-images/image-20200618110810029.png" alt="image-20200618110810029" style="zoom:50%;" />

<ul>
<li><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfw9r6qw21j30qg0bin0j.jpg" alt="image-20200618111311048"></p>
</li>
</ul>
<img src="/Users/joe/Library/Application Support/typora-user-images/image-20200618111652378.png" alt="image-20200618111652378" style="zoom:67%;" />

<p>![image-20200618111735472](/Users/joe/Library/Application Support/typora-user-images/image-20200618111735472.png)</p>
<img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfw9y0qo8qj30jo09ctba.jpg" alt="image-20200618111945429" style="zoom:80%;" />



<h3 id="106-有序鏈表轉化為二叉搜索樹"><a href="#106-有序鏈表轉化為二叉搜索樹" class="headerlink" title="106.有序鏈表轉化為二叉搜索樹"></a>106.有序鏈表轉化為二叉搜索樹</h3><ul>
<li>操作型，很自閉</li>
</ul>
<h4 id="方法一-O-NlogN"><a href="#方法一-O-NlogN" class="headerlink" title="方法一 O(NlogN)"></a>方法一 O(NlogN)</h4><ul>
<li><img src="/Users/joe/Library/Application Support/typora-user-images/image-20200618112325499.png" alt="image-20200618112325499" style="zoom:67%;" />

<img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfwa3qor9xj30oo0eytbq.jpg" alt="image-20200618112515315" style="zoom:67%;" />
</li>
<li><p>N個中點，合併N次，所以N次</p>
<ul>
<li>但每次要 N/2 去找 n/2這位置，所以 lg(N)，也就是層數</li>
</ul>
</li>
</ul>
<h4 id="方法二-O-N"><a href="#方法二-O-N" class="headerlink" title="方法二 O(N)"></a>方法二 O(N)</h4><ul>
<li>優化成 O(N)</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfwa9s2vuqj30rc0em0ys.jpg" alt="image-20200618113102707"></p>
<img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gfwae3w36aj30kk0p4tfp.jpg" alt="image-20200618113512990" style="zoom:67%;" />





<h1 id="Seminar-8-DFS-Advanced"><a href="#Seminar-8-DFS-Advanced" class="headerlink" title="Seminar 8.DFS Advanced"></a>Seminar 8.DFS Advanced</h1><h3 id="427-生成括號"><a href="#427-生成括號" class="headerlink" title="427.生成括號"></a>427.生成括號</h3><h3 id="780-删除無效的括號-–-FB-經典考察題"><a href="#780-删除無效的括號-–-FB-經典考察題" class="headerlink" title="780.删除無效的括號 – FB 經典考察題"></a>780.删除無效的括號 – FB 經典考察題</h3><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gg1zshzimlj31910u0alx.jpg" alt="image-20200623100145480"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gg2005je5tj30nc0bignm.jpg" alt="image-20200623100911708"></p>
<h3 id="107-單詞拆分-DFS"><a href="#107-單詞拆分-DFS" class="headerlink" title="107.單詞拆分 - DFS"></a>107.單詞拆分 - DFS</h3><h3 id="582-單詞拆分-II-DFS"><a href="#582-單詞拆分-II-DFS" class="headerlink" title="582.單詞拆分 II - DFS"></a>582.單詞拆分 II - DFS</h3><h3 id="683-單詞拆分-III"><a href="#683-單詞拆分-III" class="headerlink" title="683.單詞拆分 III"></a>683.單詞拆分 III</h3><h3 id="652-因式分解"><a href="#652-因式分解" class="headerlink" title="652.因式分解"></a>652.因式分解</h3><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gg20ul2zsnj310w0fg0w4.jpg" alt="image-20200623103826795"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gg21e2tradj30ta0nqn5g.jpg" alt="image-20200623105709890"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gg21ezqmakj30bg0g6di2.jpg" alt="image-20200623105804188"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gg21j5vjkmj30kq0qw44h.jpg" alt="image-20200623110202303"></p>
<h3 id="815-課程表-IV-–-所有方案"><a href="#815-課程表-IV-–-所有方案" class="headerlink" title="815 課程表 IV – 所有方案"></a>815 課程表 IV – 所有方案</h3><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gg21rbnu6xj30lq0uwaka.jpg" alt="image-20200623110952163"></p>
<p>NxN!  ==&gt; Nx2^N</p>
<h3 id="1514-掃地機器人"><a href="#1514-掃地機器人" class="headerlink" title="1514.掃地機器人"></a>1514.掃地機器人</h3><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gg223ybw6kj30f60pcdkn.jpg" alt="image-20200623112202612"></p>
<h3 id="121-Word-Ladder-II"><a href="#121-Word-Ladder-II" class="headerlink" title="121. Word Ladder II"></a>121. Word Ladder II</h3><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gg226xmki6j30jy0eggom.jpg" alt="image-20200623112455008"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gg228pez4qj30oi0sadp2.jpg" alt="image-20200623112636438"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gg22abpwmxj30ok0i8wkt.jpg" alt="image-20200623112809693"></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gg22fsi2c7j31030u019s.jpg" alt="image-20200623113321163"></p>
<p>K: 字符串長度</p>
<p>O(N + 26*K) # V+E</p>
<h2 id="A-–-794-Sliding-Puzzle-II"><a href="#A-–-794-Sliding-Puzzle-II" class="headerlink" title="A* – 794.Sliding Puzzle II"></a>A* – 794.Sliding Puzzle II</h2><ul>
<li><p>g(x): 離起點的距離</p>
<p>h(x): 離終點的距離 (估算)</p>
<p>f(x): = g(x) + h(x)</p>
</li>
<li><img src="/Users/joe/Library/Application Support/typora-user-images/image-20200627115533364.png" alt="image-20200627115533364" style="zoom:67%;" />
</li>
<li><p>定義起發式函數一般是固有招，定義得好，走得快</p>
</li>
<li><p>優先隊列, 用heap存狀態</p>
<ul>
<li>Heap: (f(x), g(x), state, start_x, start_y)</li>
</ul>
</li>
<li><p>while heap:</p>
<ul>
<li>now_state… = heappop(heap)</li>
<li>if …<ul>
<li>return 最短距離 (g)</li>
</ul>
</li>
<li>for next_state in self.find_next_states:<ul>
<li>加入heap = (f(new_te))</li>
</ul>
</li>
</ul>
</li>
<li><img src="/Users/joe/Library/Application Support/typora-user-images/image-20200627121024702.png" alt="image-20200627121024702" style="zoom:67%;" />

</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gg6qzyi8blj30ri0eater.jpg" alt="image-20200627124522973"></p>
<ul>
<li>要更快就得這樣早期return, 不然就回到了原始BFS了</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gg6r3eq3qsj30q40haqch.jpg" alt="image-20200627124844371"></p>
<ul>
<li>解法一</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gg6r90w359j318l0u0kc6.jpg" alt="image-20200627125408859"></p>
<ul>
<li>解法二<ul>
<li>As SPFA used in 飛行棋</li>
</ul>
</li>
<li>但都是highly dependent on <strong>get_h</strong>, 所以這題用這算法還是可能有CASE錯。<br>實際運用時，可以允許小偏差</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line">DIRECTIONS = [(<span class="number">0</span>, <span class="number">1</span>), (<span class="number">0</span>, <span class="number">-1</span>), (<span class="number">1</span>, <span class="number">0</span>), (<span class="number">-1</span>, <span class="number">0</span>)]</span><br><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    @param init_state: the initial state of chessboard</span></span><br><span class="line"><span class="string">    @param final_state: the final state of chessboard</span></span><br><span class="line"><span class="string">    @return: return an integer, denote the number of minimum moving</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minMoveStep</span><span class="params">(self, init_state, final_state)</span>:</span></span><br><span class="line">        <span class="comment"># write your code here</span></span><br><span class="line">        <span class="keyword">if</span> len(init_state) == <span class="number">0</span> <span class="keyword">or</span> len(init_state[<span class="number">0</span>]) == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span> </span><br><span class="line">        </span><br><span class="line">        n = len(init_state)</span><br><span class="line">        m = len(init_state[<span class="number">0</span>])</span><br><span class="line">        </span><br><span class="line">        open_set = []</span><br><span class="line">        close_set = set()</span><br><span class="line">        value_to_index = &#123;&#125;</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment"># find init 0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(m):</span><br><span class="line">                <span class="keyword">if</span> init_state[i][j] == <span class="number">0</span>:</span><br><span class="line">                    start_x, start_y = i, j</span><br><span class="line">                value_to_index[final_state[i][j]] = (i, j)</span><br><span class="line">                    </span><br><span class="line">        </span><br><span class="line">        <span class="comment"># final_state中每个值所在的位置</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment"># (f(x), g(x), state, start_x, start_y)</span></span><br><span class="line">        open_set.append((<span class="number">0</span>, <span class="number">0</span>, self.list_to_tuple(init_state), start_x, start_y))</span><br><span class="line">        close_set.add(self.list_to_tuple(init_state))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> open_set:</span><br><span class="line">            f, g, now_state, x, y = heapq.heappop(open_set)</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> self.tuple_to_list(now_state) == final_state:</span><br><span class="line">                <span class="keyword">return</span> g</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">for</span> next_state, next_x, next_y <span class="keyword">in</span> \</span><br><span class="line">            self.find_next_state(now_state, x, y, close_set):</span><br><span class="line">                heapq.heappush(open_set, </span><br><span class="line">                (g + <span class="number">1</span> + self.get_h(next_state,value_to_index), </span><br><span class="line">                g + <span class="number">1</span>, next_state, next_x, next_y))</span><br><span class="line">                close_set.add(now_state)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span> </span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">find_next_state</span><span class="params">(self, now_state, x, y, close_set)</span>:</span></span><br><span class="line">        next_state_list = []</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> delta_x, delta_y <span class="keyword">in</span> DIRECTIONS:</span><br><span class="line">            next_x = x + delta_x</span><br><span class="line">            next_y = y + delta_y </span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> self.is_valid(next_x, next_y, now_state):</span><br><span class="line">                <span class="keyword">continue</span> </span><br><span class="line">        </span><br><span class="line">            <span class="comment"># deep copy</span></span><br><span class="line">            next_state = self.tuple_to_list(now_state)</span><br><span class="line">            next_state[x][y], next_state[next_x][next_y] = \</span><br><span class="line">            next_state[next_x][next_y], next_state[x][y]</span><br><span class="line">            </span><br><span class="line">            next_state = self.list_to_tuple(next_state)</span><br><span class="line">            <span class="keyword">if</span> next_state <span class="keyword">in</span> close_set:</span><br><span class="line">                <span class="keyword">continue</span> </span><br><span class="line">        </span><br><span class="line">            next_state_list.append((next_state, next_x, next_y))</span><br><span class="line">        <span class="keyword">return</span> next_state_list   </span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_h</span><span class="params">(self, now_state, value_to_index)</span>:</span></span><br><span class="line">        <span class="comment"># sigma（每个数字所在的位置的dx+dy）</span></span><br><span class="line">        h = <span class="number">0</span></span><br><span class="line">        n = len(now_state)</span><br><span class="line">        m = len(now_state[<span class="number">0</span>])</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(m):</span><br><span class="line">                final_x, final_y = value_to_index[now_state[i][j]]</span><br><span class="line">                h += abs(final_x - i) + abs(final_y - j)</span><br><span class="line">        <span class="keyword">return</span> h </span><br><span class="line"></span><br><span class="line">     <span class="function"><span class="keyword">def</span> <span class="title">get_h2</span><span class="params">(self, now_state, value_to_index)</span>:</span></span><br><span class="line">      	<span class="keyword">return</span> random.randint(<span class="number">1</span>, <span class="number">100</span>)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">is_valid</span><span class="params">(self, x, y, now_state)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> x &lt; <span class="number">0</span> <span class="keyword">or</span> y &lt; <span class="number">0</span> <span class="keyword">or</span> x &gt;= len(now_state) <span class="keyword">or</span> y &gt;= len(now_state[<span class="number">0</span>]):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span> </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">list_to_tuple</span><span class="params">(self, l)</span>:</span></span><br><span class="line">        result = [tuple(x) <span class="keyword">for</span> x <span class="keyword">in</span> l]</span><br><span class="line">        <span class="keyword">return</span> tuple(result)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tuple_to_list</span><span class="params">(self, t)</span>:</span></span><br><span class="line">        result = [list(x) <span class="keyword">for</span> x <span class="keyword">in</span> t]</span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure>

<ul>
<li>get_h：必須要是一個能作正確引導的，不然答案不見得正確的, 如，用get_h2時，肯定就是完了</li>
<li>全走時會比較差</li>
</ul>
<h5 id="解法1-min-dist-w-打擂台"><a href="#解法1-min-dist-w-打擂台" class="headerlink" title="解法1, min_dist w/ 打擂台"></a>解法1, min_dist w/ 打擂台</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line">DIRECTIONS = [(<span class="number">0</span>, <span class="number">1</span>), (<span class="number">0</span>, <span class="number">-1</span>), (<span class="number">1</span>, <span class="number">0</span>), (<span class="number">-1</span>, <span class="number">0</span>)]</span><br><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    @param init_state: the initial state of chessboard</span></span><br><span class="line"><span class="string">    @param final_state: the final state of chessboard</span></span><br><span class="line"><span class="string">    @return: return an integer, denote the number of minimum moving</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minMoveStep</span><span class="params">(self, init_state, final_state)</span>:</span></span><br><span class="line">        <span class="comment"># write your code here</span></span><br><span class="line">        <span class="keyword">if</span> len(init_state) == <span class="number">0</span> <span class="keyword">or</span> len(init_state[<span class="number">0</span>]) == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span> </span><br><span class="line">        </span><br><span class="line">        n = len(init_state)</span><br><span class="line">        m = len(init_state[<span class="number">0</span>])</span><br><span class="line">        </span><br><span class="line">        open_set = []</span><br><span class="line">        close_set = set()</span><br><span class="line">        value_to_index = &#123;&#125;</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment"># find init 0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(m):</span><br><span class="line">                <span class="keyword">if</span> init_state[i][j] == <span class="number">0</span>:</span><br><span class="line">                    start_x, start_y = i, j</span><br><span class="line">                value_to_index[final_state[i][j]] = (i, j)</span><br><span class="line">                    </span><br><span class="line">        </span><br><span class="line">        <span class="comment"># final_state中每个值所在的位置</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment"># (f(x), g(x), state, start_x, start_y)</span></span><br><span class="line">        open_set.append((<span class="number">0</span>, <span class="number">0</span>, self.list_to_tuple(init_state), start_x, start_y))</span><br><span class="line">        close_set.add(self.list_to_tuple(init_state))</span><br><span class="line">				count = <span class="number">0</span></span><br><span class="line">        min_dist = sys.maxsize</span><br><span class="line">        <span class="keyword">while</span> open_set:</span><br><span class="line">            f, g, now_state, x, y = heapq.heappop(open_set)</span><br><span class="line">            </span><br><span class="line">            <span class="string">""" 解法一 """</span></span><br><span class="line">            <span class="keyword">if</span> g &gt; min_dist:</span><br><span class="line">              	<span class="keyword">continue</span></span><br><span class="line">                </span><br><span class="line">            <span class="keyword">if</span> self.tuple_to_list(now_state) == final_state:</span><br><span class="line">                <span class="comment"># return g</span></span><br><span class="line">                min_dist = min(min_dist, g)</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="string">""" 解法一 END """</span>            </span><br><span class="line">            </span><br><span class="line">            <span class="keyword">for</span> next_state, next_x, next_y <span class="keyword">in</span> \</span><br><span class="line">            self.find_next_state(now_state, x, y, close_set):</span><br><span class="line">                heapq.heappush(open_set, </span><br><span class="line">                (g + <span class="number">1</span> + self.get_h(next_state,value_to_index), </span><br><span class="line">                g + <span class="number">1</span>, next_state, next_x, next_y))</span><br><span class="line">                close_set.add(now_state)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span> </span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">find_next_state</span><span class="params">(self, now_state, x, y, close_set)</span>:</span></span><br><span class="line">        next_state_list = []</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> delta_x, delta_y <span class="keyword">in</span> DIRECTIONS:</span><br><span class="line">            next_x = x + delta_x</span><br><span class="line">            next_y = y + delta_y </span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> self.is_valid(next_x, next_y, now_state):</span><br><span class="line">                <span class="keyword">continue</span> </span><br><span class="line">        </span><br><span class="line">            <span class="comment"># deep copy</span></span><br><span class="line">            next_state = self.tuple_to_list(now_state)</span><br><span class="line">            next_state[x][y], next_state[next_x][next_y] = \</span><br><span class="line">            next_state[next_x][next_y], next_state[x][y]</span><br><span class="line">            </span><br><span class="line">            next_state = self.list_to_tuple(next_state)</span><br><span class="line">            <span class="keyword">if</span> next_state <span class="keyword">in</span> close_set:</span><br><span class="line">                <span class="keyword">continue</span> </span><br><span class="line">        </span><br><span class="line">            next_state_list.append((next_state, next_x, next_y))</span><br><span class="line">        <span class="keyword">return</span> next_state_list   </span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_h</span><span class="params">(self, now_state, value_to_index)</span>:</span></span><br><span class="line">        <span class="comment"># sigma（每个数字所在的位置的dx+dy）</span></span><br><span class="line">        h = <span class="number">0</span></span><br><span class="line">        n = len(now_state)</span><br><span class="line">        m = len(now_state[<span class="number">0</span>])</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(m):</span><br><span class="line">                final_x, final_y = value_to_index[now_state[i][j]]</span><br><span class="line">                h += abs(final_x - i) + abs(final_y - j)</span><br><span class="line">        <span class="keyword">return</span> h </span><br><span class="line">        </span><br><span class="line">		<span class="function"><span class="keyword">def</span> <span class="title">get_h2</span><span class="params">(self, now_state, value_to_index)</span>:</span></span><br><span class="line">      	<span class="keyword">return</span> random.randint(<span class="number">1</span>, <span class="number">100</span>)</span><br><span class="line">      </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">is_valid</span><span class="params">(self, x, y, now_state)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> x &lt; <span class="number">0</span> <span class="keyword">or</span> y &lt; <span class="number">0</span> <span class="keyword">or</span> x &gt;= len(now_state) <span class="keyword">or</span> y &gt;= len(now_state[<span class="number">0</span>]):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span> </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">list_to_tuple</span><span class="params">(self, l)</span>:</span></span><br><span class="line">        result = [tuple(x) <span class="keyword">for</span> x <span class="keyword">in</span> l]</span><br><span class="line">        <span class="keyword">return</span> tuple(result)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tuple_to_list</span><span class="params">(self, t)</span>:</span></span><br><span class="line">        result = [list(x) <span class="keyword">for</span> x <span class="keyword">in</span> t]</span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure>



<h5 id="解法1-2-加上SPFA"><a href="#解法1-2-加上SPFA" class="headerlink" title="解法1+2, 加上SPFA"></a>解法1+2, 加上SPFA</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line">DIRECTIONS = [(<span class="number">0</span>, <span class="number">1</span>), (<span class="number">0</span>, <span class="number">-1</span>), (<span class="number">1</span>, <span class="number">0</span>), (<span class="number">-1</span>, <span class="number">0</span>)]</span><br><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    @param init_state: the initial state of chessboard</span></span><br><span class="line"><span class="string">    @param final_state: the final state of chessboard</span></span><br><span class="line"><span class="string">    @return: return an integer, denote the number of minimum moving</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minMoveStep</span><span class="params">(self, init_state, final_state)</span>:</span></span><br><span class="line">        <span class="comment"># write your code here</span></span><br><span class="line">        <span class="keyword">if</span> len(init_state) == <span class="number">0</span> <span class="keyword">or</span> len(init_state[<span class="number">0</span>]) == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span> </span><br><span class="line">        </span><br><span class="line">        n = len(init_state)</span><br><span class="line">        m = len(init_state[<span class="number">0</span>])</span><br><span class="line">        </span><br><span class="line">        open_set = []</span><br><span class="line">        <span class="comment"># close_set = set()</span></span><br><span class="line">        close_set = &#123;&#125;</span><br><span class="line">        value_to_index = &#123;&#125;</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment"># find init 0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(m):</span><br><span class="line">                <span class="keyword">if</span> init_state[i][j] == <span class="number">0</span>:</span><br><span class="line">                    start_x, start_y = i, j</span><br><span class="line">                value_to_index[final_state[i][j]] = (i, j)</span><br><span class="line">                    </span><br><span class="line">        </span><br><span class="line">        <span class="comment"># final_state中每个值所在的位置</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment"># (f(x), g(x), state, start_x, start_y)</span></span><br><span class="line">        open_set.append((<span class="number">0</span>, <span class="number">0</span>, self.list_to_tuple(init_state), start_x, start_y))</span><br><span class="line">        <span class="comment"># close_set.add(self.list_to_tuple(init_state))</span></span><br><span class="line">        close_set[self.list_to_tuple(init_state)] = <span class="number">0</span></span><br><span class="line">				count = <span class="number">0</span></span><br><span class="line">        min_dist = sys.maxsize</span><br><span class="line">        <span class="keyword">while</span> open_set:</span><br><span class="line">            f, g, now_state, x, y = heapq.heappop(open_set)</span><br><span class="line">            </span><br><span class="line">            <span class="string">""" 解法一 """</span></span><br><span class="line">            <span class="keyword">if</span> g &gt; min_dist:</span><br><span class="line">              	<span class="keyword">continue</span></span><br><span class="line">                </span><br><span class="line">            <span class="keyword">if</span> self.tuple_to_list(now_state) == final_state:</span><br><span class="line">                <span class="comment"># return g</span></span><br><span class="line">                min_dist = min(min_dist, g)</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="string">""" 解法一 END """</span>            </span><br><span class="line">            </span><br><span class="line">            <span class="keyword">for</span> next_state, next_x, next_y <span class="keyword">in</span> \</span><br><span class="line"></span><br><span class="line">            <span class="string">""" 解法二 修改 find_next_state裡的條件，並傳入 g"""</span></span><br><span class="line">            self.find_next_state(now_state, x, y, close_set, g):</span><br><span class="line">                heapq.heappush(open_set, </span><br><span class="line">                (g + <span class="number">1</span> + self.get_h(next_state,value_to_index), </span><br><span class="line">                g + <span class="number">1</span>, next_state, next_x, next_y))</span><br><span class="line">                <span class="comment"># close_set.add(now_state)</span></span><br><span class="line">                close_set[next_state] = g + <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> min_dist == sys.maxsize:</span><br><span class="line">          <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">        <span class="keyword">return</span> min_dist</span><br><span class="line">        <span class="comment"># return -1 </span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">find_next_state</span><span class="params">(self, now_state, x, y, close_set, g)</span>:</span></span><br><span class="line">        next_state_list = []</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> delta_x, delta_y <span class="keyword">in</span> DIRECTIONS:</span><br><span class="line">            next_x = x + delta_x</span><br><span class="line">            next_y = y + delta_y </span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> self.is_valid(next_x, next_y, now_state):</span><br><span class="line">                <span class="keyword">continue</span> </span><br><span class="line">        </span><br><span class="line">            <span class="comment"># deep copy</span></span><br><span class="line">            next_state = self.tuple_to_list(now_state)</span><br><span class="line">            next_state[x][y], next_state[next_x][next_y] = \</span><br><span class="line">            next_state[next_x][next_y], next_state[x][y]</span><br><span class="line">            </span><br><span class="line">            next_state = self.list_to_tuple(next_state)</span><br><span class="line">            <span class="keyword">if</span> next_state <span class="keyword">in</span> close_set <span class="keyword">and</span> close_set[next_state] &gt;= g + <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">continue</span> </span><br><span class="line">        </span><br><span class="line">            next_state_list.append((next_state, next_x, next_y))</span><br><span class="line">        <span class="keyword">return</span> next_state_list   </span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_h</span><span class="params">(self, now_state, value_to_index)</span>:</span></span><br><span class="line">        <span class="comment"># sigma（每个数字所在的位置的dx+dy）</span></span><br><span class="line">        h = <span class="number">0</span></span><br><span class="line">        n = len(now_state)</span><br><span class="line">        m = len(now_state[<span class="number">0</span>])</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(m):</span><br><span class="line">                final_x, final_y = value_to_index[now_state[i][j]]</span><br><span class="line">                h += abs(final_x - i) + abs(final_y - j)</span><br><span class="line">        <span class="keyword">return</span> h </span><br><span class="line">        </span><br><span class="line">		<span class="function"><span class="keyword">def</span> <span class="title">get_h2</span><span class="params">(self, now_state, value_to_index)</span>:</span></span><br><span class="line">      	<span class="keyword">return</span> random.randint(<span class="number">1</span>, <span class="number">100</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">is_valid</span><span class="params">(self, x, y, now_state)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> x &lt; <span class="number">0</span> <span class="keyword">or</span> y &lt; <span class="number">0</span> <span class="keyword">or</span> x &gt;= len(now_state) <span class="keyword">or</span> y &gt;= len(now_state[<span class="number">0</span>]):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span> </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">list_to_tuple</span><span class="params">(self, l)</span>:</span></span><br><span class="line">        result = [tuple(x) <span class="keyword">for</span> x <span class="keyword">in</span> l]</span><br><span class="line">        <span class="keyword">return</span> tuple(result)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tuple_to_list</span><span class="params">(self, t)</span>:</span></span><br><span class="line">        result = [list(x) <span class="keyword">for</span> x <span class="keyword">in</span> t]</span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure>



<ul>
<li>實際用的時候可以有點小偏差</li>
</ul>
<h2 id="單調隊列-1507-和至少為K的最短子數組"><a href="#單調隊列-1507-和至少為K的最短子數組" class="headerlink" title="單調隊列 - 1507.和至少為K的最短子數組"></a>單調隊列 - 1507.和至少為K的最短子數組</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    @param A: the array</span></span><br><span class="line"><span class="string">    @param K: sum</span></span><br><span class="line"><span class="string">    @return: the length</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">shortestSubarray</span><span class="params">(self, A, K)</span>:</span></span><br><span class="line">        <span class="comment"># Write your code here.</span></span><br><span class="line">        <span class="comment"># return self.O_N3_TLE(A, K)</span></span><br><span class="line">        <span class="comment"># return self.mono_Q(A, K)</span></span><br><span class="line">        <span class="keyword">return</span> self.my_mono_Q(A, K)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_mono_Q</span><span class="params">(self, A, K)</span>:</span></span><br><span class="line">        N = len(A)</span><br><span class="line">        pre_sum = [<span class="number">0</span>] * (N+<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(N):</span><br><span class="line">            pre_sum[i+<span class="number">1</span>] = pre_sum[i] + A[i]</span><br><span class="line">            </span><br><span class="line">        Q = collections.deque()</span><br><span class="line">        ans = sys.maxsize</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(N+<span class="number">1</span>):</span><br><span class="line">            <span class="comment"># 考慮A裡有負數的情況, pre_sum就會下降了；它對 pre_sum 造成了一個山谷</span></span><br><span class="line">            <span class="comment"># 1. 到山谷才能拿到的值，經過山谷之前只會更小，所以前面不會再是答案</span></span><br><span class="line">            <span class="comment"># 2. 山谷之前只是讓長度更長不會更短</span></span><br><span class="line">            <span class="keyword">while</span> Q <span class="keyword">and</span> pre_sum[j] &lt;= pre_sum[Q[<span class="number">-1</span>]]:</span><br><span class="line">                Q.pop() <span class="comment"># 塞的時候從右邊check</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment"># 都是正數的情況</span></span><br><span class="line">            <span class="keyword">while</span> Q <span class="keyword">and</span> pre_sum[j] - pre_sum[Q[<span class="number">0</span>]] &gt;= K:</span><br><span class="line">                i = Q.popleft() <span class="comment"># 找答案時候從左邊</span></span><br><span class="line">                ans = min(ans, j - i)</span><br><span class="line">                </span><br><span class="line">            Q.append(j)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> ans <span class="keyword">if</span> ans &lt; sys.maxsize <span class="keyword">else</span> <span class="number">-1</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">mono_Q</span><span class="params">(self, A, K)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        [(0,-1), (3,0), (7,1), (13,2), (14,3), (9,4), (19,?)]</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        # K = 10</span></span><br><span class="line"><span class="string">        i:      0,  1,  2,  3,  4</span></span><br><span class="line"><span class="string">        A[i]    3,  4,  6,  1,  -5</span></span><br><span class="line"><span class="string">        sum:    3,  7,  13, 14, 9</span></span><br><span class="line"><span class="string">        now_sum = 13</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        Q.popleft()</span></span><br><span class="line"><span class="string">        1. now_sum - 0 &gt;= K?</span></span><br><span class="line"><span class="string">        ans = min(ans, 2 - (-1))</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        2. now_sum - 3 &gt;= K? √</span></span><br><span class="line"><span class="string">        ans = min(ans, 2 - (0))</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        3. now_sum - 7 &gt;= K? x</span></span><br><span class="line"><span class="string">        break</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        ★ 第二部分</span></span><br><span class="line"><span class="string">        2. (9, 4)</span></span><br><span class="line"><span class="string">        - 9 &lt; 14?</span></span><br><span class="line"><span class="string">        pop()</span></span><br><span class="line"><span class="string">        - 9 &lt; 13?  </span></span><br><span class="line"><span class="string">        pop()</span></span><br><span class="line"><span class="string">        - 9 &lt; 7?</span></span><br><span class="line"><span class="string">        break</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">    </span><br><span class="line">        N = len(A)</span><br><span class="line">        pre_sum = [<span class="number">0</span>] * (N+<span class="number">1</span>)</span><br><span class="line">        <span class="comment"># for i in range(len(A)):</span></span><br><span class="line">        <span class="comment">#     pre_sum[i+1] = pre_sum[i] + A[i]</span></span><br><span class="line">        <span class="keyword">for</span> i, n <span class="keyword">in</span> enumerate(A):</span><br><span class="line">            pre_sum[i+<span class="number">1</span>] = pre_sum[i] + n</span><br><span class="line">        </span><br><span class="line">        ans = N + <span class="number">1</span></span><br><span class="line">        Q = collections.deque()</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(N + <span class="number">1</span>):</span><br><span class="line">            <span class="string">"""★ 第二部分"""</span></span><br><span class="line">            <span class="keyword">while</span> Q <span class="keyword">and</span> pre_sum[Q[<span class="number">-1</span>]] &gt;= pre_sum[j]:</span><br><span class="line">                Q.pop()</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">while</span> Q <span class="keyword">and</span> pre_sum[j] - pre_sum[Q[<span class="number">0</span>]] &gt;= K:</span><br><span class="line">                i = Q.popleft()</span><br><span class="line">                ans = min(ans, j - i)</span><br><span class="line">            </span><br><span class="line">            Q.append(j)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> ans <span class="keyword">if</span> ans &lt; N+<span class="number">1</span> <span class="keyword">else</span> <span class="number">-1</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">O_N3_TLE</span><span class="params">(self, A, K)</span>:</span></span><br><span class="line">        n = len(A)</span><br><span class="line">        <span class="comment"># pre_sum = [0] * (N-1)</span></span><br><span class="line">        min_len = sys.maxsize</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">if</span> A[i] &gt;= K:   <span class="comment"># 要的是至少為K，不是剛好等於K</span></span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(i+<span class="number">1</span>, n+<span class="number">1</span>):</span><br><span class="line">                cur_sum = sum(A[i:j])</span><br><span class="line">                <span class="keyword">if</span> cur_sum &gt;= K:   <span class="comment"># 要的是至少為K，不是剛好等於K</span></span><br><span class="line">                    min_len = min(min_len, j-i)</span><br><span class="line">                <span class="comment"># print(i, j, cur_sum)</span></span><br><span class="line">                </span><br><span class="line">        <span class="keyword">if</span> min_len == sys.maxsize:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">        <span class="keyword">return</span> min_len</span><br></pre></td></tr></table></figure>

<ul>
<li>若二分答案還得再多一個 logN</li>
</ul>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Joe Huang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://yoursite.com/2019/06/16/Algo.%20Ult./seminar_6&amp;7&amp;8/">http://yoursite.com/2019/06/16/Algo.%20Ult./seminar_6&amp;7&amp;8/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2019/06/24/Algo.%20Ult./seminar_9/"><i class="fa fa-chevron-left">  </i><span>Algo. Ult./seminar_9</span></a></div><div class="next-post pull-right"><a href="/2019/06/09/Algo.%20Ult./seminar_4&amp;5/"><span>Algo. Ult./seminar_4&amp;5</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2020 By Joe Huang</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>